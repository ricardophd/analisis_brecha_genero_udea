
try{/* (C) Copyright IBM Corp. 2007  All Rights Reserved.                */
/**
 * This is the JS file for the common semantic tagging service
 */















 



 
var STSPG = {
	lang: "en",
	bidi: "ltr",
	service: "",
    contextUrl: "/wps/semanticTag",
	wpsBaseURL: "/wps",
	externalServiceEntries:'',
	isDynamicLoading : false,
	isC2AHandlerRequired : true,
	isPersonCardHandlerRequired : true,
	isActionHandlerRequired : true,
	isParsingRequired : true,
	newSametimeCommunityServer:true
};

STSPG.service={"entries":[{"id":"com.ibm.portal.action","test":"(globalTestNode.className.match(STSP.actionRE))","js":"","classnames":[".com\\.ibm\\.portal\\.action"]},{"id":"hcard","test":"(globalTestNode.className.match(STSP.hcardRE))","js":"/javascript/semanticTagPerson.js","classnames":[".vcard"]},{"id":"sametime","test":"id:hcard","js":"/javascript/semanticTagAwareness.js","classnames":[]},{"id":"c2a","test":"(globalTestNode.className.match(/(^|\\s)c2a:(source|target)(\\s|$)/)) ","js":"/javascript/semanticTagC2A.js","classnames":[".c2a\\:source",".c2a\\:target"]}]};
var externalEntries;
try{
if(STSPG.externalServiceEntries!=null&&STSPG.externalServiceEntries.length>0){
externalEntries=eval(" ("+STSPG.externalServiceEntries+")");
STSPG.service.entries=STSPG.service.entries.concat(externalEntries);
}else{
}
}
catch(e){
}


var STSP={version:"1.0",lang:STSPG.lang,bidi:STSPG.bidi,tagScope:["*"],service:STSPG.service,scripts:new Array(),actionRegistry:null,refcntAttr:"semtag_refcnt",hoverIdPrefix:"semtag_hover_",hoverIdx:0,liveElemPrefix:"semtag_live_",reMap:new Array(),actionRE:new RegExp("(^|\\s)com.ibm.portal.action(\\s|$)"),hcardRE:new RegExp("(^|\\s)vcard(\\s|$)"),specialMenuProviders:new Array(),parseElem:null,isEnablerObjectAvailable:(typeof com!=="undefined")&&(typeof com.ibm!=="undefined")&&(typeof com.ibm.mashups!=="undefined"),svcEntryPersonCard:null,isSizzleAvailable:((typeof i$!=="undefined")&&(typeof i$.query==="function")),DELAY:10,isMobile:navigator.userAgent.match(/(Android|BlackBerry|iPad|iPhone|iPod|IEMobile|Opera Mini)/ig)?true:false,init:function(_1){
var _2=STSP.DELAY;
if(STSPG.isParsingRequired===false){
STSP.svcEntryPersonCard=STSP.service.entries[1];
if(!STSP.svcEntryPersonCard.nodes){
STSP.svcEntryPersonCard.nodes=[];
}
}
var _3=STSP.isEnablerObjectAvailable;
STSP.isSizzleAvailable=((typeof i$!=="undefined")&&(typeof i$.query==="function"));
if(_3===false){
STSP.parseElem=STSP.getElementFromEvent(_1);
window.setTimeout(STSP.parseDom,STSP.DELAY);
}else{
var _4=STSP.service.entries;
var _5=_4?_4.length:0;
if(STSPG.isDynamicLoading){
for(var k=0;k<_4.length;k++){
var _6=_4[k];
if(_6.id==="hcard"){
STSP.loadScript("/javascript/attributes.js");
STSP.loadScript("/javascript/semanticTagMenu.js");
}
STSP.loadScript(_6.js);
}
}
}
if(STSPG.isActionHandlerRequired){
STSP.setCallback("com.ibm.portal.action",STSP.processActions);
}
if(!STSPG.isDynamicLoading&&STSPG.isPersonCardHandlerRequired&&(typeof SemTagMenu==="object")){
window.setTimeout(SemTagMenu.init,_2);
}
},loadConnScript:function(){
var _7=document.createElement("script");
var _8=STSP.connUrl;
var _9=_8;
_9=_8+"/profiles/portalJS/portalBizCard.js";
_9+=(_9.indexOf("?")==-1)?"?":"&";
_9+="lang="+STSP.lang;
_7.src=_9;
try{
document.body.insertBefore(_7,document.body.firstChild);
}
catch(e){
alert("Svc.loadConnScript caught: "+e);
}
},watchEvent:function(_a,_b,_c,_d){
try{
if(_a.addEventListener){
_a.addEventListener(_b,_c,_d);
}else{
if(_a.attachEvent){
_a.attachEvent("on"+_b,_c);
}
}
}
catch(e){
}
},clearEventWatch:function(_e,_f,_10,_11){
try{
if(_e.removeEventListener){
_e.removeEventListener(_f,_10,_11);
}else{
if(_e.detachEvent){
_e.detachEvent("on"+_f,_10);
}
}
}
catch(e){
}
},parseDomUsingMashupHandler:function(_12,_13){
if(STSP.isSizzleAvailable===true){
}
if(STSPG.isParsingRequired===false){
return false;
}
var _14=STSP.getService(_13);
if(_13==="com.ibm.portal.action"){
STSP.setCallback(_13,STSP.processActions);
}
if(!_14.nodes){
_14.nodes=[];
}
for(var len=0;len<_12.length;len++){
_14.nodes.push(_12[len]);
}
if(_14.callback){
_14.callback.call(this);
}
STSP.loadScript(_14.js);
try{
var _15=STSP.service.entries;
for(var k=0;k<_15.length;k++){
var _16=_15[k];
var _17=false;
if(_16.id===_14.id){
continue;
}
if(_16.test&&_16.test.match(/^id:/)){
var _18=_16.test.substr(3);
if(_18!=_14.id){
continue;
}
var _12=STSP.getNodes(_18);
if(_12&&0<_12.length){
_17=true;
}
}
if(_17&&STSPG.isDynamicLoading){
STSP.loadScript(_16.js);
}
if(_16.callback){
_16.callback.call(this);
}
}
}
catch(e){
}
},parseDom:function(_19,_1a){
if(STSPG.isParsingRequired===false){
return false;
}
if(!_1a&&_19){
_1a=STSP.getElementFromEvent(_19);
}
if(!_1a&&STSP.parseElem){
_1a=STSP.parseElem;
}else{
if(!_1a){
_1a=document;
}else{
if(typeof _1a=="string"){
_1a=document.getElementById(_1a);
}
}
}
var _1b=STSP.service.entries;
for(var j=0;j<_1b.length;j++){
var _1c=_1b[j];
if(!_1c.nodes){
_1c.nodes=[];
}else{
if(_1a==document){
while(0<_1c.nodes.length){
_1c.nodes.pop();
}
}
}
}
var _1d=new Date().getTime();
if(STSP.isSizzleAvailable===false){
STSP.traverseNodes(_1a);
var _1e=new Date().getTime();
}else{
_1d=new Date().getTime();
for(var k=0;k<_1b.length;k++){
var _1c=_1b[k];
if(_1c.classnames==null||_1c.classnames==="undefined"||_1c.classnames.length<1){
continue;
}
var _1f=typeof _1c.classnames;
if(typeof _1c.classnames==="string"){
continue;
}
var _20=_1c.classnames.join(",");
var _21;
_21=i$.query(_1c.classnames.join(","),_1a,_1c.nodes);
if(_1c.nodes.length!=_21.length){
}
}
_1e=new Date().getTime();
var _22=_1e-_1d;
}
for(var k=0;k<_1b.length;k++){
var _1c=_1b[k];
var _23=false;
if(0<_1c.nodes.length){
_23=true;
}else{
if(_1c.test&&_1c.test.match(/^id:/)){
var _24=_1c.test.substr(3);
var _25=STSP.getNodes(_24);
if(_25&&0<_25.length){
_23=true;
}
}
}
if(_23){
if(STSPG.isDynamicLoading){
if(_1c.id=="hcard"){
STSP.loadScript("/javascript/attributes.js");
STSP.loadScript("/javascript/semanticTagMenu.js");
}
var _26=typeof _1c.js;
if(typeof _1c.js==="string"){
STSP.loadScript(_1c.js);
}
}
}
if(_1c.callback){
_1c.callback.call(_1c.nodes);
}
}
STSP.parseElem=null;
},traverseNodes:function(_27){
STSP.traverse_children(_27);
},traverse_tagscope:function(_28){
var _29=STSP.service.entries;
var _2a=_28.getElementsByTagName(STSP.tagScope);
for(var i=0;i<_2a.length;i++){
var _28=_2a[i];
for(var j=0;j<_29.length;j++){
var _2b=_29[j];
if(!_2b.nodes){
_2b.nodes=new Array();
}
if(eval(_2b.test)){
_2b.nodes.push(_28);
}
}
}
},traverse_children:function(_2c){
STSP.testNode(_2c);
var _2d=(_2c&&_2c.childNodes)?_2c.childNodes:null;
if(STSPG.isPersonCardHandlerRequired&&_2c&&_2c.tagName&&_2c.tagName=="IFRAME"){
try{
if(typeof ActiveXObject!="undefined"){
var _2e=document.frames[_2c.id].document;
if(_2e){
_2d=_2e.childNodes;
}
}else{
if(_2c.contentDocument&&_2c.contentDocument.childNodes){
_2d=_2c.contentDocument.childNodes;
}
}
}
catch(e){
_2d=null;
}
var _2f=_2d?_2d.length:"is null";
if(_2d&&0<_2d.length){
var _30=SemTagMenu.includeCSS(_2d[0].parentNode);
if(_30){
STSP.watchEvent(_2c,"load",STSP.parseDom,false);
SemTagMenu.registerMenuEventHandlers(_2d[0].parentNode);
}
}
}
if(_2d==null||_2d=="undefined"){
return;
}
for(var i=0;i<_2d.length;i++){
STSP.traverse_children(_2d[i]);
}
},testNode:function(_31){
globalTestNode=_31;
if(_31==null||_31.className==null||_31.className=="undefined"||_31.tagName==null||_31.tagName=="undefined"){
return;
}
if(typeof _31.className!=="string"){
return;
}
var _32=STSP.service.entries;
for(var j=0;j<_32.length;j++){
var _33=_32[j];
if(_33.test&&!_33.test.match(/^id:/)&&eval(_33.test)){
if(!_31.alreadyadded){
_31.alreadyadded=true;
_33.nodes.push(_31);
}
}
}
},getService:function(_34){
var _35=STSP.service.entries;
for(var i=0;i<_35.length;i++){
var _36=_35[i];
if(_36.id==_34){
return _36;
}
}
},setSemanticTagValue:function(_37,_38,_39){
if(!_38.semTagValues){
_38.semTagValues={};
}
_38.semTagValues[_37]=_39;
},getSemanticTagValues:function(_3a){
return _3a.semTagValues;
},getNodes:function(_3b){
var _3c=STSP.getService(_3b);
if(_3c&&_3c.test&&_3c.test.match(/^id:/)){
_3c=STSP.getService(_3c.test.substr(3));
}
if(_3c){
}
var _3d=_3c?(_3c.nodes?_3c.nodes:[]):null;
return _3d;
},setCallback:function(_3e,_3f){
var _40=STSP.getService(_3e);
if(_40){
_40.callback=_3f;
}else{
}
},loadScript:function(_41,_42){
if(!_41||_41==""){
return;
}
if(_42=="undefined"||_42==null){
_42=false;
}
if(!STSP.scripts[_41]){
STSP.scripts[_41]=true;
var _43=document.createElement("script");
var url=_41.match(/^http/)?_41:STSPG.contextUrl+_41;
url+=(url.indexOf("?")==-1)?"?":"&";
url+="language="+STSP.lang;
_43.src=url;
if(STSPG.isDynamicLoading||_42){
document.body.insertBefore(_43,document.body.firstChild);
}
}
},setSpecialMenuProvider:function(_44){
STSP.specialMenuProviders.push(_44);
},getElementsByClassName:function(_45,_46,_47,_48){
if(!_46){
_46=document.body;
}
if(!_47){
limit=0;
}
if(!_48){
_48=["*"];
}
var _49=STSP.getRegExp(_45);
if(_46&&_46.className&&_46.className.match(_49)){
var _4a=new Array(_46);
return _4a;
}
var _4b=new Array();
for(var t=0;t<_48.length;t++){
var _4c=_46.getElementsByTagName(_48[t]);
for(var i=0;i<_4c.length;i++){
var _4d=_4c[i];
if(_4d.className&&_4d.className.match(_49)){
_4b.push(_4d);
}
if(0<_47&&_47==_4b.length){
break;
}
}
}
return _4b;
},getParentByClassName:function(_4e,_4f){
if(!_4f){
return null;
}
var _50=STSP.getRegExp(_4e);
if(_4f.className&&_4f.className.match(_50)){
return _4f;
}
while(_4f.parentNode){
_4f=_4f.parentNode;
if(_4f.className&&_4f.className.match(_50)){
return _4f;
}
}
return null;
},addHover:function(_51,_52,_53,_54){
while(typeof SemTagMenu==undefined){
alert("waiting...");
}
var _55=_51.getAttribute(STSP.refcntAttr);
var _56=(_52!==null);
if(_55){
_51.setAttribute(STSP.refcntAttr,parseInt(Number(_55)+1));
if(SemTagMenu.staticHover){
var img=SemTagMenu.findHoverFromLiveElement(_51);
if(img){
STSP.watchEvent(img,"click",_53,false);
img.setAttribute("href","javascript:SemTagMenu.a11y()");
}else{
}
}else{
STSP.watchEvent(_51,"mouseover",_52,false);
}
}else{
_51.setAttribute(STSP.refcntAttr,"1");
STSP.hoverIdx++;
_51.setAttribute(STSP.liveElemPrefix+"id",STSP.hoverIdx);
if(SemTagMenu.staticHover){
var img=STSP.createHoverImage(_54);
STSP.watchEvent(img,"click",_53,false);
STSP.watchEvent(img,"keydown",SemTagMenu.a11y,false);
img.setAttribute("href","javascript:void()");
var _57=_51.nextSibling;
if(_57){
_57.parentNode.insertBefore(img,_57);
}else{
_51.parentNode.appendChild(img);
}
_51.setAttribute(STSP.hoverIdPrefix+"idx",parseInt(STSP.hoverIdx));
_51.id=STSP.liveElemPrefix+STSP.hoverIdx;
}else{
var _58=SemTagUtil.getNodeClassValue(_51);
if(_58&&0<_58.length){
_58+=" hasHover";
}else{
_58="hasHover";
}
SemTagUtil.setNodeClassValue(_51,_58);
STSP.watchEvent(_51,"mouseover",_52,false);
_51.setAttribute("tabIndex","0");
STSP.watchEvent(_51,"focus",_52,false);
STSP.watchEvent(_51,"blur",SemTagMenu.mouseout,false);
}
}
},removeHover:function(_59,_5a,_5b){
var _5c=_59.getAttribute(STSP.refcntAttr);
if(_5c){
var _5d=Number(_5c)-1;
if(_5d<0){
}
if(SemTagMenu.staticHover){
var _5e=STSP.getHoverElement(_59);
STSP.clearEventWatch(_5e,"click",_5b,false);
if(_5d==0){
_5e.parentNode.removeChild(_5e);
}
}else{
STSP.clearEventWatch(_59,"mouseover",_5a,false);
STSP.clearEventWatch(_59,"focus",_5a,false);
_59.setAttribute(STSP.refcntAttr,_5d);
if(_5d==0){
var _5f=SemTagUtil.getNodeClassValue(_59);
var _60=_5f.replace(/hasHover/,"");
SemTagUtil.setNodeClassValue(_59,_60);
_59.removeAttribute(STSP.refcntAttr);
_59.removeAttribute("tabIndex");
}
}
}
},createHoverImage:function(_61){
var img=document.createElement("img");
img.id=STSP.hoverIdPrefix+STSP.hoverIdx;
img.className=SemTagMenu.iconName;
img.setAttribute("src",STSPG.contextUrl+"/ui/menu_selected.gif");
img.setAttribute("border","0");
img.setAttribute("alt",_61);
var _62=document.createElement("a");
STSP.watchEvent(_62,"mouseover",SemTagMenu.activateHover,false);
STSP.watchEvent(_62,"mouseout",SemTagMenu.deactivateHover,false);
_62.appendChild(img);
return _62;
},getHoverElement:function(_63){
if(!_63){
return null;
}
if(SemTagMenu.staticHover){
var idx=_63.getAttribute(STSP.hoverIdPrefix+"idx");
var img=document.getElementById(STSP.hoverIdPrefix+idx);
if(img){
var _64=img.parentNode;
return _64;
}
}else{
var _65=SemTagUtil.getNodeClassValue(_63);
if(_65.match(/hasHover/)){
return _63;
}
}
return null;
},showHover:function(_66,_67,_68){
SemTagMenu.showHover(_66,_67,_68);
},setMenuData:function(_69,_6a,_6b,_6c,_6d){
SemTagMenu.setMenuData(_69,_6a,_6b,_6c,_6d);
},getMenuItemJson:function(_6e,_6f,_70,_71){
var o=_70?_70:0;
var i=_71?_71:"";
var _72={"label":_6e,"href":_6f,"order":o,"icon":i};
return _72;
},getMenuHeaderJson:function(_73,_74,_75){
if(_74!="text/html"){
return null;
}
if(_73&&0<_73.length){
var _76={"markup":_73,"order":_75};
return _76;
}else{
null;
}
},getMenuFooterJson:function(_77,_78,_79){
if(_78!="text/html"){
return null;
}
if(_77&&0<_77.length){
var _7a={"markup":_77,"order":_79};
return _7a;
}else{
null;
}
},getElementFromEvent:function(_7b){
var _7c=_7b.target?_7b.target:_7b.srcElement;
if(_7c==window){
_7c=_7c.document;
}
return _7c;
},getLiveElementFromEvent:function(_7d){
var _7e=SemTagMenu.findLiveElementFromEventSource(STSP.getElementFromEvent(_7d));
return _7e;
},getEventAbsoluteX:function(e){
var x=0;
if(e.pageX){
x=e.pageX;
}else{
if(e.clientX){
if(document.body.scrollLeft>document.documentElement.scrollLeft){
x=e.clientX+document.body.scrollLeft;
}else{
x=e.clientX+document.documentElement.scrollLeft;
}
}
}
return x;
},getEventAbsoluteY:function(e){
var y=0;
if(e.pageY){
y=e.pageY;
}else{
if(e.clientY){
if(document.body.scrollTop>document.documentElement.scrollTop){
y=e.clientY+document.body.scrollTop;
}else{
y=e.clientY+document.documentElement.scrollTop;
}
}
}
return y;
},findPosition:function(obj,_7f){
var _80=0,_81=0,_82=0;
var _83=obj.offsetWidth;
var _84;
if(obj.offsetParent){
if(_7f){
_81+=(STSP.bidi=="rtl")?0:_83;
}
_82+=obj.offsetHeight;
while(obj!=null){
_81+=obj.offsetLeft;
_82+=obj.offsetTop;
obj=obj.offsetParent;
_80++;
}
_84=[_81+(STSP.bidi=="rtl"?_83:0),_82];
return _84;
}else{
_84=[obj.x+(STSP.bidi=="rtl"?_83:0),obj.y];
return _84;
}
},createGroupJson:function(ctx,_85){
var _86={"context":ctx,"extenders":_85};
return _86;
},createActionJson:function(id,js,ctx,_87,_88,_89,url,_8a){
var i=(id&&0<id.length)?id[0].innerHTML:null;
var j=(js&&0<js.length)?js[0].innerHTML:null;
var c=(ctx&&0<ctx.length)?ctx[0].innerHTML:null;
var l=(_87&&0<_87.length)?_87[0].innerHTML:null;
var d=(_88&&0<_88.length)?_88[0].innerHTML:null;
var s=(_89&&0<_89.length)?_89[0].innerHTML:null;
var u=(url&&0<url.length)?url[0].innerHTML:null;
var o=(_8a&&0<_8a.length)?parseInt(_8a[0].innerHTML):0;
var _8b={"id":i,"impl":j,"context":c,"label":l,"description":d,"showif":s,"url":u,"order":o};
return _8b;
},parseOrder:function(_8c){
var _8d;
if(_8c==null||_8c.length==0){
_8d=0;
return _8d;
}
if(_8c.charAt(0)=="-"){
_8d=parseInt(_8c.substr(1))*-1;
return _8d;
}else{
_8d=parseInt(_8c);
return _8d;
}
},getActions:function(_8e){
var _8f;
if(!STSP.actionRegistry){
STSP.processActions();
}
for(var i=0;i<STSP.actionRegistry.length;i++){
if(STSP.actionRegistry[i].context==_8e){
_8f=STSP.actionRegistry[i].extenders;
return _8f;
}
}
_8f=STSP.actionRegistry[0].extenders;
return _8f;
},processActions:function(){
if(!STSP.actionRegistry){
STSP.actionRegistry=new Array();
STSP.actionRegistry[0]=STSP.createGroupJson("dummy",new Array());
}
var i;
var _90=STSP.getNodes("com.ibm.portal.action");
while(_90&&0<_90.length){
var _91=_90.pop();
var id=STSP.getElementsByClassName("action-id",_91);
var _92=STSP.getElementsByClassName("action-impl",_91);
var ctx=STSP.getElementsByClassName("action-context",_91);
var _93=STSP.getElementsByClassName("action-label",_91);
var _94=STSP.getElementsByClassName("action-description",_91);
var _95=STSP.getElementsByClassName("action-showif",_91);
var url=STSP.getElementsByClassName("action-url",_91);
var _96=STSP.getElementsByClassName("action-order",_91);
var _97=STSP.createActionJson(id,_92,ctx,_93,_94,_95,url,_96);
for(i=1;i<STSP.actionRegistry.length;i++){
if(STSP.actionRegistry[i].context==_97.context){
var cnt=STSP.actionRegistry[i].extenders.length;
for(var j=0;j<cnt;j++){
if(_97.id==STSP.actionRegistry[i].extenders[j].id){
break;
}
}
if(j==cnt){
STSP.actionRegistry[i].extenders.push(_97);
}
break;
}
}
if(i==STSP.actionRegistry.length){
STSP.actionRegistry[i]=STSP.createGroupJson(ctx[0].innerHTML,new Array());
STSP.actionRegistry[i].extenders.push(_97);
}
if(_97.impl){
STSP.loadScript(_97.impl,true);
}
}
for(i=0;i<STSP.actionRegistry.length;i++){
STSP.actionRegistry[i].extenders.sort(STSP.sortByOrder);
}
},sortByOrder:function(a,b){
if(a.order>b.order){
return 1;
}else{
if(a.order<b.order){
return -1;
}else{
return 0;
}
}
},getTextValue:function(_98){
if(!_98){
return "";
}
return _98.innerHTML.replace(/<[a-zA-Z\/][^>]*>/gi,"");
},getTypedValue:function(_99,_9a){
if(!_9a){
_9a="def";
}
var _9b=new Array();
var _9c=STSP.getElementsByClassName("type",_99);
var _9d=STSP.getElementsByClassName("value",_99);
var _9e="";
if(_9d.length<1){
_9e=STSP.getTextValue(_99);
}
for(var i=0;i<_9d.length;i++){
_9e+=STSP.getTextValue(_9d[i]);
}
if(_9c.length<1){
_9b[_9a]=_9e;
}else{
for(var j=0;j<_9c.length;j++){
var _9f=_9c[j];
var _a0=_9f.tagName.match(/^abbr$/i)?_9f.getAttribute("title"):STSP.getTextValue(_9f);
_9b[_a0.toLowerCase()]=_9e;
}
}
return _9b;
},findNameElementInHcard:function(_a1){
if(_a1.className!="vcard"){
_a1=STSP.getParentByClassName("vcard",_a1);
}
var _a2=STSP.getElementsByClassName("fn",_a1)[0];
if(!_a2){
_a2=STSP.getElementsByClassName("n",_a1)[0];
}
return _a2;
},getEmailFromHcard:function(_a3){
var _a4;
if(!_a3){
_a4="";
return _a4;
}
if(_a3.className!="vcard"){
_a3=STSP.getParentByClassName("vcard",_a3);
}
var _a5="";
if(_a3){
var _a6=STSP.getElementsByClassName("email",_a3)[0];
var _a7=STSP.getTypedValue(_a6,"internet");
_a5=_a7.internet;
}
_a4=_a5;
return _a4;
},findElementByNameInHcard:function(_a8,_a9){
if(_a8.className!="vcard"){
_a8=STSP.getParentByClassName("vcard",_a8);
}
var _aa=STSP.getElementsByClassName(_a9,_a8)[0];
return _aa;
},getRegExp:function(str){
var _ab=STSP.reMap[str];
if(!_ab){
_ab=new RegExp("(^|\\s)"+str+"(\\s|$)");
STSP.reMap[str]=_ab;
}
return _ab;
},addElementToHandler:function(_ac,_ad,_ae){
if(STSPG.isParsingRequired===true){
return false;
}
if(_ac==null||_ac==="undefined"){
return false;
}
var _af=STSP.service.entries;
var _b0=null;
for(var k=0;k<_af.length;k++){
var _b1=_af[k];
if(_b1.id===_ae){
_b0=_b1;
break;
}
}
if(_b0==null){
return false;
}
var _b2;
if(_ac.nodeName==="A"||_ae==="c2a"){
_b2=_ac.parentNode;
}else{
_b2=_ac;
}
if(_b2.getAttribute("alreadyAdded")==null){
if(_b0.nodes==null||_b0.nodes==="undefined"||typeof _b0.nodes!=="array"){
_b0.nodes=[];
}
_b0.nodes.push(_b2);
_b2.setAttribute("alreadyAdded",true);
if(_ae==="c2a"){
var _b3=document.getElementsByClassName("c2a:target");
for(var i=0;i<_b3.length;i++){
_b0.nodes.push(_b3.item(i));
}
}
}
_b0.callback.call(_b0.nodes);
if(_ae==="hcard"){
var _b4=typeof SemTagPerson;
if(STSPG.ifConnUrlExists==="false"&&(typeof SemTagPerson==="object")){
SemTagPerson.showHover(_ad);
}
STSP.stNI=((typeof (stproxy)==="undefined")&&(typeof (prepareSametimeLink)==="undefined"));
var _b5=typeof SemTagAwrns;
if(STSPG.isParsingRequired===false&&STSP.stNI===false&&(typeof SemTagAwrns)){
SemTagAwrns.processHcards([_b2]);
}
}
if(_ae==="c2a"&&SemTagC2A){
SemTagC2A.showHover(_ad);
}
_b0.nodes=[];
return true;
},addElementToPersonCardHandler:function(_b6,_b7){
if(STSPG.isParsingRequired===true){
return false;
}
if(_b6==null||_b6==="undefined"){
return false;
}
var _b8;
if(_b6.nodeName==="A"){
_b8=_b6.parentNode;
}else{
_b8=_b6;
}
if(_b8.getAttribute("alreadyAdded")==null){
STSP.svcEntryPersonCard.nodes.push(_b8);
_b8.setAttribute("alreadyAdded",true);
}
STSP.svcEntryPersonCard.callback.call(STSP.svcEntryPersonCard.nodes);
var _b9=typeof SemTagPerson;
if(STSPG.ifConnUrlExists==="false"&&(typeof SemTagPerson)){
SemTagPerson.showHover(_b7);
}
STSP.stNI=((typeof (stproxy)==="undefined")&&(typeof (prepareSametimeLink)==="undefined"));
var _ba=typeof SemTagAwrns;
if(STSPG.isParsingRequired===false&&STSP.stNI===false&&(typeof SemTagAwrns)){
SemTagAwrns.processHcards([_b8]);
}
STSP.svcEntryPersonCard.nodes.pop();
return true;
},registerService:function(_bb){
var _bc=STSP.service.entries;
_bc[_bc.length]=_bb;
if(STSP.isEnablerObjectAvailable&&typeof dojo!=="undefined"){
try{
dojo.addOnLoad(function(){
var _bd=new com.ibm.mashups.livetext.ConfigEntry(_bb.classnames.join(),false,"portallof",STSPG.contextUrl+"/javascript","portallof.vcard",false,_bb.id);
dojo.publish("/com/ibm/mashups/livetext/configentryadded",[_bd]);
SemTagSvc.parseDom(null,null);
});
}
catch(e){
console.error("Error occurred in registerService for service "+_bb.id+"is :"+e);
}
}
}};
var SemTagSvcConfig=null;
if((STSP.ifConnUrlExists=="true")&&(STSP.isconnServerNew===true)){
SemTagSvcConfig={isPortal:true,baseUrl:STSP.connUrl+"/profiles",loadCssFiles:true,isBidiRTL:false};
}
STSP.watchEvent(window,"load",STSP.init,false);
var SemTagSvc=STSP;
var SemTagSvcPortal=STSP;


var SemTagUtil={isGecko:(document.all?false:true),getNodeClassValue:function(_1){
var rv;
var _2;
if(SemTagUtil.isGecko){
rv=(typeof (_1.getAttribute)!="undefined")?_1.getAttribute("class"):"";
}else{
rv=_1.className;
}
_2=(typeof (rv)!="undefined"&&rv!=null)?rv:"";
return _2;
},setNodeClassValue:function(_3,_4){
if(SemTagUtil.isGecko){
_3.setAttribute("class",_4);
}else{
_3.className=_4;
}
},fireEvent:function(_5,_6){
try{
if(_5.fireEvent){
_5.fireEvent(_6);
}else{
if(_5.dispatchEvent){
_5.dispatchEvent(_6);
}
}
}
catch(e){
}
},getOwnerDocument:function(_7){
if(!_7){
return null;
}
var _8;
if(SemTagUtil.isGecko){
_8=_7.ownerDocument;
return _8;
}else{
var _9=_7;
while(_9.parentNode){
_9=_9.parentNode;
}
_8=_9;
return _8;
}
},getFrameElement:function(_a){
var _b;
if(SemTagUtil.isGecko){
var oD=_a.ownerDocument;
_b=oD.defaultView.frameElement;
return _b;
}else{
var _c=_a;
while(_c.parentNode){
_c=_c.parentNode;
}
_b=_c;
return _b;
}
},getHcardAttributeValue:function(_d,_e){
switch(_d){
case ("email"):
return SemTagUtil.getHcardTypedAttribute(_e,_d,"internet");
case ("tel"):
return SemTagUtil.getHcardTypedAttribute(_e,_d,"voice");
case ("adr"):
return SemTagUtil.getHcardTypedAttribute(_e,_d,"intl");
}
var _f=STSP.getParentByClassName("vcard",_e);
var _10=STSP.getElementsByClassName(_d,_f,1);
if(_10.length>0&&_10[0].tagName.match(/^abbr$/i)){
var _11=_10[0].getAttribute("title");
return _11;
}
switch(_d){
case ("X-person-display-inline"):
if(_10.length>0){
return true;
}else{
return false;
}
case ("fn"):
var fn=SemTagUtil.getSinglePropertyValue(_10[0]);
if(fn){
return fn;
}else{
var _11=SemTagUtil.getHcardAttributeValue("n",_e);
return _11;
}
break;
case ("X-person-header-only"):
case ("X-person-inside-inline"):
var _11=(_10&&0<_10.length);
return _11;
case ("X-sametime-resolve"):
var _12=_10[0];
var _13=(typeof (_12)!="undefined"&&_12!=null);
return _13;
case ("n"):
if(_10.length>0){
var _14=_10[0];
var _15="";
var _16=["honorific-prefix","given-name","additional-name","family-name","honorific-suffix"];
for(var i=0;i<5;i++){
var n=SemTagUtil.getSinglePropertyValue(STSP.getElementsByClassName(_16[i],_14,1)[0]);
if(n){
_15+=n+" ";
}
}
return _15;
}
var _17="";
return _17;
break;
case ("photo"):
var _18=_10[0];
if(_18){
var _13=_18.getAttribute("src");
return _13;
}else{
return;
}
break;
case ("X-sametime-status"):
var _19=_10[0];
var _13;
if(!_19){
_13="";
return _13;
}
var _1a=_19.getAttribute("value");
if(_1a){
_13=_1a;
return _13;
}else{
_13=SemTagUtil.getSinglePropertyValue(_19);
return _13;
}
break;
case ("street-address"):
case ("post-office-box"):
case ("extended-address"):
case ("locality"):
case ("region"):
case ("postal-code"):
case ("country-name"):
case ("title"):
case ("role"):
case ("org"):
default:
var _13=SemTagUtil.getSinglePropertyValue(_10[0]);
return _13;
break;
}
},getHcardTypedAttribute:function(_1b,_1c,_1d){
var _1e=new Object();
var _1f=STSP.getParentByClassName("vcard",_1b);
var _20=STSP.getElementsByClassName(_1c,_1f);
for(var i=0;i<_20.length;i++){
var _21=_20[i];
if(_1c=="email"&&_21.nodeName.toLowerCase()=="a"&&_21.href.match(/^mailto:/)){
var _22=_21.href.indexOf("?");
if(_22>-1){
_1e[_1d]=_21.href.slice(7,_22);
}else{
_1e[_1d]=_21.href.slice(7);
}
continue;
}
_1e=STSP.getTypedValue(_21,_1d);
}
return _1e;
},getSinglePropertyValue:function(_23){
if(!_23){
return false;
}
var _24=_23.innerHTML.replace(/<[a-zA-Z\/][^>]*>/gi,"");
return _24;
},crossDomainRequest:function(){
var _25=new Array();
var _26=new Array();
var _27=this;
createTimeoutFunction=function(_28){
return function(){
_27.cancelRequest(_28);
};
};
this.getScriptId=function(id){
return "_JVLN_"+id;
};
this.getScriptObject=function(id){
var _29=SemTagUtil.isGecko?this.getScriptId(id):this.$_getScriptId(id);
return document.getElementById(_29);
};
this.request=function(url,_2a,_2b,_2c,_2d){
var _2e=this.getScriptId(_2d);
if(_2b){
_25[_2d]=_2b;
}
if(_2c){
_26[_2d]=_2c;
}
var _2f=document.createElement("script");
_2f.id=_2e;
try{
_2f.src=url;
}
catch(e){
return false;
}
document.body.insertBefore(_2f,document.body.firstChild);
if(_2a){
var _30=this;
window.setTimeout(createTimeoutFunction(_2d),_2a);
}
};
this.cancelRequest=function(id){
var _31=_25[id];
_25[id]=null;
var _32=_26[id];
_26[id]=null;
if(_31){
try{
if(_31){
var evt={"target":_32};
_31.call(this,false,null,evt);
}
var _33=this.getScriptObject(id);
if(_33){
document.body.removeChild(_33);
}
}
catch(e){
}
}
};
this.dispatch=function(id,_34){
if(!id){
return;
}
try{
var _35=_25[id];
if(!_35){
}
if(_35){
var evt={"target":_26[id]};
_35.call(this,true,_34,evt);
_25[id]=null;
_26[id]=null;
var _36=this.getScriptObject(id);
if(_36){
document.body.removeChild(_36);
}
}
}
catch(e){
}
};
}};





if(typeof (ibm)=="undefined"){
ibm={};
}
if(typeof (ibm.portal)=="undefined"){
ibm.portal={};
}
if(typeof (ibm.portal.xml)=="undefined"){
ibm.portal.xml={};
}
if(typeof (ibm.portal.xml)=="undefined"){
ibm.portal.xml={};
}
ibm.portal.util={};
ibm.portal.util.cloneObject=function(_1){
var _2={};
for(i in _1){
_2[i]=_1[i];
}
return _2;
};
ibm.portal.resource={};
ibm.portal.resource.str={};
ibm.portal.resource.getString=function(_3,_4){
s=_3[_4];
s=(s==null)?_4:s;
if(arguments.length>=2){
i=1;
do{
s=s.replace("%"+i,arguments[i]);
i=i+1;
}while(i<arguments.length);
}
return s;
};
if(typeof (ibm.portal.xml)=="undefined"){
ibm.portal.xml={};
}
ibm.portal.xml.ie={};
ibm.portal.xml.gecko={};
ibm.portal.xml.getXmlHttpRequest=function(){
var _5=null;
if(typeof ActiveXObject!="undefined"){
_5=new ActiveXObject("Microsoft.XMLHTTP");
}else{
_5=new XMLHttpRequest();
}
return _5;
};
ibm.portal.xml.loadXml=function(_6){
if(typeof ActiveXObject!="undefined"||window.ActiveXObject!==undefined){
return ibm.portal.xml.ie.loadXml(_6);
}else{
return ibm.portal.xml.gecko.loadXml(_6);
}
};
ibm.portal.xml.loadXmlString=function(_7){
if(typeof ActiveXObject!="undefined"||window.ActiveXObject!==undefined){
return ibm.portal.xml.ie.loadXmlString(_7);
}else{
return ibm.portal.xml.gecko.loadXmlString(_7);
}
};
ibm.portal.xml.loadXsl=function(_8){
if(typeof ActiveXObject!="undefined"||window.ActiveXObject!==undefined){
return ibm.portal.xml.ie.loadXsl(_8);
}else{
return ibm.portal.xml.gecko.loadXsl(_8);
}
};
ibm.portal.xml.transform=function(_9,_a,_b,_c,_d){
if(typeof ActiveXObject!="undefined"||window.ActiveXObject!==undefined){
return ibm.portal.xml.ie.transform(_9,_a,_b,_c,_d);
}else{
return ibm.portal.xml.gecko.transform(_9,_a,_b,_c,_d);
}
};
ibm.portal.xml.update=function(_e,_f,xsl,_10,_11){
if(typeof ActiveXObject!="undefined"||window.ActiveXObject!==undefined){
var _12=ibm.portal.xml.ie.transform(_f,xsl,_10,_11,true);
ibm.portal.debug.text("XSLT result: "+_12);
_e.innerHTML+=_12;
}else{
_12=ibm.portal.xml.gecko.transform(_f,xsl,_10,_11,false);
_e.appendChild(_12.documentElement);
}
};
ibm.portal.xml.ie.XSLT_PROG_IDS=["Msxml2.XSLTemplate.6.0","Msxml2.XSLTemplate.4.0","MSXML2.XSLTemplate.3.0","MSXML2.XSLTemplate"];
ibm.portal.xml.ie.DOM_PROG_IDS=["MSXML2.FreeThreadedDOMDocument.6.0","Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"];
ibm.portal.xml.ie.FTDOM_PROG_IDS=["Msxml2.FreeThreadedDOMDocument.6.0","Msxml2.FreeThreadedDOMDocument.4.0","MSXML2.FreeThreadedDOMDocument","MSXML.FreeThreadedDOMDocument","Microsoft.FreeThreadedXMLDOM"];
ibm.portal.xml.ie._getMSXMLImpl=function(_13){
while(_13.length>0){
try{
var _14=new ActiveXObject(_13[0]);
if(_14){
return _14;
}
}
catch(err){
}
_13.splice(0,1);
}
throw new Error("No MSXML implementation exists");
};
ibm.portal.xml.ie.loadXml=function(_15){
var _16=this._getMSXMLImpl(this.DOM_PROG_IDS);
_16.async=0;
_16.resolveExternals=0;
if(!_16.load(_15)){
throw new Error("Error loading xml file "+_15);
}
return _16;
};
ibm.portal.xml.ie.loadXmlString=function(_17){
var _18=this._getMSXMLImpl(this.DOM_PROG_IDS);
_18.async=0;
_18.resolveExternals=0;
if(_17){
if(!_18.loadXML(_17)){
throw new Error("Error loading xml string "+_17);
}
}
return _18;
};
ibm.portal.xml.ie.loadXsl=function(_19){
var _1a=this._getMSXMLImpl(this.FTDOM_PROG_IDS);
_1a.async=0;
_1a.resolveExternals=0;
if(!_1a.load(_19)){
throw new Error("Error loading xsl file "+_19);
}
return _1a;
};
ibm.portal.xml.ie.transform=function(_1b,xsl,_1c,_1d,_1e){
var _1f=_1b;
var _20=xsl;
try{
if(!_20.documentElement){
_20=this.loadXsl(xsl);
}
}
catch(e){
var _21=e.message;
throw new Error(""+_21,""+_21);
}
var _22=this._getMSXMLImpl(this.XSLT_PROG_IDS);
_22.stylesheet=_20;
var _23=_22.createProcessor();
_23.input=_1f;
if(_1d){
for(var p in _1d){
_23.addParameter(p,_1d[p]);
}
}
if(_1c){
_23.addParameter("mode",_1c);
}
if(_1e){
if(!_23.transform()){
throw new Error("Error transforming xml doc "+_1f);
}
return _23.output;
}else{
var _24=this._getMSXMLImpl(this.DOM_PROG_IDS);
_24.async=false;
_24.validateOnParse=false;
_1f.transformNodeToObject(_20,_24);
return _24;
}
};
ibm.portal.xml.gecko.loadXml=function(_25){
var _26=document.implementation.createDocument("","",null);
var xhr=new XMLHttpRequest();
xhr.open("GET",_25,false);
xhr.send(null);
if(xhr.status==200){
_26=xhr.responseXML;
}else{
throw new Error("Error loading "+_25+":"+xhr.status+":"+xhr.statusText);
}
return _26;
};
ibm.portal.xml.gecko.loadXmlString=function(_27){
var _28=new DOMParser();
try{
oXmlDoc=_28.parseFromString(_27,"text/xml");
}
catch(exc){
throw new Error("Error loading xml string "+_27);
}
return oXmlDoc;
};
ibm.portal.xml.gecko.loadXsl=function(_29){
var _2a=document.implementation.createDocument("","",null);
var xhr=new XMLHttpRequest();
xhr.open("GET",_29,false);
xhr.send(null);
if(xhr.status==200){
_2a=xhr.responseXML;
}
return _2a;
};
ibm.portal.xml.gecko.transform=function(_2b,xsl,_2c,_2d,_2e){
try{
var _2f=xsl;
if(!_2f.documentElement){
alert("xslDoc is not a Document, loading it...");
_2f=this.loadXsl(xsl);
}
var _30=new XSLTProcessor();
_30.importStylesheet(_2f);
if(_2d){
for(var p in _2d){
_30.setParameter(null,p,_2d[p]);
}
}
if(_2c){
_30.setParameter(null,"mode",_2c);
}
var _31=_30.transformToDocument(_2b);
if(!_2e){
return _31;
}
resultStr=_31.documentElement.textContent;
}
catch(exc){
throw new Error("Error transforming xml doc "+exc);
}
return resultStr;
};
ibm.portal.xml.setLayerContentByXml=function(_32,xml,xsl,_33,_34){
var _35=ibm.portal.xml.transform(xml,xsl,null,_33,_34);
if(_32.innerHTML){
_32.innerHTML=_35;
}else{
var obj=document.getElementById(_32);
obj.innerHTML=_35;
}
};
ibm.portal.io={};
ibm.portal.io.sAcceptLanguage="";
ibm.portal.io.getResponseHeader=function(_36,_37){
var _38;
try{
_38=_36.getResponseHeader(_37);
}
catch(exc){
_38=null;
}
return _38;
};
ibm.portal.io.checkForError=function(_39){
var _3a=null;
var _3b=ibm.portal.io.getResponseHeader(_39,"X-IBM-REST-Error");
if(_3b){
var _3a="",_3c=ibm.portal.io.getResponseHeader(_39,"X-IBM-REST-MsgArg1");
if(_3c){
_3a=ibm.portal.resource.getString(_3b,window.decodeURIComponent(_3c));
}else{
_3a=ibm.portal.resource.getString(_3b);
}
}
return _3a;
};
ibm.portal.io.asyncRequest=function(_3d,_3e,_3f,_40){
try{
ibm.portal.io.setAsync(_3d,_3e,_3f,_40,true);
}
catch(e){
ibm.portal.io.setAsync(_3d,_3e,_3f,_40,false);
}
};
ibm.portal.io.setAsync=function(_41,_42,_43,_44,_45){
var _46=ibm.portal.xml.getXmlHttpRequest();
_46.open(_41,_42,true);
if(!_45){
_46.setRequestHeader("Accept-language","*");
}
try{
_46.onreadystatechange=function(){
if(_46.readyState==4){
_44.startUpdate();
sError=ibm.portal.io.checkForError(_46);
if(sError){
_44.handleError(""+ibm.portal.resource.getString(sError));
}else{
var _47=_46.responseText;
_44.handleData(_47);
}
}
};
_46.send(_43);
}
catch(e){
throw new Error("","");
}
};
try{
}
catch(e){
console.error(e);
}



}catch(e){console.log("Module 'wp_liveobject_framework_core': ",e);}
try{/* (C) Copyright IBM Corp. 2007  All Rights Reserved.                */
/**
 * This is the JS file for the common semantic tagging service
 */


 





 

STSPG.ifConnUrlExists = "false";
STSPG.connUrl= "null";
STSPG.isconnServerNew = false;
STSPG.ptTimeout =  1500;
STSPG.preferredImIds =  ["X-imn","email","uid","fn"];

STSPG.c2a_click_for_actions = "Click for Actions";

STSPG.hover_label_menu =  "Click for options";
STSPG.a11y_hover=  "more information";
STSPG.a11y_photo=  "photo";
STSPG.a11y_close=  "close";
STSPG.ally_expandImage  =  "Click to hide information";
STSPG.ally_collapsedImage  =  "Click to display more information";
STSPG.ally_showMore  =  "Show More";
STSPG.ally_showLess  =  "Show Less";
STSPG.ally_buisnessCardLabel  =  "Business Card";
STSPG.ally_moreAction=  "More Actions";

STSPG.start_chat=  "Chat";
STSPG.add_to_contact=  "Add as Sametime Contact";
STSPG.send_email=  "Send Mail";
STSPG.view_person=  "Profile";
STSPG.hover_label_person=  "Click here for Person Card";
STSPG.work_location=  "person.adr.locality+', '+person.adr.region+' '+person.adr.countryname";
STSPG.specify_email_if_connection=  "When Portal is integrated with Connections, Connection Business Card appears only if email is specified";

STSPG.expandedItems  =  "ibm-primaryEmail,street,stateOrProvinceName,postalCode,countryName";
STSPG.collapsedItems  =  "ibm-jobTitle,telephoneNumber";
STSPG.showDetailsFlag  =  true;
STSPG.getPersonResolverUrl =  function(){ return "?uri=personrecord%3ATOBEREPLACED&amp;locale=en&amp;locale=es&amp;locale=ltr" };
STSPG.basePumaResolvedUrl =  SemTagSvcPortalGlobalDynamic.basePumaResolvedUrl;
STSPG.availAttribUrl =  SemTagSvcPortalGlobalDynamic.availAttribUrl;




STSP.availAttribStr =  "";
STSP.ifConnUrlExists =  STSPG.ifConnUrlExists;
STSP.connUrl =  STSPG.connUrl;
STSP.isconnServerNew = STSPG.isconnServerNew;
STSP.sametimeSTProxy = (typeof stproxy !== "undefined" );
STSP.sametimeSTLinks = ( (typeof stproxy === "undefined") && (typeof prepareSametimeLink !== "undefined") );
STSP.stNI = ( (typeof stproxy === "undefined") && (typeof prepareSametimeLink === "undefined") );


	
	var availAttrib={availAttribUrl:STSPG.availAttribUrl,req:"",uAR:false,isGecko:navigator.userAgent.match(/(opera|opr|firefox|msie|chrome|safari)\/?\s*([\d\.]+)/i)||[],retrieveAttribute:function(){
if(availAttrib.uAR){
return;
}
if(STSP.availAttribStr!=""){
return;
}
availAttrib.req=ibm.portal.xml.getXmlHttpRequest();
availAttrib.req.onreadystatechange=availAttrib.processStateChange;
try{
availAttrib.req.open("GET",availAttrib.availAttribUrl,true);
}
catch(e){
alert(e);
}
availAttrib.req.send(null);
availAttrib.uAR=true;
},getAttributesFromTags:function(_1,_2,_3){
var _4;
if(availAttrib.isGecko.length==0||availAttrib.isGecko.indexOf("MSIE")>0){
_4=_1.getElementsByTagName(_3+":"+_2);
return _4;
}else{
_4=_1.getElementsByTagNameNS("*",_2);
return _4;
}
},processStateChange:function(){
if(availAttrib.req.readyState==4){
if(availAttrib.req.status==200){
var _5=availAttrib.req.responseText;
if(_5.length>1){
var _6=ibm.portal.xml.loadXmlString(_5);
var _7=availAttrib.getAttributesFromTags(_6.documentElement,"title","atom");
var i;
for(i=1;i<_7.length;i++){
if((STSP.availAttribStr=="")){
if((_7[i].firstChild.nodeValue!=null)){
STSP.availAttribStr=_7[i].firstChild.nodeValue;
}
}else{
if((_7[i].firstChild.nodeValue!=null)){
STSP.availAttribStr=_7[i].firstChild.nodeValue+","+STSP.availAttribStr;
}
}
}
}
}else{
}
}
}};


	


var mytest=null;
var liveNameElementId=null;
var SemTagMenu={needCss:true,staticHover:false,id:"semtagmenu",hideDelay:navigator.userAgent.match(/(Android|BlackBerry|iPad|iPhone|iPod)/g)?5000:STSPG.ptTimeout,timeouts:[],iconName:"menu_drop_icon",showing:false,currentElem:null,currentHoverLabel:null,refCount:-1,a11yMode:false,svcHandlers:[],items:[],headers:[],footers:[],moreActionImgUrl:STSPG.contextUrl+"/ui/ShowActions.gif",verticalRulerUrl:STSPG.contextUrl+"/ui/Line_Tree.gif",hoverIdRE:new RegExp(STSP.hoverIdPrefix),iconNameRE:new RegExp("(^|\\s)menu_drop_icon(\\s|$)"),sftflag:false,init:function(){
},includeCSS:function(_1){
var _2=false;
if(typeof (_1._JAVLIN_STYLE_)=="undefined"){
_2=true;
_1._JAVLIN_STYLE_="loaded";
}
return _2;
},registerMenuEventHandlers:function(_3){
STSP.watchEvent(_3,"click",SemTagMenu.click,false);
STSP.watchEvent(_3,"keydown",SemTagMenu.catchEscape,false);
STSP.watchEvent(_3,"keyup",SemTagMenu.catchKeyup,false);
},unregisterMenuEventHandlers:function(_4){
STSP.clearEventWatch(_4,"click",SemTagMenu.click,false);
STSP.clearEventWatch(_4,"keydown",SemTagMenu.catchEscape,false);
STSP.clearEventWatch(_4,"keyup",SemTagMenu.catchKeyup,false);
},nls:{"hover_label":STSPG.hover_label_menu,"a11y_hover":STSPG.a11y_hover,"a11y_photo":STSPG.a11y_photo,"a11y_close":STSPG.a11y_close,"ally_expandImage":STSPG.ally_expandImage,"ally_collapsedImage":STSPG.ally_collapsedImage,"ally_showMore":STSPG.ally_showMore,"ally_showLess":STSPG.ally_showLess,"ally_buisnessCardLabel":STSPG.ally_buisnessCardLabel,"ally_moreAction":STSPG.ally_moreAction},hoverDimension:[14,14],hoverOffset:[15,-1],menuOffset:[15,-1],writeHover:function(_5,_6,_7){
_5.write("<div class='"+SemTagMenu.iconName+"' style='cursor:pointer;'>"+_7+"</div>");
},startMenu:function(_8,_9){
_8.write("<div class='personMenu' id='personMenuID'><ul role='region' aria-label='listitem' style='padding:0px;margin:0px;list-style-type:none;float:left;'title='Person card dialog' alt='Person card dialog'><li role='region' aria-label='listitem' tabindex=0 onkeydown=\"SemTagMenu.catchEscape();\" onkeyup=\"SemTagMenu.catchKeyup();\"></li></ul>");
},writeHeader:function(_a,_b,_c){
_a.write("<div class='semtag_header'>"+_b.markup+"</div>");
},startActionSection:function(_d,_e,_f,_10){
if(!_f){
_f="personMenuActions";
}
_d.write("<div id='lessItem' style='display:block'><table role='presentation' class='personMenuActions' id='menuItemID' dir='"+_e+"'><tr >");
if(0<SemTagMenu.items.length){
tempitem=SemTagMenu.items.shift();
_d.write("<td style='width:10'><a role='region' aria-label='actionItem' href='"+tempitem.href+"' style='color:#105ec1;padding-top:5px;padding-bottom:5px;font-size:1.0em;'><img style='display:none' src='' alt=''> "+tempitem.label+"</img></a></td>");
}
if(_10.length>=1){
_d.write("<td style='width:1'><img src= '"+SemTagMenu.verticalRulerUrl+"' alt=''/> </td> ");
_d.write("<td ><a role='region' aria-label='moreaction' href='#' style='color:#105ec1;padding-top:5px;padding-bottom:5px;font-size:1.0em;width:90;'onClick=\"SemTagMenu.shtest();return false;\" onKeydown=\" if (event.keyCode==13){SemTagMenu.shtest();return false; }\"><img style='display:none' src='' alt=''><label id='actionMore'>"+SemTagMenu.nls.ally_moreAction+"</img></label><span style='position: absolute; top: -9000px;'>Press Enter for more actions items and tab to move the focus on items</span><img style='border:none;' src='"+SemTagMenu.moreActionImgUrl+"' title='"+SemTagMenu.nls.ally_collapsedImage+" ' alt='"+SemTagMenu.nls.ally_collapsedImage+" ' /></a></td>");
}
_d.write("</tr></table></div>");
_d.write("<div id='moreItem' style='display:none'><table role='presentation' id='moreActionItems' class='"+_f+"' dir='"+_e+"'>");
while(0<SemTagMenu.items.length){
_10=SemTagMenu.items.shift();
if(_10.href&&(_10.href.indexOf("mailto:")>-1||_10.href.indexOf("http:")>-1)){
_d.write("<tr ><td><a href='"+_10.href+"'>"+_10.label+"</a></td></tr>");
}else{
_d.write("<tr ><td><a  onclick='"+_10.href+";return false;"+"' href='javascript:void(0);'>"+_10.label+"</a></td></tr>");
}
}
_d.write("</table></div>");
},writeFooter:function(out,_11,_12){
out.write("<div class='semtag_footer'>"+_11.markup+"</div>");
},endMenu:function(out,_13){
out.write("<a role='region' aria-label='exitlink' style='width:0px; height:0px;' onblur=\"SemTagMenu.exitCard();\" onclick='return false;' href='exit from person card' title='exit from person card'><img style='display:none' src='' alt='' /></a></div>");
},out:function(){
this.buffer="";
this.write=function(str){
this.buffer+=str;
};
},activateHover:function(_14){
var _15=STSP.getElementFromEvent(_14);
if(_15){
_15.src=STSPG.contextUrl+"/ui/menu_selected_hover.gif";
}
SemTagMenu.setCurrentElement(SemTagMenu.findLiveElementFromEventSource(_15));
},deactivateHover:function(_16){
var _17=STSP.getElementFromEvent(_16);
if(_17){
_17.src=STSPG.contextUrl+"/ui/menu_selected.gif";
}
SemTagMenu.setCurrentElement(null);
},showHover:function(_18,_19,_1a){
if(SemTagMenu.staticHover){
return;
}
var tag=SemTagMenu.getMenuTag();
if(SemTagMenu.showing&&tag.style.display!="none"){
return;
}
var _1b=STSP.getElementFromEvent(_18);
var _1c=0;
if(_1b&&_1b!=SemTagMenu.currentElem){
SemTagMenu.clearAllSvcHandlers(tag);
_1c=_1b.getAttribute(STSP.refcntAttr);
if(_1c){
SemTagMenu.setCurrentElement(_1b);
}else{
SemTagMenu.setCurrentElement(null);
return;
}
}
SemTagMenu.addSvcHandler(tag,_19);
if(_1a&&0<_1a.length){
SemTagMenu.currentHoverLabel=_1a;
}
SemTagMenu.refCount--;
if(0<SemTagMenu.refCount){
return;
}
SemTagMenu.setRefCount((0<_1c)?_1c:Number(_1b.getAttribute(STSP.refcntAttr)));
SemTagMenu.showing=false;
if(_18.type=="focus"){
SemTagMenu.a11yMode=true;
STSP.watchEvent(_1b,"keydown",SemTagMenu.a11y,false);
}
var out=new SemTagMenu.out();
var _1a=SemTagMenu.currentHoverLabel?SemTagMenu.currentHoverLabel:SemTagMenu.nls.hover_label;
if(!STSP.isMobile){
SemTagMenu.writeHover(out,STSP.bidi,_1a);
if(STSPG.isPersonCardHandlerRequired){
availAttrib.retrieveAttribute();
}
}
SemTagMenu.offScreen(tag);
tag.innerHTML=out.buffer;
var pos=STSP.findPosition(SemTagMenu.currentElem,false);
var _1d=(STSP.bidi=="rtl")?0-SemTagMenu.hoverOffset[0]:SemTagMenu.hoverOffset[0];
SemTagMenu.show(SemTagMenu.id,_18,pos[0]+_1d,pos[1]+SemTagMenu.hoverOffset[1],tag.offsetWidth,tag.offsetHeight);
},addSvcHandler:function(tag,_1e){
SemTagMenu.svcHandlers.push(_1e);
STSP.watchEvent(tag,"click",_1e,false);
},clearAllSvcHandlers:function(tag){
while(0<SemTagMenu.svcHandlers.length){
var _1f=SemTagMenu.svcHandlers.pop();
if(_1f){
STSP.clearEventWatch(tag,"click",_1f,false);
}
}
},setCurrentElement:function(_20){
SemTagMenu.currentElem=_20;
SemTagMenu.setRefCount(_20?Number(_20.getAttribute(STSP.refcntAttr)):0);
SemTagMenu.currentHoverLabel=null;
while(0<SemTagMenu.headers.length){
SemTagMenu.headers.pop();
}
while(0<SemTagMenu.items.length){
SemTagMenu.items.pop();
}
while(0<SemTagMenu.footers.length){
SemTagMenu.footers.pop();
}
},setRefCount:function(cnt){
SemTagMenu.refCount=cnt;
},setMenuData:function(_21,_22,_23,_24,_25){
var _26=_22?_22.length:0;
if(!SemTagMenu.staticHover&&SemTagMenu.refCount<0){
return;
}
var _27=SemTagMenu.findLiveElementFromEventSource(STSP.getElementFromEvent(_21));
if(!_27){
return;
}
if(SemTagMenu.staticHover&&(_27!=SemTagMenu.currentElem||SemTagMenu.showing)){
SemTagMenu.setCurrentElement(_27);
}
if(_22){
for(var i=0;i<_22.length;i++){
SemTagMenu.items.push(_22[i]);
}
}
if(_23){
SemTagMenu.currentMenuCss=_23;
}
if(_24){
SemTagMenu.headers.push(_24);
}
if(_25){
SemTagMenu.footers.push(_25);
}
SemTagMenu.refCount--;
if(0<SemTagMenu.refCount){
return;
}
SemTagMenu.stopEvent(_21);
for(var j=0;j<STSP.specialMenuProviders.length;j++){
var _28=STSP.specialMenuProviders[j];
var _29=_28.call(_21,SemTagMenu.currentElem);
if(_29&&0<_29.length){
for(var k=0;k<_29.length;k++){
SemTagMenu.items.push(_29[k]);
}
}
}
SemTagMenu.showMenu(_21);
},getCurrentElement:function(){
return SemTagMenu.currentElem;
},showMenu:function(_2a){
if(0==SemTagMenu.headers.length+SemTagMenu.items.length+SemTagMenu.footers.length){
SemTagMenu.hide();
return;
}
SemTagMenu.items.sort(STSP.sortByOrder);
if(1<SemTagMenu.headers.length){
SemTagMenu.headers.sort(STSP.sortByOrder);
}
if(1<SemTagMenu.footers.length){
SemTagMenu.footers.sort(STSP.sortByOrder);
}
var out=new SemTagMenu.out();
SemTagMenu.startMenu(out,STSP.bidi);
if(0<SemTagMenu.headers.length){
SemTagMenu.writeHeader(out,SemTagMenu.headers[0],STSP.bidi);
}
SemTagMenu.startActionSection(out,STSP.bidi,SemTagMenu.currentMenuCss,SemTagMenu.items);
if(0<SemTagMenu.footers.length){
SemTagMenu.writeFooter(out,SemTagMenu.footers[0],STSP.bidi);
}
SemTagMenu.endMenu(out,STSP.bidi);
var tag=SemTagMenu.getMenuTag();
SemTagMenu.clearAllSvcHandlers(tag);
SemTagMenu.offScreen(tag);
tag.innerHTML=out.buffer;
SemTagMenu.showing=true;
SemTagMenu.defaultCursor();
if(SemTagMenu.a11yMode){
if(SemTagUtil.isGecko){
var _2b=tag.getElementsByTagName("li");
if(0<_2b.length){
_2b[0].focus();
}
}else{
tag.focus();
}
}
SemTagMenu.registerMenuEventHandlers(document);
var pos=STSP.findPosition(SemTagMenu.currentElem,false);
var _2c=(STSP.bidi=="rtl")?0-SemTagMenu.menuOffset[0]:SemTagMenu.menuOffset[0];
SemTagMenu.show(SemTagMenu.id,_2a,pos[0]+_2c,pos[1]+SemTagMenu.menuOffset[1],tag.offsetWidth,tag.offsetHeight);
},getMenuTag:function(){
var tag=document.getElementById(SemTagMenu.id);
if(!tag){
tag=document.createElement("div");
tag.setAttribute("id",SemTagMenu.id);
tag.style.position="absolute";
tag.style.display="none";
tag.style.zIndex="99999";
STSP.watchEvent(tag,"mouseout",SemTagMenu.mouseout,false);
STSP.watchEvent(tag,"mouseover",SemTagMenu.mouseover,false);
document.body.insertBefore(tag,document.body.firstChild);
}
return tag;
},show:function(_2d,e,_2e,_2f,_30,_31){
var _32;
var _33;
SemTagMenu.clearTimeouts();
var _34=document.getElementById(_2d);
if(_30==null){
_30=0;
}
if(_31==null){
_31=0;
}
var top,_35;
if(_2e!=null&&_2f!=null){
var top=_2f;
var _35=_2e-(STSP.bidi=="rtl"?_30:0);
}else{
var top=STSP.getEventAbsoluteY(e);
var _35=STSP.getEventAbsoluteX(e);
}
var _36=SemTagMenu.currentElem;
mytest=_36.parentNode;
var _37,_38,d=document;
if(typeof window.innerWidth!="undefined"){
_37=window.innerWidth;
_38=window.innerHeight;
}else{
if(d.documentElement&&typeof d.documentElement.clientWidth!="undefined"&&d.documentElement.clientWidth!=0){
_37=d.documentElement.clientWidth;
_38=d.documentElement.clientHeight;
}else{
if(d.body&&typeof d.body.clientWidth!="undefined"){
_37=d.body.clientWidth;
_38=d.body.clientHeight;
}
}
}
var _39=(document.body.scrollLeft>document.documentElement.scrollLeft)?document.body.scrollLeft:document.documentElement.scrollLeft;
if((_35+_30)>(_37+_39)){
var _3a=(_35+_30)-_37-_39;
_35-=_3a;
}
var _3b=(document.body.scrollTop>document.documentElement.scrollTop)?document.body.scrollTop:document.documentElement.scrollTop;
if((top+_31)>(_38+_3b)){
var _3a=(top+_31)-_38-_3b;
top-=_3a;
}
if(STSP.bidi=="rtl"&&_35<0){
_35=0;
}
var od=SemTagUtil.getOwnerDocument(_36);
if(od.location!=document.location){
var f=SemTagUtil.getFrameElement(_36);
if(f){
var el=f.offsetParent;
var x=0,y=0;
while(el){
x+=el.offsetLeft;
y+=el.offsetTop;
el=el.offsetParent;
}
var lof=_36.offsetParent;
var xx=0,yy=0;
while(lof){
xx+=lof.offsetLeft;
yy+=lof.offsetTop;
lof=lof.offsetParent;
}
if(f.id=="wpsFLY_flyoutIFrame"){
top=y+yy+_36.offsetHeight;
_35=x+xx+_36.offsetWidth;
}else{
top+=f.offsetTop;
_35+=f.offsetLeft;
}
if(SemTagUtil.isGecko&&f.id=="wpsFLY_flyoutIFrame"){
_33=f.contentWindow.pageXOffset;
_32=f.contentWindow.pageYOffset;
}
if(!SemTagUtil.isGecko&&f.id=="wpsFLY_flyoutIFrame"){
_33=f.contentWindow.document.body.parentNode.scrollLeft;
_32=f.contentWindow.document.body.parentNode.scrollTop;
}
top-=_32;
_35-=_33;
}
}
_34.style.top=top+"px";
_34.style.left=_35+"px";
_34.style.display="block";
SemTagMenu.startHideTimer(_2d);
},hide:function(_3c,e){
SemTagMenu.unregisterMenuEventHandlers(document);
var tag=SemTagMenu.getMenuTag();
if(!tag){
return false;
}
if(tag.style.display!="block"){
return false;
}
tag.style.display="none";
SemTagMenu.showing=false;
try{
var _3d=SemTagMenu.getNextEle(mytest);
}
catch(e){
}
SemTagMenu.setCurrentElement(null);
SemTagMenu.currentHoverLabel=null;
SemTagMenu.clearAllSvcHandlers(tag);
SemTagMenu.a11yMode=false;
SemTagMenu.defaultCursor();
return true;
},getNextEle:function(ele){
var par=ele.parentNode;
while(true){
if(par==null||par=="undefined"){
return false;
}else{
if(par.nodeName=="BODY"){
return par;
}else{
var _3e=par.nextSibling;
if(_3e!=null){
return _3e;
}
par=par.parentNode;
}
}
}
return false;
},offScreen:function(_3f){
_3f.style.top="-1000px";
_3f.style.left="-1000px";
_3f.style.display="block";
},findLiveElementFromEventSource:function(_40){
var _41;
if(SemTagMenu.staticHover){
var id=_40.id;
if(!id.match(SemTagMenu.hoverIdRE)){
var _42=_40.getElementsByTagName("img");
for(var i=0;i<_42.length;i++){
if(_42[i].id&&_42[i].id.match(SemTagMenu.hoverIdRE)){
id=_42[i].id;
break;
}
}
}
if(id&&0<id.length){
var idx=id.substr(STSP.hoverIdPrefix.length);
_41=document.getElementById(STSP.liveElemPrefix+idx);
return _41;
}else{
_41=_40;
return _41;
}
}else{
var _43=SemTagMenu.getCurrentElement();
_41=_43?_43:_40;
return _41;
}
},findHoverFromLiveElement:function(_44){
var _45;
var idx=_44.getAttribute(STSP.hoverIdPrefix+"idx");
_45=document.getElementById(STSP.hoverIdPrefix+idx);
return _45;
},inMenu:function(_46,_47,_48,_49){
if(!_46){
return false;
}
if(!SemTagMenu.showing){
return false;
}
if(!_48){
_48=0;
}
if(!_49){
_49=0;
}
var _4a=STSP.getEventAbsoluteX(_47);
var _4b=STSP.getEventAbsoluteY(_47);
var _4c=_46.style.left.replace(/px$/,"");
var _4d=_46.style.top.replace(/px$/,"");
var _4e=parseInt(_4c)+parseInt(_46.clientWidth);
var _4f=parseInt(_4d)+parseInt(_46.clientHeight);
if((_4a-1<=(_4c-_48))||(_4b-1<=(_4d-_49))||(_4a>=(_4e+_48))||(_4b>=(_4f+_49))){
return false;
}else{
return true;
}
},mouseout:function(_50){
if(_50.type=="blur"){
var _51=STSP.getElementFromEvent(_50);
if(SemTagMenu.currentElem){
STSP.clearEventWatch(SemTagMenu.currentElem,"keydown",SemTagMenu.a11y,false);
}
if(!SemTagMenu.showing){
if(!_51.className.match(SemTagMenu.iconNameRE)){
SemTagMenu.hide();
}
}
}else{
var _52=SemTagMenu.id;
menuElem=document.getElementById(_52);
SemTagMenu.startHideTimer(_52);
}
},mouseover:function(_53){
SemTagMenu.clearTimeouts();
},click:function(_54){
if(!_54){
return;
}
var _55=STSP.getElementFromEvent(_54);
var _56=STSP.getParentByClassName("semtag_header",_55);
var _57=STSP.getParentByClassName("personMenuActions",_55);
if(!_56&&!_57){
SemTagMenu.hide(SemTagMenu.id);
}
},catchKeyup:function(_58){
var _59;
var _5a=false;
if(_58){
if(_58.which){
_59=_58.which;
}else{
_59=_58.keyCode;
}
}
var _5b=document.activeElement.className;
if(_5b.indexOf("lotusui")>-1){
_5a=true;
}
if(_59==16&&_5a&&SemTagMenu.sftflag){
SemTagMenu.exitCard();
}
SemTagMenu.sftflag=false;
},catchEscape:function(_5c){
var key;
if(_5c){
if(_5c.which){
key=_5c.which;
}else{
key=_5c.keyCode;
}
}
if(key==16){
SemTagMenu.sftflag=true;
}
if(key==27){
var _5d=null;
if(SemTagMenu.showing){
var _5e=SemTagMenu.getCurrentElement();
if(_5e){
_5d=STSP.getHoverElement(_5e);
}
}
SemTagMenu.hide();
if(_5d){
_5d.focus();
}
}
},a11y:function(_5f){
if(_5f){
var key;
if(_5f.which){
key=_5f.which;
}else{
key=_5f.keyCode;
}
if(key==13){
var _60=STSP.getElementFromEvent(_5f);
if(_60){
SemTagMenu.a11yMode=true;
var _61=(SemTagMenu.staticHover?_60:SemTagMenu.getMenuTag());
if(SemTagUtil.isGecko){
var evt=document.createEvent("MouseEvents");
evt.initEvent("click",true,true);
SemTagUtil.fireEvent(_61,evt);
}else{
_61.click();
}
SemTagMenu.stopEvent(_5f);
}
}
}else{
var _60=SemTagMenu.currentElem;
if(_60){
SemTagMenu.a11yMode=true;
var _61=(SemTagMenu.staticHover?_60:SemTagMenu.getMenuTag());
if(SemTagUtil.isGecko){
var _62=document.createEvent("MouseEvents");
_62.initEvent("click",true,true);
SemTagUtil.fireEvent(_61,_62);
}else{
_61.click();
}
SemTagMenu.stopEvent(evt);
}
}
return true;
},stopEvent:function(_63){
if(!_63){
return;
}
if(SemTagUtil.isGecko){
try{
_63.preventDefault();
_63.stopPropagation();
}
catch(e){
}
}else{
try{
_63.returnValue=false;
_63.cancelBubble=true;
}
catch(e){
}
}
},startHideTimer:function(_64){
if(0<SemTagMenu.hideDelay&&!SemTagMenu.a11yMode){
SemTagMenu.timeouts.push(window.setTimeout("SemTagMenu.endHideTimer(\""+_64+"\")",SemTagMenu.hideDelay));
}
},endHideTimer:function(_65){
SemTagMenu.hide(_65);
},clearTimeouts:function(){
var tos=SemTagMenu.timeouts;
for(i=0;i<tos.length;i++){
window.clearTimeout(tos[i]);
}
},defaultCursor:function(){
document.body.style.cursor="default";
},waitCursor:function(){
document.body.style.cursor="progress";
},shtest:function(){
var _66=document.getElementById("lessItem");
var _67=document.getElementById("moreItem");
var tds=_66.getElementsByTagName("td");
if(tds&&tds.length>1){
for(var _68=(tds.length-2);_68<tds.length;_68++){
var _69=tds[_68];
_69.style.display="none";
}
}
_67.style.display="block";
},exitCard:function(){
var _6a=null;
if(SemTagMenu.showing){
var _6b=SemTagMenu.getCurrentElement();
if(_6b){
_6a=STSP.getHoverElement(_6b);
}
}
SemTagMenu.hide();
if(_6a){
_6a.focus();
}
}};
if(STSPG.isDynamicLoading&&STSPG.isPersonCardHandlerRequired){
window.setTimeout(SemTagMenu.init,STSP.DELAY);
}



	

var SemTagPerson={INLINE:"X-person-display-inline",activeElems:new Array(),requestor:new SemTagUtil.crossDomainRequest(),basePumaResolvedUrl:STSPG.basePumaResolvedUrl,collapsedImgUrl:STSPG.contextUrl+"/ui/imgcollapsed.gif",expandedImgUrl:STSPG.contextUrl+"/ui/imgexpanded.gif",moreActionImgUrl:STSPG.contextUrl+"/ui/ShowActions.gif",verticalRulerUrl:STSPG.contextUrl+"/ui/Line_Tree.gif",profileImageUrl:STSPG.contextUrl+"/ui/Properties.gif",noPhotoPersonUrl:STSPG.contextUrl+"/ui/NoPhotoPerson.gif",pumaUrl:"um/secure/users/profiles",init:function(){
if(STSP.ifConnUrlExists=="true"&&STSP.isconnServerNew==false){
if(eval("document.body != null")==false){
SemTagPerson.processUntilAvailable(SemTagPerson.init,"(document.body != null)",null,null,null,null);
return;
}else{
SemTagPerson.loadScript();
}
}
if(STSP.ifConnUrlExists=="true"&&STSP.isconnServerNew==true){
if(eval("document.body != null")==false){
SemTagPerson.processUntilAvailable(SemTagPerson.init,"(document.body != null)",null,null,null,null);
return;
}else{
STSP.loadConnScript();
}
}
STSP.setCallback("hcard",SemTagPerson.hcardsAdded);
STSP.setCallback("mailto",SemTagPerson.mailtosAdded);
SemTagPerson.processHcards(STSP.getNodes("hcard"));
SemTagPerson.processMailtos(STSP.getNodes("mailto"));
STSP.watchEvent(window,"load",SemTagPerson.clearInternalData,false);
},loadScript:function(){
var _1=document.createElement("script");
var _2=STSP.connUrl;
_2+=(_2.indexOf("?")==-1)?"?":"&";
_2+="lang="+STSP.lang;
_1.src=_2;
document.body.insertBefore(_1,document.body.firstChild);
},clearInternalData:function(){
var _3=SemTagPerson.activeElems;
while(_3!=="undefined"&&_3!=null&&0<_3.length){
_3.pop();
}
},nls:{"start_chat":STSPG.start_chat,"add_to_contact":STSPG.add_to_contact,"send_email":STSPG.send_email,"view_person":STSPG.view_person,"hover_label":STSPG.hover_label_person,"work_location":STSPG.work_location,"specify_email_if_connection":STSPG.specify_email_if_connection},getPersonResolverUrl:STSPG.getPersonResolverUrl,getMarkup:function(_4,_5,_6,_7,_8,_9){
var _a="";
var _b=(typeof (_4.email)!="undefined"&&_4.email.internet)?_4.email.internet:null;
if(!(STSP.ifConnUrlExists=="true"&&_b!=null)){
if(_4._profileinplace){
var _c=_4.uid.replace(/\\/g,"&perc5C");
_a="javascript:SemTagPerson.executeJSTargetInFrame(\"javascript:doShowProfile(\\\""+_c+"\\\")\")";
}else{
_a="javascript:SemTagPerson.openPersonRecord()";
}
_6.push(STSP.getMenuItemJson(SemTagPerson.nls.view_person,_a,-100));
}
if(_b){
_6.push(STSP.getMenuItemJson(SemTagPerson.nls.send_email,"mailto:"+_b,-90));
}
var _d=(typeof (SemTagAwrns)!="undefined"&&typeof (_4.X.ststatus)!="undefined");
if(_d){
}
if(STSP.sametimeSTProxy){
var _e="javascript:SemTagAwrns.openAddToContacts(\""+_4.X.imn+"\")";
_6.push(STSP.getMenuItemJson(stproxy.uiControl.i18nStrings.contextMenuAddToContacts,_e,-40));
}
if(typeof (SemTagAwrns)!="undefined"&&typeof (_4.X.ststatus)!="undefined"&&(_4.X.ststatus=="online"||_4.X.ststatus=="away")){
var _f="javascript:SemTagAwrns.openChat(\""+_4.X.imn+"\")";
_6.push(STSP.getMenuItemJson(SemTagPerson.nls.start_chat,_f,-80));
if(STSP.sametimeSTProxy){
var _10="javascript:SemTagAwrns.openCall(\""+_4.X.imn+"\")";
var _11="javascript:SemTagAwrns.openInstantMeeting(\""+_4.X.imn+"\")";
var _12="javascript:SemTagAwrns.openSendAnnouncement(\""+_4.X.imn+"\")";
_6.push(STSP.getMenuItemJson(stproxy.uiControl.i18nStrings.contextMenuCall,_10,-70));
_6.push(STSP.getMenuItemJson(stproxy.uiControl.i18nStrings.contextMenuInstantMeeting,_11,-60));
_6.push(STSP.getMenuItemJson(stproxy.uiControl.i18nStrings.contextMenuSendAnnouncement,_12,-50));
}
if(STSP.sametimeSTLinks){
_6.push(STSP.getMenuItemJson(SemTagPerson.nls.add_to_contact,"javascript:SemTagPerson.addToSametimeList()",-11));
}
}
var _13=STSP.getActions("person");
if(_13){
for(i=0;i<_13.length;i++){
var _14=_13[i].showif;
var _15=true;
if(_14){
try{
var _16=eval(_14);
_15=_16.call(null,SemTagPerson.currentPerson);
}
catch(e){
try{
var _16=eval(_14);
_15=_16.call(null,SemTagPerson.currentPerson);
}
catch(e2){
_15=false;
}
}
}
if(_15){
var _17=_13[i].label;
if(_17.match(/nls\.[a-z]/)){
_17=eval(_17);
}
if(!(_17.indexOf("Send Instant")>-1)){
var _18=_13[i].url.replace(/@@@ARGS@@@/g,"SemTagPerson.currentPerson");
_6.push(STSP.getMenuItemJson(_17,_18,_13[i].order));
}
}
}
}
if(!_4._inline){
if(STSP.ifConnUrlExists=="true"&&(STSP.isconnServerNew==false)&&(_b!=null)){
_8.write("<div class='popupPersonCard' id='businessCard'>");
_8.write("</div>");
}else{
var _19="";
if(typeof (SemTagAwrns)!="undefined"&&typeof (_4.X.ststatus)!="undefined"&&(_4.X.ststatus=="online"||_4.X.ststatus=="away")){
_19=_4.X.ststatus;
}
var _1a=null;
if(_4.photo!=null&&_4.photo!=="undefined"&&_4.photo.length>0){
_1a=_4.photo;
}else{
_1a=SemTagPerson.noPhotoPersonUrl;
}
_8.write("<div class ='businessCardMenu'>");
_8.write("<span class='photoCard' id ='imageSpan'><div id='imageDiv' style='height:90px; width:90px' >");
_8.write("<img id='personImg' tabindex=0 style='border:1px solid rgb(192,192,192);float:right;padding:10px ; height:50px; width:50px; background-color:white;margin-right:6px' src='"+_1a+"' onMouseover='SemTagPerson.imgHoverIn();return false;' alt='"+_4.fn+" "+SemTagMenu.nls.a11y_photo+"' title='"+_4.fn+" "+SemTagMenu.nls.a11y_photo+"' role='region' aria-label='UserImage' / >");
_8.write(" <img id='personImg1' tabindex=0 style='display:none;border:1px solid rgb(192,192,192);float:right;padding:10px ; height:82px; width:82px; background-color:white;margin-right:6px' src='"+_1a+"' onMouseout='SemTagPerson.imgHoverOut();return false;' alt='"+_4.fn+" "+SemTagMenu.nls.a11y_photo+"' title='"+_4.fn+" "+SemTagMenu.nls.a11y_photo+"' role='region' aria-label='UserImage'/></div></span>");
_8.write("<div class='businessCard'><ul role='region' aria-label='listitem'dir='"+_5+"'>");
_8.write("<li class='cardName' onkeydown=\"SemTagMenu.catchEscape();\" onkeyup=\"SemTagMenu.catchKeyup();\" role='region' aria-label='listitem'><a href='#' style='text-Decoration:none;color:black'>"+_4.fn+"</a></li>");
if(typeof (SemTagAwrns)!="undefined"&&typeof (_4.X.ststatus)!="undefined"&&(_4.X.ststatus=="online"||_4.X.ststatus=="away")){
_8.write("<span id='statusIcon' style='vertical-align:text-top'><a href='#' style='text-Decoration:none;color:black'>"+SemTagAwrns.st+_19+"</a></span>");
}
if(STSPG.collapsedItems!=null){
_8.write(SemTagPerson.getItemsAsHtml(STSPG.collapsedItems,"collapsed"));
}
_8.write("</ul></div>");
if(STSPG.showDetailsFlag){
_8.write("<div class='showMoreDiv'>");
_8.write("<span id='expCollapSpan' tabIndex=0 alt='"+SemTagMenu.nls.ally_collapsedImage+"'title='"+SemTagMenu.nls.ally_collapsedImage+"'onClick='SemTagPerson.imgClicked();' onKeydown='SemTagPerson.imgClicked();'><img id='expCollapImg'src='"+SemTagPerson.collapsedImgUrl+"' role='region' aria-label='showMore'/> <label id='toggleLabel' class='showMoreLabel'>"+SemTagMenu.nls.ally_showMore+"</label></font></span>");
_8.write("</div>");
}
_8.write("<div class='businessCardExtended' id='expandedSection' style='display:none'><ul role='region' aria-label='listItem' style='padding-top:5px;align:left;' dir='"+_5+"'>");
if(STSPG.expandedItems!=null){
_8.write(SemTagPerson.getItemsAsHtml(STSPG.expandedItems,"expanded"));
}
_8.write("<li></li></ul></div>");
_8.write("</div>");
}
}
},getItemsAsHtml:function(_1b,_1c){
var _1d=new String("");
if(_1b!=null){
var _1e=_1b.split(",");
var i=0;
while(i<_1e.length){
var _1f=_1e[i].replace(/^\s+|\s+$/g,"");
var _20=new String("");
if(_1f.match("businessCategory")){
_20=".category";
}else{
if(_1f.match("carLicense")){
_20=".X.carlicense";
}else{
if(_1f.match("cn")&&_1f.length==2){
_20=".fn";
}else{
if(_1f.match("countryName")){
_20=".adr.countryname";
}else{
if(_1f.match("departmentNumber")){
_20=".X.departmentnumber";
}else{
if(_1f.match("description")){
_20=".note";
}else{
if(_1f.match("displayName")){
_20=".fn";
}else{
if(_1f.match("employeeNumber")){
_20=".X.employeenumber";
}else{
if(_1f.match("employeeType")){
_20=".X.employeetype";
}else{
if(_1f.match("facsimileTelephoneNumber")){
_20=".tel.fax";
}else{
if(_1f.match("givenName")){
_20=".n.givenname";
}else{
if(_1f.match("homePostalAddress")){
_20=".X.homeaddress";
}else{
if(_1f.match("ibm-gender")){
_20=".X.gender";
}else{
if(_1f.match("ibm-generationQualifier")){
_20=".n.honorificsuffix";
}else{
if(_1f.match("ibm-hobby")){
_20=".X.hobby";
}else{
if(_1f.match("ibm-jobTitle")){
_20=".title";
}else{
if(_1f.match("ibm-middleName")){
_20=".n.additionalname";
}else{
if(_1f.match("ibm-otherEmail")){
_20=".email.X_notes";
}else{
if(_1f.match("ibm-personalTitle")){
_20=".n.honorificprefix";
}else{
if(_1f.match("ibm-primaryEmail")){
_20=".email.internet";
}else{
if(_1f.match("mail")&&_1f.length==4){
_20=".email.internet";
}else{
if(_1f.match("ibm-regionalLocale")){
_20=".X.locale";
}else{
if(_1f.match("ibm-timeZone")){
_20=".tz";
}else{
if(_1f.match("initials")){
_20=".X.initials";
}else{
if(_1f.match("localityName")){
_20=".adr.locality";
}else{
if(_1f.match("manager")){
_20=".X.manager";
}else{
if(_1f.match("mobile")){
_20=".tel.cell";
}else{
if(_1f.match("o")&&_1f.length==1){
_20=".org.name";
}else{
if(_1f.match("ou")&&_1f.length==2){
_20=".org.unit";
}else{
if(_1f.match("pager")){
_20=".tel.pager";
}else{
if(_1f.match("postalAddress")){
_20=".X.fulladdress";
}else{
if(_1f.match("postalCode")){
_20=".adr.postalcode";
}else{
if(_1f.match("preferredLanguage")){
_20=".X.language";
}else{
if(_1f.match("roomNumber")){
_20=".adr.extendedaddress";
}else{
if(_1f.match("secretary")){
_20=".X.secretary";
}else{
if(_1f.match("seeAlso")){
_20=".url";
}else{
if(_1f.match("sn")&&_1f.length==2){
_20=".n.familyname";
}else{
if(_1f.match("stateOrProvinceName")){
_20=".adr.region";
}else{
if(_1f.match("street")){
_20=".adr.streetaddress";
}else{
if(_1f.match("telephoneNumber")){
_20=".tel.voice";
}else{
if(_1f.match("uid")&&_1f.length==3){
_20=".uid";
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
if(0<_20.length){
var _21=new String("");
var pos=_20.indexOf(".",1);
while(pos!=-1){
if(0<_21.length){
_21+=" && ";
}
_21+="SemTagPerson.currentPerson"+_20.substring(0,pos);
pos=_20.indexOf(".",pos+1);
}
if(0<_21.length){
_21+=" && ";
}
_21+="SemTagPerson.currentPerson"+_20;
var _22=0;
if(_1c.match("expanded")){
_22=0;
}
if(_1c.match("collapsed")){
_22=1;
}
var _23=_21.toString();
var _24=eval(_21.toString());
var _25="<li +tabindex="+_22+" style='padding-bottom:3px'> "+eval(_21.toString())+"</li>";
if(_1f.indexOf("mail")!=-1){
_25="<li><a href='mailto: "+eval(_21.toString())+"'> "+eval(_21.toString())+"</a></li>";
}
if(eval(_21.toString())){
_1d+=_25;
}
}
i++;
}
}
return _1d;
},imgClicked:function(){
var _26=document.getElementById("expCollapImg");
var _27=document.getElementById("expCollapSpan");
var _28=document.getElementById("toggleLabel");
var _29=document.getElementById("expandedSection");
var _2a=navigator.appName;
if(_2a=="Netscape"){
_29.style.width="240";
}else{
_29.style.width="378";
}
if(_26.src.indexOf(SemTagPerson.expandedImgUrl)>1){
_26.src=SemTagPerson.collapsedImgUrl;
_27.title=SemTagMenu.nls.ally_collapsedImage;
_28.innerHTML=SemTagMenu.nls.ally_showMore;
}else{
_26.src=SemTagPerson.expandedImgUrl;
_27.title=SemTagMenu.nls.ally_expandImage;
_28.innerHTML=SemTagMenu.nls.ally_showLess;
}
var _2b=document.getElementById("expandedSection");
_2b.style.display=(_2b.style.display!="none"?"none":"");
},imgHoverIn:function(){
var _2c=document.getElementById("personImg");
var _2d=document.getElementById("personImg1");
_2c.style.display="none";
_2d.style.display="";
},imgHoverOut:function(){
var _2e=document.getElementById("personImg");
var _2f=document.getElementById("personImg1");
_2e.style.display="";
_2f.style.display="none";
},getInlineMarkup:function(_30,_31,_32){
var _33=_30.email.internet;
_32.write("<div class='personMenu'>");
_32.write("<div class='photoCard'><img src='"+_30.photo+"' alt=''/></div>");
_32.write("<div class='businessCard' dir='"+_31+"'>");
var _34=(_30._headeronly?"class='vcard X-person-inside-inline'":"");
_32.write("<ul "+_34+" dir='"+_31+"'>");
_32.write("<li class='cardName'><span class='fn'>"+_30.fn+"</span></li>");
_32.write("<li class='email'><span class'type' style='display:none;'>internet</span><span class='value'>"+_33+"</span></li>");
if(_30.title){
_32.write("<li>"+_30.title+"</li>");
}
if(_30.tel&&_30.tel.voice){
_32.write("<li>"+_30.tel.voice+"</li>");
}
_32.write("</ul>");
_32.write("</div>");
if(_30._headeronly){
_32.write("<div style='clear:both;'>");
}else{
_32.write("<div class='personMenuActions' dir='"+_31+"' style='clear:both;'>");
_32.write("<ul>");
_32.write("<li><a href='NEEDSWORK"+"'>"+SemTagPerson.nls.view_person+"</a></li>");
_32.write("<li><a href='mailto:"+_33+"'>"+SemTagPerson.nls.send_email+"</a></li>");
_32.write("<li><a href='NEEDSWORK"+"'>"+SemTagPerson.nls.add_to_contact+"</a></li>");
_32.write("</ul>");
}
_32.write("</div>");
_32.write("</div>");
},openPersonRecord:function(id){
var _35;
var _36=null;
if(id!=="undefined"&&id!=null){
_36=id;
}else{
_35=SemTagPerson.currentPerson;
if(_35&&_35.uid&&_35.uid.length>0){
_36=_35.uid;
}else{
if((typeof (_35.email)!="undefined"&&typeof (_35.email.internet)!="undefined"&&0<_35.email.internet.length)){
_36=_35.email;
}else{
if(_35&&_35.userObjectID&&_35.userObjectID.length>0){
_36="OBJID="+_35.userObjectID;
}
}
}
}
var _37=encodeURIComponent(_36);
var _38=encodeURIComponent(_37);
var _39=SemTagPerson.getPersonResolverUrl();
var _3a=SemTagPerson.getPersonResolverUrl().replace("TOBEREPLACED",_38);
window.open(SemTagPerson.getPersonResolverUrl().replace("TOBEREPLACED",_38),null,"height=640,width=512,resizable=yes,scrollbars=yes,status=yes,toolbar=no,menubar=no,location=no");
},openCardORPersonRecord:function(id){
if(STSP.isMobile){
availAttrib.retrieveAttribute();
SemTagPerson.showMenu();
}else{
var _3b=SemTagMenu.currentElem;
var _3c=SemTagUtil.getHcardAttributeValue("X-person-profile-inplace",_3b);
if(_3c){
javascript:
doShowProfile(id);
}else{
SemTagPerson.openPersonRecord(id);
}
}
},addToSametimeList:function(){
var _3d=SemTagPerson.currentPerson.email.internet;
var fn_=encodeURIComponent(SemTagPerson.currentPerson.fn);
var fn=encodeURIComponent(fn_);
window.open(SemTagPerson.getPersonResolverUrl().replace("TOBEREPLACED",_3d+"/"+fn),null,"height=640,width=512,resizable=yes,scrollbars=yes,status=yes,toolbar=no,menubar=no,location=no");
},out:function(){
this.buffer="";
this.write=function(str){
this.buffer+=str;
};
},processHcards:function(_3e){
var _3f=_3e?_3e.length:0;
if(!_3e||_3f==0){
return;
}
for(var i=0;i<_3e.length;i++){
var _40=_3e[i];
var _41=SemTagPerson.getNameElement(_40);
if(!_41){
continue;
}
var _42=_41.getAttribute(STSP.liveElemPrefix+"id");
if(_42&&STSP.ifConnUrlExists=="false"){
if(SemTagPerson.activeElems[_42]){
continue;
}else{
continue;
}
}
var _43=STSP.getElementsByClassName("email",_40);
_43=_43||null;
if((_43==null||_43.length==0)&&STSP.ifConnUrlExists=="true"){
}
if(STSP.ifConnUrlExists=="true"&&STSP.isconnServerNew){
var _44=_45?_45.internet:"Not defined";
try{
if(eval("window.lconn != null")==false||(lconn.profiles==null||lconn.profiles=="undefined")){
SemTagPerson.processUntilAvailable(SemTagPerson.processHcards,"window.lconn != null && !(lconn.profiles == null || lconn.profiles == 'undefined')",null,null,null,_3e);
}else{
lconn.profiles.bizCard.bizCard.processTag(_41);
}
}
catch(e){
}
}
var _46=STSP.getElementsByClassName("userObjectId",_40);
var _45=SemTagUtil.getHcardAttributeValue("email",_40);
if(!_46){
if(!_45.internet){
var uid=SemTagUtil.getHcardAttributeValue("uid",_40);
if(!uid){
continue;
}
}
}
if(SemTagPerson.isInline(_40)){
var _47={"target":_41};
SemTagPerson.requestPersonInfo(_47);
}else{
var _48=STSP.getTextValue(_41);
var _49=_48.indexOf("click");
var _4a=_48.substring(0,_49)+SemTagPerson.nls.hover_label+" "+SemTagMenu.nls.a11y_hover;
if(STSP.ifConnUrlExists=="false"||(STSP.ifConnUrlExists=="true"&&STSP.isconnServerNew==false)){
STSP.addHover(_41,SemTagPerson.showHover,SemTagPerson.showMenu,_4a);
}else{
var _4b=_41.getAttribute(STSP.refcntAttr);
if(_4b){
_41.setAttribute(STSP.refcntAttr,parseInt(Number(_4b)+1));
}else{
_41.setAttribute(STSP.refcntAttr,"1");
STSP.hoverIdx++;
_41.setAttribute(STSP.liveElemPrefix+"id",STSP.hoverIdx);
}
}
_42=_41.getAttribute(STSP.liveElemPrefix+"id");
if(_42){
SemTagPerson.activeElems[_42]=true;
}
}
}
},processUntilAvailable:function(_4c,_4d,_4e,_4f,_50,_51){
if(typeof (_4c)!="function"){
return;
}
var _52=500;
var _53=20;
var _54=true;
if(typeof (_4f)=="number"){
_52=_4f;
}
if(typeof (_50)=="number"){
_53=_50;
}
if(typeof (_4e)=="boolean"){
_54=_4e;
}
var _55="";
var _56=0;
console.log("eval(test) is :"+eval(_4d));
var _57=Array.prototype.slice.call(arguments);
var _58=_57.shift();
var _59=_57.shift();
var _5a=_57.shift();
var _5b=_57.shift();
var _5c=_57.shift();
if(eval(_4d)){
if(_51!=null){
_4c.apply(null,Array.prototype.slice.call(_57));
}else{
_4c();
}
return;
}
_55=window.setInterval(function(){
_56++;
if(eval(_4d)){
window.clearInterval(_55);
if(_51!=null){
_4c.apply(null,Array.prototype.slice.call(_57));
}else{
_4c();
}
}else{
if(_56>=_53){
window.clearInterval(_55);
if(_54){
throw new Error("processUntilAvailable: test was never met: "+_4d);
}
}
}
},_52);
},isInline:function(_5d){
var _5e=SemTagUtil.getHcardAttributeValue(SemTagPerson.INLINE,_5d);
return _5e;
},processMailtos:function(_5f){
if(!_5f||_5f.length==0){
return;
}
while(_5f.length>0){
var _60=_5f.pop();
STSP.watchEvent(_60,"mouseover",SemTagPerson.tagMouseover,false);
}
},hcardsAdded:function(_61){
var _62=STSP.getNodes("hcard");
var _63=_62?_62.length:0;
if(_61&&_61.length>0){
SemTagPerson.processHcards(_61);
}else{
SemTagPerson.processHcards(STSP.getNodes("hcard"));
}
},hcardsAdded:function(){
var _64=STSP.getNodes("hcard");
var _65=_64?_64.length:0;
SemTagPerson.processHcards(STSP.getNodes("hcard"));
},mailtosAdded:function(){
SemTagPerson.processMailtos(STSP.getNodes("mailto"));
},showHover:function(_66){
var _67=SemTagUtil.getHcardAttributeValue("X-person-inside-inline",STSP.getLiveElementFromEvent(_66));
var _68=_67?null:SemTagPerson.nls.hover_label;
STSP.showHover(_66,SemTagPerson.showMenu,_68);
return false;
},showMenu:function(_69){
SemTagMenu.waitCursor();
SemTagMenu.stopEvent(_69);
SemTagPerson.requestPersonInfo(_69);
return false;
},renderCard:function(_6a){
var _6b=new BusinessCard.out();
BusinessCard.getMenuData(_6a,null,null,null,_6b);
var _6c=document.getElementById("businessCard");
_6c.innerHTML=_6b.buffer;
},requestPersonInfo:function(_6d){
SemTagPerson.callUserProfileServlet(SemTagPerson,_6d);
},dispatch:function(_6e){
var _6f=(_6e.email&&_6e.email.internet)?_6e.email.internet:null;
if(_6f){
SemTagPerson.requestor.dispatch(_6f.toLowerCase(),_6e);
}
},requestReturn:function(_70,_71,_72){
var _73=_70?"success":"fail";
var _74=_70?_71:SemTagPerson.emptyPerson();
if(_74){
var _75=STSP.getLiveElementFromEvent(_72);
SemTagPerson.fillPersonJsonMoreFromDom(_74,_75);
SemTagPerson.update(_74,_75,_72);
}else{
SemTagMenu.defaultCursor();
}
},appendObjectIdToUrl:function(_76){
var _77=SemTagPerson.basePumaResolvedUrl.indexOf(SemTagPerson.pumaUrl);
var _78="";
if(_77>-1){
_78=SemTagPerson.basePumaResolvedUrl.substr(0,_77)+SemTagPerson.pumaUrl+"/"+_76+SemTagPerson.basePumaResolvedUrl.substr(_77+SemTagPerson.pumaUrl.length);
}
return _78;
},fillPersonJsonMoreFromDom:function(_79,_7a){
var _7b=STSP.findNameElementInHcard(_7a);
if(_7b){
var _7c=STSP.getTextValue(_7b);
var _7d=_7c.indexOf("click");
if(_7d>0){
_79.fn=_7c.substring(0,_7d);
}else{
_79.fn=STSP.getTextValue(_7b);
}
}
var _7e=SemTagPerson.getElementEmail(_7a);
if(_7e){
_79.email={"internet":_7e};
}
var uid=SemTagUtil.getHcardAttributeValue("uid",_7a);
if(uid){
_79.uid=uid;
}
var _7f=SemTagUtil.getHcardAttributeValue("userObjectId",_7a);
if(_7f&&_7f.length>0){
_79.userObjectID=_7f;
}
if(_79.userObjectID){
var _80=_79.userObjectID.split("/");
if(_80&&_80.length>0){
_79.userObjectID=_80[_80.length-1];
}
}
if(_79){
var _81=(_79.photo&&_79.photo.length>0?"not null":"is not available");
}
if(_79&&_79.photo&&_79.photo.length>0){
if(_79.userObjectID&&_79.userObjectID.length>0){
var _82=SemTagPerson.appendObjectIdToUrl(_79.userObjectID+"/jpegPhoto");
_79.photo=_82+"&index=0";
}else{
_79.photo=_79.photoURL;
}
}
if(!_79.tel||!_79.tel.voice){
var _83=STSP.findElementByNameInHcard(_7a,"tel");
if(_83){
var _84=STSP.getTypedValue(_83,"voice");
_79.tel={"voice":_84["voice"]};
}
}
var _85=STSP.findElementByNameInHcard(_7a,"adr");
var _86={};
if(_85){
_86=SemTagPerson.getAddressJson(_85);
_79.adr=_86;
}
if(typeof (_79.adr)!="undefined"&&(_79.adr.locality||_79.adr.countryname||_79.adr.region)){
if(!_79.X){
_79.X={};
}
var _81=_79.adr.locality+", "+_79.adr.region+" "+_79.adr.countryname;
_79.X.worklocation=_81.replace(/undefined/g,"");
}
if(typeof (SemTagAwrns)!="undefined"){
if(!_79.X){
_79.X={};
}
_79.X.imn=SemTagAwrns.getSametimeId(_7a);
_79.X.ststatus=_7b.getAttribute("semtag_ststatus");
}
},emptyPerson:function(){
var _87={"fn":"","email":{"internet":""}};
return _87;
},update:function(_88,_89,_8a){
SemTagPerson.currentPerson=_88;
var _8b=STSP.getParentByClassName("vcard",_89);
var _8c=SemTagUtil.getHcardAttributeValue("X-person-header-only",_8b);
if(_8c){
_88._headeronly=true;
}
SemTagPerson.readHcardContext(_8b,_88);
STSP.setSemanticTagValue("hcard",_89,_88);
if(SemTagPerson.isInline(_8b)){
var out=new SemTagPerson.out();
SemTagPerson.getInlineMarkup(_88,STSP.bidi,out);
_8b.innerHTML=out.buffer;
var _8d=SemTagUtil.getNodeClassValue(_8b);
SemTagUtil.setNodeClassValue(_8b,_8d.replace(/vcard/,"vcard-done"));
if(_8c){
var _8e=STSP.getElementsByClassName("vcard",_8b,1);
if(_8e){
SemTagPerson.processHcards(_8e);
}
}
}else{
var _8f=new Array();
var _90="personMenuActions";
var _91=new SemTagPerson.out();
var _92=new SemTagPerson.out();
SemTagPerson.getMarkup(_88,STSP.bidi,_8f,_90,_91,_92);
var _93=(typeof (_88.email)!="undefined"&&_88.email.internet)?_88.email.internet:null;
STSP.setMenuData(_8a,_8f,_90,STSP.getMenuHeaderJson(_91.buffer,"text/html",-100),STSP.getMenuFooterJson(_92.buffer,"text/html",-100));
if(STSP.ifConnUrlExists=="true"&&(STSP.isconnServerNew===false)&&_93!=null){
if(eval("window.BusinessCard != null")==false){
SemTagPerson.processUntilAvailable(BusinessCard.getProfileInfo,"(window.BusinessCard != null)",null,null,null,true,"SemTagPerson.renderCard",_93);
}else{
BusinessCard.getProfileInfo(true,"SemTagPerson.renderCard",_93);
}
}
}
},readHcardContext:function(_94,_95){
var _96=SemTagUtil.getHcardAttributeValue("X-person-inside-inline",_94);
if(_96){
_95._inline=true;
}
var _97=SemTagUtil.getHcardAttributeValue("X-person-inside-profile",_94);
if(_97){
_95._inprofile=true;
}
var _98=SemTagUtil.getHcardAttributeValue("X-person-profile-inplace",_94);
if(_98){
_95._profileinplace=true;
}
},getElementEmail:function(_99){
if(!_99){
alert("getElementEmail called with: "+_99);
}
var _9a;
var _9b=STSP.getParentByClassName("vcard",_99);
if(_9b){
_9a=SemTagUtil.getHcardAttributeValue("email",_9b);
_9a=_9a.internet;
}else{
if(_99.tagName=="A"&&_99.href.match(/^mailto:/)){
_9a=_99.href.replace(/^mailto:/,"");
}
}
return _9a;
},getNameElement:function(_9c){
try{
if(_9c.className!="vcard"){
_9c=STSP.getParentByClassName("vcard",_9c);
}
var _9d=STSP.getElementsByClassName("fn",_9c,1)[0];
if(!_9d){
_9d=STSP.getElementsByClassName("n",_9c,1)[0];
}
return _9d;
}
catch(e){
}
return null;
},getAddressJson:function(_9e){
var _9f={"postofficebox":"","streetaddress":"","locality":"","region":"","postalcode":"","countryname":""};
var _a0=_9e;
if(_a0.className!="adr"){
_a0=STSP.getParentByClassName("adr",_9e);
}
if(_a0){
var _a1=_a0.childNodes;
for(var i=0;i<_a1.length;i++){
SemTagPerson.readAddressInfo(_a1[i],_9f);
}
}else{
_9f.streetaddress="5 Technology Park Drive";
_9f.locality="Westford";
_9f.region="MA";
_9f.postalcode="01886";
_9f.countryname="USA";
}
return _9f;
},readAddressInfo:function(_a2,_a3){
var _a4=_a2.childNodes;
if(_a4){
for(var i=0;i<_a4.length;i++){
SemTagPerson.readAddressInfo(_a4[i],_a3);
}
}
if(_a2.className!=null){
var cn=_a2.className;
if(cn.match(/(^|\s)post-office-box(\s|$)/i)){
_a3.postofficebox=STSP.getTextValue(_a2);
}else{
if(cn.match(/(^|\s)extenodeed-address(\s|$)/i)){
_a3.extenodeedaddress=STSP.getTextValue(_a2);
}else{
if(cn.match(/(^|\s)street-address(\s|$)/i)){
_a3.streetaddress=STSP.getTextValue(_a2);
}else{
if(cn.match(/(^|\s)locality(\s|$)/i)){
_a3.locality=STSP.getTextValue(_a2);
}else{
if(cn.match(/(^|\s)region(\s|$)/i)){
_a3.region=STSP.getTextValue(_a2);
}else{
if(cn.match(/(^|\s)postal-code(\s|$)/i)){
_a3.postalcode=STSP.getTextValue(_a2);
}else{
if(cn.match(/(^|\s)country-name(\s|$)/i)){
_a3.countryname=STSP.getTextValue(_a2);
}
}
}
}
}
}
}
}
},existsInObject:function(_a5,_a6){
var _a7=_a6.split(".");
var _a8=_a5;
var _a9=true;
for(var i=0;i<_a7.length;i++){
var _aa;
if(_a7[i].indexOf("(")>-1){
_aa=_a7[i].substr(0,_a7[i].indexOf("("));
}else{
_aa=_a7[i];
}
if(_a8[_aa]){
_a8=_a8[_aa];
}else{
_a9=false;
break;
}
}
return _a9;
},executeJSTargetInFrame:function(_ab){
if(_ab.indexOf("javascript:")>-1){
var _ac=_ab.substr(("javascript:".length));
var _ad=window;
if(!SemTagPerson.existsInObject(window,_ac)){
for(var i=0;i<parent.frames.length;i++){
if(SemTagPerson.existsInObject(parent.frames[i],_ac)){
_ad=parent.frames[i];
break;
}
}
}else{
}
_ad.eval(_ab);
}else{
}
},getTagFromServer:function(_ae){
var _af=STSP.getLiveElementFromEvent(_ae);
var _b0=SemTagPerson.getElementEmail(_af);
if(_b0){
_b0=_b0.toLowerCase();
var src=SemTagPerson.servletUrl.replace(/@@@EMAIL@@@/,_b0);
SemTagPerson.requestor.request(src,6000,SemTagPerson.requestReturn,_af,_b0);
}else{
var evt={"target":_af};
SemTagPerson.requestReturn(false,null,evt);
}
},callUserProfileServlet:function(_b1){
var _b2="";
var _b3=STSP.getLiveElementFromEvent(_b1);
var _b4="";
var _b5=SemTagPerson.getElementEmail(_b3);
if(_b5){
_b4="ibm-primaryEmail="+_b5;
}
var uid=SemTagUtil.getHcardAttributeValue("uid",_b3);
if(uid){
_b4="identifier="+uid;
}
_b2=SemTagUtil.getHcardAttributeValue("userObjectId",_b3);
var xml=null;
try{
if(_b2&&_b2.length>0){
var _b6=SemTagPerson.appendObjectIdToUrl(_b2)+"&expandRefs=true&includeAttributes=@@@AVAILATTRIBUTES@@@";
_b6=_b6.replace("@@@AVAILATTRIBUTES@@@",STSP.availAttribStr);
xml=ibm.portal.xml.loadXml(_b6.replace("@@@AVAILATTRIBUTES@@@",STSP.availAttribStr));
}else{
if(uid&&uid.length>0){
var _b6=SemTagPerson.basePumaResolvedUrl+"&@@@QUERY@@@&includeAttributes=@@@AVAILATTRIBUTES@@@";
_b6=_b6.replace("@@@AVAILATTRIBUTES@@@",STSP.availAttribStr);
try{
xml=ibm.portal.xml.loadXml(_b6.replace("@@@QUERY@@@",_b4));
}
catch(er){
if(uid.indexOf("uid=")==0){
_b4=uid;
}else{
_b4="uid="+uid;
}
var _b7=SemTagPerson.basePumaResolvedUrl+"&expandRefs=true&includeAttributes=@@@AVAILATTRIBUTES@@@&searchAttributes=@@@QUERY@@@";
_b7=_b7.replace("@@@AVAILATTRIBUTES@@@",STSP.availAttribStr);
xml=ibm.portal.xml.loadXml(_b7.replace(/@@@QUERY@@@/,_b4));
}
}else{
var _b6=SemTagPerson.basePumaResolvedUrl+"&expandRefs=true&includeAttributes=@@@AVAILATTRIBUTES@@@&searchAttributes=@@@QUERY@@@";
_b6=_b6.replace("@@@AVAILATTRIBUTES@@@",STSP.availAttribStr);
xml=ibm.portal.xml.loadXml(_b6.replace(/@@@QUERY@@@/,_b4));
}
}
}
catch(e){
var evt={"target":_b3};
SemTagPerson.requestReturn(false,null,evt);
return false;
}
if(xml){
if(0<_b2.length){
var xsl=ibm.portal.xml.loadXsl(STSPG.contextUrl+"/xsl/UserAtomByIdToPersonJson.xsl");
}else{
var xsl=ibm.portal.xml.loadXsl(STSPG.contextUrl+"/xsl/UserAtomToPersonJson.xsl");
}
var _b8=ibm.portal.xml.transform(xml,xsl,null,null,true);
var _b9=eval(_b8)[0];
if(!_b9&&!_b9.fn){
_b9=SemTagPerson.emptyPerson();
}
SemTagPerson.fillPersonJsonMoreFromDom(_b9,_b3);
SemTagPerson.update(_b9,_b3,_b1);
return;
}else{
}
var evt={"target":_b3};
SemTagPerson.requestReturn(false,null,evt);
}};
SemTagPerson.init();


var SemTagAwrns={SVCNAME:"sametime",hcards:new Array(),activeElems:[],hasApplet:false,imIds:STSPG.preferredImIds,st:"",stIR:false,init:function(){
STSP.setCallback(SemTagAwrns.SVCNAME,SemTagAwrns.hcardsAdded);
SemTagAwrns.processHcards(STSP.getNodes(SemTagAwrns.SVCNAME));
},hcardsAdded:function(){
SemTagAwrns.processHcards(STSP.getNodes(SemTagAwrns.SVCNAME));
},processHcards:function(_1){
_1=_1||null;
if(_1==null){
return;
}
STSP.sametimeSTProxy=(typeof (stproxy)!=="undefined");
STSP.sametimeSTLinks=((typeof (stproxy)==="undefined")&&(typeof (prepareSametimeLink)!=="undefined"));
STSP.stNI=((typeof (stproxy)==="undefined")&&(typeof (prepareSametimeLink)==="undefined"));
if(!STSP.sametimeSTProxy&&!STSP.sametimeSTLinks){
return;
}else{
}
SemTagAwrns.hcards=[];
SemTagAwrns.hcards=_1;
if(STSP.sametimeSTProxy){
stproxy.addOnLoad(function(){
var _2=SemTagAwrns.hcards;
for(var i=0;i<_2.length;i++){
var _3=_2[i];
if(SemTagAwrns.disabled(_3)){
continue;
}
var _4=STSP.findNameElementInHcard(_3);
if(!_4){
continue;
}
var _5=_4.getAttribute(STSP.liveElemPrefix+"id");
var _6=SemTagAwrns.activeElems[_5];
if(_5==null){
continue;
}
if(_5&&SemTagAwrns.activeElems[_5]){
continue;
}
var _7=SemTagAwrns.getSametimeId(_3);
var _8=SemTagUtil.getHcardAttributeValue("X-sametime-resolve",_3);
if(!_8){
continue;
}
var _9=document.createElement("span");
var _a=SemTagUtil.getHcardAttributeValue("x-sametime-no-icon",_3);
SemTagAwrns.stIR=false;
if(_a){
SemTagAwrns.stIR=true;
}
var _b=stproxy.getLiveNameModel(_7,{"isInBuddyList":false,"forceWatchlist":true});
_b.portalId=_7;
var _c=SemTagAwrns.getStatus(_b.status);
if(_4){
_4.setAttribute("semtag_ststatus",_c);
}
if(!(SemTagAwrns.stIR)){
var _d=document.createElement("img");
_d.id=i;
_d.imgId=_b.id;
SemTagAwrns.setSTIS(_b,_d,stproxy);
_9.appendChild(_d);
_9.setAttribute("class","sametimeawarenessicon");
_9.className+=" sametimeawarenessicon";
_4.parentNode.insertBefore(_9,_4);
}
if(stproxy.hitch&&stproxy.hitch.connect){
stproxy.hitch.connect(_b,"onUpdate",SemTagAwrns.updateSTProxy);
}else{
_b.onUpdate=SemTagAwrns.updateSTProxy;
}
if(_5){
SemTagAwrns.activeElems[_5]=true;
}
}
});
}
if(STSP.sametimeSTLinks){
for(var i=0;i<_1.length;i++){
var _e=_1[i];
if(SemTagAwrns.disabled(_e)){
continue;
}
SemTagAwrns.hcards=[];
SemTagAwrns.hcards.push(_e);
var _f=STSP.findNameElementInHcard(_e);
if(!_f){
continue;
}
var _10=_f.getAttribute(STSP.liveElemPrefix+"id");
var _11=SemTagAwrns.activeElems[_10];
if(_10==null){
continue;
}
if(_10&&SemTagAwrns.activeElems[_10]){
continue;
}
var _12=SemTagAwrns.getSametimeId(_e);
var _13=SemTagUtil.getHcardAttributeValue("X-sametime-resolve",_e);
if(_13){
var _14=document.createElement("span");
}
if(STSP.sametimeSTLinks&&_13){
var od=SemTagUtil.getOwnerDocument(_e);
if(od.location!=document.location){
var f=SemTagUtil.getFrameElement(_e);
if(f){
if(f.id=="wpsFLY_flyoutIFrame"){
continue;
}
}
}
_14.style.verticalAlign="text-top";
}
if(STSP.sametimeSTLinks&&_13){
st=prepareSametimeLink(_12,"",_13,"text:no;");
_14.innerHTML=st;
_f.parentNode.insertBefore(_14,_f);
}
if(_10){
SemTagAwrns.activeElems[_10]=true;
}
}
}
},setSTIS:function(_15,_16,_17){
if(_15.status>=_17.awareness.OFFLINE&&_15.status<=_17.awareness.IN_MEETING_MOBILE){
switch(_15.status){
case 0:
_16.src=_17.uiControl.iconPaths.iconOffline;
break;
case 1:
_16.src=_17.uiControl.iconPaths.iconAvailable;
_16.onclick=function(){
SemTagAwrns.openChat(_16.imgId,_15);
};
break;
case 4:
case 2:
_16.src=_17.uiControl.iconPaths.iconAway;
_16.onclick=function(){
SemTagAwrns.openChat(_16.imgId,_15);
};
break;
case 3:
_16.src=_17.uiControl.iconPaths.iconDnd;
break;
case 5:
_16.src=_17.uiControl.iconPaths.iconInMeeting;
_16.onclick=function(){
SemTagAwrns.openChat(_16.imgId,_15);
};
break;
case 6:
_16.src=_17.uiControl.iconPaths.iconAvailableMobile;
_16.onclick=function(){
SemTagAwrns.openChat(_16.imgId,_15);
};
break;
case 7:
_16.src=_17.uiControl.iconPaths.iconAwayMobile;
_16.onclick=function(){
SemTagAwrns.openChat(_16.imgId,_15);
};
break;
case 8:
_16.src=_17.uiControl.iconPaths.iconDndMobile;
break;
case 9:
_16.src=_17.uiControl.iconPaths.iconAwayMobile;
_16.onclick=function(){
SemTagAwrns.openChat(_16.imgId,_15);
};
break;
case 10:
_16.src=_17.uiControl.iconPaths.iconInMeetingMobile;
_16.onclick=function(){
SemTagAwrns.openChat(_16.imgId,_15);
};
break;
default:
_16.src=_17.NOT_USING;
break;
}
_16.title=_15.statusMessage;
_16.alt=_15.statusMessage;
}
},disabled:function(_18){
var _19=SemTagUtil.getHcardAttributeValue("X-no-awareness",_18);
return _19;
},getSametimeId:function(_1a){
var _1b=null;
for(var i=0;i<SemTagAwrns.imIds.length;i++){
var _1c=STSP.findElementByNameInHcard(_1a,SemTagAwrns.imIds[i]);
if(_1c){
_1b=STSP.getTextValue(_1c);
if(0<_1b.length){
break;
}
}
}
return _1b;
},updateST:function(_1d){
var _1e=_1d.split(";");
var _1f=_1e[0];
var _20=_1e[1];
for(var i=0;i<SemTagAwrns.hcards.length;i++){
var vc=SemTagAwrns.hcards[i];
var _21=SemTagAwrns.getSametimeId(vc);
if(_21==_1f){
var _22=STSP.findNameElementInHcard(vc);
if(_22){
_22.setAttribute("semtag_ststatus",_20);
}
}
}
},updateSTProxy:function(){
var _23=SemTagAwrns.getStatus(this.status);
for(var i=0;i<SemTagAwrns.hcards.length;i++){
var vc=SemTagAwrns.hcards[i];
var _24=SemTagAwrns.getSametimeId(vc);
if(_24.toLowerCase()==this.portalId.toLowerCase()){
var _25=STSP.findNameElementInHcard(vc);
if(_25){
_25.setAttribute("semtag_ststatus",_23);
}
var _26=SemTagUtil.getHcardAttributeValue("x-sametime-no-icon",vc);
SemTagAwrns.stIR=false;
if(_26){
SemTagAwrns.stIR=true;
}
if(!(SemTagAwrns.stIR)){
var _27=STSP.getElementsByClassName("sametimeawarenessicon",vc);
var _28=_27!=null||_27.length>0?_27[0]:null;
if(_28){
icon=_28.firstChild;
SemTagAwrns.setSTIS(this,icon,stproxy);
}else{
}
}
}
}
},getStatus:function(_29){
var val="";
switch(_29){
case 0:
val="offline";
break;
case 1:
val="online";
break;
case 2:
val="away";
break;
case 3:
val="donotdisturb";
break;
case 4:
val="away";
break;
case 5:
val="meeting";
break;
default:
val="offline";
break;
}
return val;
},openCall:function(_2a){
if(stproxy.policies.get(stproxy.policies.TCSPI)){
stproxy.call.byId(_2a);
}
},openInstantMeeting:function(_2b){
if(stproxy.policies.get(stproxy.policies.DISABLE_MEETING_INVITATION)){
stproxy.createMeeting(_2b);
}
},openSendAnnouncement:function(_2c){
if(stproxy.policies.get(stproxy.policies.ALLOW_ANNOUNCEMENT)){
stproxy.createAnnouncement(_2c);
}
},openAddToContacts:function(_2d){
stproxy.createAdder(_2d);
},openChat:function(_2e,_2f){
if(STSP.sametimeSTLinks){
STLinksCreateIM(_2e);
}
if(STSP.sametimeSTProxy){
if(_2f==null){
_2f=stproxy.getLiveNameModel(_2e,{"isInBuddyList":false,"forceWatchlist":true});
}
stproxy.openChat(_2f.id);
}
}};
if(typeof wps_userStatusFuncs=="undefined"){
wps_userStatusFuncs=new Object();
}
wps_userStatusFuncs["STLinksUserStatusChanged_SA"]=0;
if(typeof wps_loggedInFuncs=="undefined"){
wps_loggedInFuncs=new Object();
}
wps_loggedInFuncs["STLinksLoggedIn_SA"]=0;
if(typeof wps_appletStartedFuncs=="undefined"){
wps_appletStartedFuncs=new Object();
}
wps_appletStartedFuncs["STLinksAppletStarted_SA"]=0;
function STLinksUserStatusChanged_SA(_30,_31,_32,_33,_34){
var val="";
switch(_32){
case 32:
val="online";
break;
case 64:
val="away";
break;
case 554:
val="online";
break;
case 96:
val="away";
break;
case 608:
val="away";
break;
case 128:
val="donotdisturb";
break;
default:
val="offline";
break;
}
var arg=_30+";"+val;
if(STSP.sametimeSTLinks){
SemTagAwrns.updateST(arg);
}
};
function STLinksAppletStarted_SA(){
SemTagAwrns.hasApplet=true;
};
function STLinksLoggedIn_SA(id,_35){
};
window.setTimeout(SemTagAwrns.init,STSP.DELAY);



	

var SemTagC2A={serviceId:"c2a",sourceTagName:"c2a:source",typeNameTagName:"c2a:typename",valueTagName:"c2a:value",displayTagName:"c2a:display",anchorTagName:"c2a:anchor",targetTagName:"c2a:target",menulabelTagName:"c2a:action-label",paramTagName:"c2a:action-param",defaultNameSpaceStr:"IBM_C2A_DEFAULT_NAMESPACE",namespaceSep:"#",liveObjectNamespace:"http://www.ibm.com/xmlns/prod/websphere/portal/v6.1/livetext",targetsAvail:null,targetNodeIDs:new Object(),sourceNodeIDs:new Object(),currentValue:"",currentValArray:null,IDctr:0,c2aIdBaseStr:"IBMC2ASRVC_",c2aSourceIdBase:"IBMC2ASRVC_Source_",c2aTargetIdBase:"IBMC2ASRVC_Target_",nls:{"c2a_click_for_actions":STSPG.c2a_click_for_actions},init:function(){
if(!window.ibm){
window.ibm=new Object();
}
if(!window.ibm.portal){
window.ibm.portal=new Object();
}
window.ibm.portal.c2a=new Object();
for(var i=0;i<parent.frames.length;i++){
if(SemTagC2A.canAccessFrameContent(parent.frames[i])){
if(!parent.frames[i].ibm){
parent.frames[i].ibm=new Object();
}
if(!parent.frames[i].ibm.portal){
parent.frames[i].ibm.portal=new Object();
}
parent.frames[i].ibm.portal.c2a=new Object();
}
}
SemTagC2A.defineRegExpressions();
STSP.setCallback(SemTagC2A.serviceId,SemTagC2A.parseDOM);
STSP.setSpecialMenuProvider(SemTagC2A.getSpecialC2AMenuItems);
SemTagC2A.parseDOM();
},getSpecialC2AMenuItems:function(_1){
var _2=null;
try{
var _3=_1;
var _4=_1.parentNode;
var _5=STSP.getSemanticTagValues(_1);
for(var _6 in _5){
var _7=_5[_6];
if(!_7){
continue;
}
_2=SemTagC2A.getTargetMenuItems(SemTagC2A.getSpecialC2ASourceInfo(_6,_7));
}
}
catch(e){
}
return _2;
},showHover:function(_8){
STSP.showHover(_8,SemTagC2A.handleClick,SemTagC2A.nls.c2a_click_for_actions);
},canAccessFrameContent:function(_9){
var _a=false;
try{
if(window.location.host==_9.location.host&&window.location.protocol==_9.location.protocol){
_a=true;
}
}
catch(err){
}
return _a;
},findElementInWindowScope:function(_b){
var _c;
_c=document.getElementById(_b);
if(_c==null){
for(var i=0;i<parent.frames.length;i++){
if(SemTagC2A.canAccessFrameContent(parent.frames[i])){
_c=frames[i].document.getElementById(_b);
if(_c!=null){
break;
}
}
}
}
return _c;
},handleClick:function(_d){
if(!window.ibm){
window.ibm=new Object();
}
if(!window.ibm.portal){
window.ibm.portal=new Object();
}
window.ibm.portal.c2a=new Object();
for(var i=0;i<parent.frames.length;i++){
if(SemTagC2A.canAccessFrameContent(parent.frames[i])){
if(!parent.frames[i].ibm){
parent.frames[i].ibm=new Object();
}
if(!parent.frames[i].ibm.portal){
parent.frames[i].ibm.portal=new Object();
}
parent.frames[i].ibm.portal.c2a=new Object();
}
}
var _e=STSP.getLiveElementFromEvent(_d);
if(!SemTagC2A.isSource(_e)){
var _f=STSP.getParentByClassName(SemTagC2A.sourceTagName,_e);
}
SemTagC2A.generateMenuContents(_d,_f);
},parseDOM:function(){
SemTagC2A.processDomNodes(STSP.getNodes(SemTagC2A.serviceId));
SemTagC2A.processSources(SemTagC2A.sourceNodeIDs);
},processDomNodes:function(_10){
for(var _11 in SemTagC2A.sourceNodeIDs){
if(!SemTagC2A.findElementInWindowScope(_11)){
delete SemTagC2A.sourceNodeIDs[_11];
}
}
for(var _11 in SemTagC2A.targetNodeIDs){
if(!SemTagC2A.findElementInWindowScope(_11)){
delete SemTagC2A.targetNodeIDs[_11];
}
}
while(_10&&_10.length>0){
var _12=_10.pop();
var _13=_12.id;
if(_13!=null&&(SemTagC2A.exists(SemTagC2A.sourceNodeIDs,_13)||SemTagC2A.exists(SemTagC2A.targetNodeIDs,_13))){
continue;
}
if(SemTagC2A.isSource(_12)){
if(_12.id==null||_12.id==""){
_12.id=SemTagC2A.c2aSourceIdBase+SemTagC2A.IDctr;
SemTagC2A.IDctr++;
}
SemTagC2A.sourceNodeIDs[_12.id]="true";
}else{
if(SemTagC2A.isTarget(_12)){
if(_12.id==null||_12.id==""){
_12.id=SemTagC2A.c2aTargetIdBase+SemTagC2A.IDctr;
SemTagC2A.IDctr++;
}
SemTagC2A.targetNodeIDs[_12.id]="true";
}
}
}
SemTagC2A.updateAvailableTargets();
},exists:function(_14,_15){
if(_14[_15]&&_14[_15]=="true"){
return true;
}
return false;
},processSources:function(_16){
for(var _17 in _16){
var _18=SemTagC2A.findElementInWindowScope(_17);
var _19=SemTagC2A.getSourceInfo(_18);
var _1a=SemTagC2A.isTargetDefined(_19);
if(_19.value==null||_19.value==""){
break;
}
var _1b=_19.anchorNode.getAttribute("hasHover");
if(_1a||_19.display!=""){
if(_1b==null||_1b=="false"){
STSP.addHover(_19.anchorNode,SemTagC2A.showHover,SemTagC2A.handleClick);
_19.anchorNode.setAttribute("hasHover","true");
}
}else{
if(_1b=="true"){
STSP.removeHover(_19.anchorNode,SemTagC2A.showHover,SemTagC2A.handleClick);
}
_19.anchorNode.setAttribute("hasHover","false");
}
}
},defineRegExpressions:function(){
SemTagC2A.sourceRegExp=new RegExp("(^|\\s)"+SemTagC2A.sourceTagName+"(\\s|$)");
SemTagC2A.typeNameRegExp=new RegExp("(^|\\s)"+SemTagC2A.typeNameTagName+"(\\s|$)");
SemTagC2A.valueRegExp=new RegExp("(^|\\s)"+SemTagC2A.valueTagName+"(\\s|$)");
SemTagC2A.displayRegExp=new RegExp("(^|\\s)"+SemTagC2A.displayTagName+"(\\s|$)");
SemTagC2A.anchorRegExp=new RegExp("(^|\\s)"+SemTagC2A.anchorTagName+"(\\s|$)");
SemTagC2A.targetRegExp=new RegExp("(^|\\s)"+SemTagC2A.targetTagName+"(\\s|$)"),SemTagC2A.menulabelRegExp=new RegExp("(^|\\s)"+SemTagC2A.menulabelTagName+"(\\s|$)");
SemTagC2A.paramRegExp=new RegExp("(^|\\s)"+SemTagC2A.paramTagName+"(\\s|$)");
},isTarget:function(_1c){
if(_1c.tagName=="FORM"){
var _1d=SemTagUtil.getNodeClassValue(_1c).match(SemTagC2A.targetRegExp);
return _1d;
}else{
return false;
}
},isSource:function(_1e){
if(_1e.tagName=="SPAN"||_1e.tagName=="DIV"){
var _1f=SemTagUtil.getNodeClassValue(_1e).match(SemTagC2A.sourceRegExp);
return _1f;
}else{
return false;
}
},updateAvailableTargets:function(){
SemTagC2A.targetsAvail=null;
SemTagC2A.targetsAvail=new Array();
for(var _20 in SemTagC2A.targetNodeIDs){
var _21=SemTagC2A.findElementInWindowScope(_20);
var _22=_21.childNodes;
var _23=null;
var _24=null;
for(var i=0;i<_22.length;i++){
var _25=_22[i];
var _26=SemTagUtil.getNodeClassValue(_25);
if(_26==""){
continue;
}
if(_26.match(SemTagC2A.typeNameRegExp)){
var _27=SemTagC2A.getElementValue(_25);
var _28=SemTagC2A.parseTypeName(_27);
_23=_28.namespace;
_24=_28.type;
if(_24!=null){
if(_23==null){
_23=SemTagC2A.defaultNameSpaceStr;
}
if(typeof (SemTagC2A.targetsAvail[_23])=="undefined"){
SemTagC2A.targetsAvail[_23]=new Array();
}
SemTagC2A.targetsAvail[_23][_24]=true;
}
}
}
}
},parseTypeName:function(_29){
var _2a=null;
var _2b=null;
var _2c=_29.indexOf(SemTagC2A.namespaceSep);
if(_2c<0){
_2a=SemTagC2A.defaultNameSpaceStr;
_2b=_29;
}else{
_2a=_29.substring(0,_2c);
_2b=_29.substring(_2c+1);
}
var _2d;
if(_2a==SemTagC2A.liveObjectNamespace){
var _2e=_2b.indexOf(".");
if(_2e>0){
var _2f=_2b.substring(_2e+1);
_2b=_2b.substring(0,_2e);
_2d={"namespace":_2a,"type":_2b,"selector":_2f};
return _2d;
}
}
_2d={"namespace":_2a,"type":_2b};
return _2d;
},isTargetDefined:function(_30){
var _31=false;
for(var i=0;i<_30.typenames.length;i++){
if(!_30.typenames[i].namespace||_30.typenames[i].namespace==""){
_30.typenames[i].namespace=SemTagC2A.defaultNameSpaceStr;
}
if(typeof (SemTagC2A.targetsAvail[_30.typenames[i].namespace])!="undefined"){
var _32=SemTagC2A.targetsAvail[_30.typenames[i].namespace][_30.typenames[i].type];
_31=(typeof (_32)!="undefined"&&_32?true:false);
}
if(_31==true){
return _31;
}
}
return false;
},isTargetSourceMatch:function(_33,_34){
var _35;
var _36;
for(var i=0;i<_33.typenames.length;i++){
_35=_33.typenames[i];
for(var j=0;j<_34.typenames.length;j++){
_36=_34.typenames[j];
if(_35.namespace==_36.namespace){
if(_35.namespace==SemTagC2A.liveObjectNamespace){
var _37;
if(_36.selector){
_37=SemTagC2A.selectSubField(_33.value,_34.selector);
}else{
_37=_33.value;
}
if(_37&&_37!=null&&_37!=""){
return true;
}
}else{
if(_35.type==_36.type){
return true;
}
}
}
}
}
return false;
},getElementValue:function(_38){
var _39;
if(SemTagUtil.getNodeClassValue(_38).match(SemTagC2A.displayRegExp)){
_39=_38.innerHTML;
}else{
_39=_38.firstChild.nodeValue;
}
var _3a=_39==null?"":_39.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1");
return _3a;
},fillC2AInfo:function(_3b,_3c){
var _3d=_3b.childNodes;
for(var i=0;i<_3d.length;i++){
var _3e=_3d[i];
var _3f=SemTagUtil.getNodeClassValue(_3e);
if(_3f==null||_3f==""){
if(_3e.childNodes.length>0){
SemTagC2A.fillC2AInfo(_3e,_3c);
}
}else{
if(_3f.match(SemTagC2A.typeNameRegExp)){
var _40=SemTagC2A.getElementValue(_3e);
var _41=SemTagC2A.parseTypeName(_40);
_3c.typenames.push({namespace:_41.namespace,type:_41.type});
if(_41.selector){
_3c.selector=_41.selector;
}
}else{
if(_3f.match(SemTagC2A.valueRegExp)&&_3c.value==""){
_3c.value=SemTagC2A.getElementValue(_3e);
if(!_3c.anchorNode||_3c.anchorNode==""){
_3c.anchorNode=_3e;
}
}else{
if(_3f.match(SemTagC2A.displayRegExp)&&_3c.display==""){
_3c.display=SemTagC2A.getElementValue(_3e);
}else{
if(_3f.match(SemTagC2A.menulabelRegExp)&&_3c.menuLabel==""){
_3c.menuLabel=SemTagC2A.getElementValue(_3e);
}else{
if(_3f.match(SemTagC2A.anchorRegExp)){
_3c.anchorNode=_3e;
}else{
if(!_3f.match(SemTagC2A.sourceRegExp)&&!_3f.match(SemTagC2A.targetRegExp)){
if(_3e.childNodes.length>0){
SemTagC2A.fillC2AInfo(_3e,_3c);
}
}
}
}
}
}
}
}
}
},getSpecialC2ASourceInfo:function(_42,_43){
var _44={"typenames":new Array(),"value":_43,"display":"","anchorNode":""};
_44.typenames.push({namespace:SemTagC2A.liveObjectNamespace,type:_42});
return _44;
},getSourceInfo:function(_45){
var _46={"typenames":new Array(),"value":"","display":"","anchorNode":""};
SemTagC2A.fillC2AInfo(_45,_46);
return _46;
},getTargetInfo:function(_47){
var _48={"typenames":new Array(),"menuLabel":""};
SemTagC2A.fillC2AInfo(_47,_48);
return _48;
},generateMenuContents:function(_49,_4a){
var _4b=null;
var _4c=null;
var _4d=SemTagC2A.getSourceInfo(_4a);
if(SemTagC2A.isTargetDefined(_4d)==true){
_4b=SemTagC2A.getTargetMenuItems(_4d);
}
if(_4d.display!=""){
_4c=STSP.getMenuHeaderJson(_4d.display,"text/html",-100);
}
if(_4b!=null||_4d.display!=""){
STSP.setMenuData(_49,_4b,"",_4c,"");
}
},getTargetMenuItems:function(_4e){
var _4f=new Array();
var _50=new Array();
for(var _51 in SemTagC2A.targetNodeIDs){
var _52=SemTagC2A.findElementInWindowScope(_51);
var _53=SemTagC2A.getTargetInfo(_52);
var _54=_53.menuLabel;
var _55=_50[_54];
if(_55!=null){
_50[_54]=_55++;
}else{
_50[_54]=1;
_55=1;
}
if(_55>1){
_54+=" ("+_55+")";
}
if(SemTagC2A.isTargetSourceMatch(_4e,_53)==true){
_4f.push(STSP.getMenuItemJson(_54,"javascript:SemTagC2A.executeMenuAction(\""+_51+"\");"));
}
}
if(_4f.length>0){
SemTagC2A.currentValue=_4e.value;
}
return _4f;
},executeMenuAction:function(_56){
var _57={};
var _58=SemTagC2A.findElementInWindowScope(_56);
if(_58&&_58.tagName=="FORM"){
var _59=SemTagC2A.currentValue;
var _5a=SemTagC2A.getTargetInfo(_58);
if(_5a.selector){
_59=SemTagC2A.selectSubField(_59,_5a.selector);
}
var _5b=STSP.getElementsByClassName(SemTagC2A.paramTagName,_58,0,["INPUT"]);
for(var j=0;j<_5b.length;j++){
_5b[j].value=SemTagC2A.getStringValue(_59);
}
window.ibm.portal.c2a.event={value:_59};
for(var i=0;i<parent.frames.length;i++){
if(SemTagC2A.canAccessFrameContent(parent.frames[i])){
if(!parent.frames[i].ibm){
parent.frames[i].ibm=new Object();
}
if(!parent.frames[i].ibm.portal){
parent.frames[i].ibm.portal=new Object();
}
parent.frames[i].ibm.portal.c2a=new Object();
parent.frames[i].ibm.portal.c2a.event={value:_59};
}
}
if(_58.onsubmit){
if(SemTagUtil.isGecko){
var _5c=new Object();
_58.onsubmit(_5c);
}else{
_58.fireEvent("onsubmit");
}
}
_58.submit();
}else{
}
},selectSubField:function(obj,_5d){
var _5e=_5d.split(".");
var x=obj;
for(var i=0;i<_5e.length;i++){
if(typeof (x)=="object"&&x[_5e[i]]){
x=x[_5e[i]];
}else{
x=null;
break;
}
}
return x;
},getStringValue:function(x){
var _5f;
if(typeof x=="string"){
_5f=x;
return x;
}else{
_5f=SemTagC2A.getJSON(x);
return _5f;
}
},getJSON:function(x){
var _60;
if(x==null){
_60="null";
return _60;
}
switch(typeof x){
case "string":
_60="\""+x+"\"";
return _60;
case "number":
case "boolean":
_60=String(x);
return _60;
case "object":
if(x instanceof Array){
_60=SemTagC2A.getArrayJSON(x);
return _60;
}else{
if(x){
_60=SemTagC2A.getObjectJSON(x);
return _60;
}
}
}
},getObjectJSON:function(o){
var a=[];
var _61;
for(k in o){
if(o.hasOwnProperty(k)){
a.push("\""+k+"\":"+SemTagC2A.getJSON(o[k]));
}
}
_61="{"+a.join(",")+"}";
return _61;
},getArrayJSON:function(o){
var a=[];
var _62;
for(var k=0;k<o.length;k++){
a.push(SemTagC2A.getJSON(o[k]));
}
_62="["+a.join(",")+"]";
return _62;
},triggerCSRAction:function(_63){
var _64=SemTagC2A.findElementInWindowScope(_63);
var _65=SemTagC2A.getC2ATargetPageID(_64);
var _66=SemTagC2A.getC2ATargetPortletWindowID(_64);
var _67=SemTagC2A.getC2ACommTargetName(_64);
var _68=SemTagC2A.currentValue;
var _69=SemTagC2A.getTargetActionParams(_64);
},triggerCSREvent:function(_6a){
var _6b=SemTagC2A.findElementInWindowScope(_6a);
var _6c=SemTagC2A.getC2ATargetPageID(_6b);
var _6d=SemTagC2A.getC2ATargetPortletWindowID(_6b);
var _6e=SemTagC2A.getC2ACommTargetQName(_6b);
var _6f=SemTagC2A.currentValue;
var _70=com.ibm.mashups.services.ServiceManager.getService(com.ibm.mashups.iwidget.services.EventService.SERVICE_NAME);
_70.fireEvent(_6d,_6e,_6f,"{http://www.w3.org/2001/XMLSchema}string");
},getC2ATargetPageID:function(_71){
var _72=dojo.query("input[name=\"com.ibm.wps.propertybroker.standard.c2a.pageid\"]",_71);
var _73=(_72!=null&&_72.length==1)?_72[0].value:"undefined";
return _73;
},getC2ATargetPortletWindowID:function(_74){
var _75=dojo.query("input[name=\"com.ibm.wps.propertybroker.standard.c2a.portletwindowid\"]",_74);
var _76=(_75!=null&&_75.length==1)?_75[0].value:"undefined";
return _76;
},getC2ACommTargetName:function(_77){
var _78=dojo.query("input[name=\"com.ibm.wps.propertybroker.standard.c2a.commtargetname\"]",_77);
var _79=(_78!=null&&_78.length==1)?_78[0].value:"undefined";
return _79;
},getC2ACommTargetQName:function(_7a){
var _7b=dojo.query("input[name=\"com.ibm.wps.propertybroker.standard.c2a.commtargetqname\"]",_7a);
var _7c=(_7b!=null&&_7b.length==1)?_7b[0].value:"undefined";
return _7c;
},getC2ATargetActionParams:function(_7d){
var _7e=dojo.query("input[type=\"text\"]",_7d);
dojo.forEach(_7e,function(_7f){
});
}};
SemTagC2A.init();



 // end of jspscriptlet

 

}catch(e){console.log("Module 'wp_liveobject_framework': ",e);}
try{setTimeout(function(){	
// create a test node off the browser screen to calculate high contrast mode
var testNode = document.createElement("div");
testNode.className = "highContrastTestNode";
document.body.appendChild(testNode);
// look at the computed style for the test node
var styles = null;
try {
	styles = document.defaultView.getComputedStyle(testNode, "");
} catch(e) {
	styles = testNode.currentStyle;
}
if(styles) {
	var testImg = styles.backgroundImage;
	if ((styles.borderTopColor == styles.borderRightColor) || (testImg != null && (testImg == "none" || testImg == "url(invalid-url:)" ))) {
		document.getElementsByTagName("body")[0].className+=" lotusImagesOff";
	}
	document.body.removeChild(testNode);
}
}, 500);

}catch(e){console.log("Module 'wp_one_ui_303': ",e);}
try{(function(){
    i$.merge({
	"Rating_Distribution":"Rating Distribution",
	"text_info_changes_lost":"All changes made in a different tab will be lost.",
	"text_error_tags_too_long":"Addition of tags failed either due to insufficient permissions or tags being too long.",
	"title_taggingError_message":"Error - check console",
	"title_hide_tags":"Hide tags",
	"star":"Star",
	"text_invalid_tag_name":"Invalid tag name",
	"title_community_rating_distribution":"Distribution of the public rating",
	"text_error_tags_rejected":"Your actions failed: ${0} tags were rejected by the server, either because of a filter rule, due to insufficient permissions or invalid characters.",
	"title_locale_picker":"The language your entries will be saved in:",
	"title_switch_to_pub_view":"Switch to public view",
	"text_success_changes_stored_successfully":"Your actions were successful:",
	"button_public":"Public",
	"title_open_ratings_widget":"Click to add ratings",
	"text_info_length_of_tag_invalid":"The length of one of the entered tags is either too long or too short.",
	"title_switch_to_priv_view":"Switch to private view",
	"title_submit_tags":"Submit tags",
	"title_delete":"Delete \"${0}\"",
	"title_view_tags":"View tags",
	"ratingDescription_rating":"rating",
	"text_add_tags":"Add the following tag(s):",
	"title_click_to_add_ratings":"Click to add ratings.",
	"text_error_ratings_renderMode_wsrp":"Please note that rating is not fully supported in WSRP scenarios. Please contact your administrator for help.",
	"text_community_tags_for_this_resource":"Public tags for this resource:",
	"deleteRating":"Delete",
	"title_ratingError_message":"Error - check console",
	"title_community_tags":"Tags: ",
	"text_error_tags_renderMode_wsrp":"Please note that tagging is not fully supported in WSRP scenarios. Please contact your administrator for help.",
	"text_no_tags":"No tags",
	"title_rating_distribution":"Rated ${0} time(s) with ${1} star(s)",
	"text_rating_saved":"Rating saved.",
	"title_all_rating":"All ratings",
	"title_delete_all_tags_of_name":"Delete all tags assigned to this resource with the name \"${0}\"",
	"Menu_public_tagging":"My public tags",
	"text_all_ratings_deleted":"All ratings have been successfully deleted.",
	"title_not_set":"No rating has been set, yet.",
	"rating_menu":"Rating Menu",
	"title_info":"Information",
	"title_hide_ratings":"Hide ratings",
	"text_loading":"Loading...",
	"title_your_rating":"My public rating:",
	"text_all_tags_deleted":"The selected public tags have been successfully deleted.",
	"add_tagging":"Add tag",
	"text_rating_deleted":"Rating deleted.",
	"text_tags_deleted":"you have deleted ${0} tag(s) ",
	"link_done":"Close",
	"title_done_with_tagging":"Done with tagging (unsaved changes will be lost)",
	"text_your_rating_for_this_resource":"Your rating for this resource:",
	"text_no_tags_on_this_resource":"There are no tags assigned to this resource.",
	"text_tag":"Tag \"${0}\"",
	"Menu_privateRating":"My private rating",
	"tagging_menu":"Tagging Menu",
	"title_delete_ratings_for_this_resource":"Delete all public ratings assigned to this resource",
	"Ratings":"ratings",
	"title_open_tags_widget":"Add tags",
	"ratingDescription_ratings":"ratings",
	"text_stars_count":"${0} star(s)",
	"link_delete":"Delete",
	"title_done_with_rating":"Done with rating (unsaved changes will be lost)",
	"title_confirmation":"Confirmation",
	"title_pub_tags":"My public tags: ",
	"title_error_message":"Error message",
	"title_priv_rating":"My private rating:",
	"text_community_rating_for_this_resource":"Public rating for this resource:",
	"title_view_ratings":"View ratings",
	"title_priv_tags":"My private tags: ",
	"title_more_tags":"More...",
	"Menu_tagging":"Tags",
	"text_tags_saved":"you have created ${0} tag(s) ",
	"title_delete_rating":"Delete rating",
	"title_your_tags":"Your tags",
	"button_save":"Save",
	"title_pub_rating":"Rating:",
	"title_input_tag_names":"Input field for tag names",
	"button_private":"Private",
	"Rating":"rating",
	"title_close_widget":"Close widget",
	"title_all_tags":"All tags",
	"text_you_have_no_tags_on_this_resource":"You have no tags assigned to this resource.",
	"text_error_tags_invalid":"Addition of tags failed due to invalid characters",
	"title_switch_to_community_view":"Switch to public view",
	"title_rating_percentage":"Rating: ${0} out of ${1}.",
	"text_rate":"Rate \"${0}\"",
	"Menu_rating":"Rating",
	"text_info_max_number_of_private_tags_reached":"You have reached the maximum number of private tags allowed for one user (${0} tags).",
	"title_submit_rating":"Submit rating",
	"text_your_tags_for_this_resource":"Your tags for this resource:",
	"ratingDescription_from":"from",
	"title_community_rating":"Public rating",
	"text_info_max_number_of_community_tags_reached":"The maximum number of allowed tags (set by your administrator) has been reached.",
	"Menu_private_tagging":"My private tags",
	"Menu_myRating":"My public rating\t",
	"text_error_tag_already_assigned":"You have already assigned one or more of the entered tags to this resource.",
	"text_info_max_number_of_public_tags_reached":"You have reached the maximum number of public tags allowed for one user (${0} tags)."
},i$.fromPath("dojoless_resource_AddTag",true));
})();
}catch(e){console.log("Module 'wp_tagging_rating_light': ",e);}
try{/** Licensed Materials - Property of IBM, 5724-U69, (C) Copyright IBM Corp. 2009, 2010 - All Rights reserved.  **/
var com_ibm_widgets_resolver=(function(){var _1="tagginglighterrorDiv_";var _2="tagginglighterrordivider_";var _3="tagginglighterrorlabel_";var _4="ratinglighterrorDiv_";var _5="ratinglighterrordivider_";var _6="ratinglighterrorlabel_";var _7="ratinglightmenulink_";var _8="tagginglightmenulink_";var _9="tagginglightAddTaglink_";var _a="tagginglightinputField_";var _b="errorMessagedividerShow";var _c="errorMessageStyleShow";var _d="errorMessagedivider";var _e="errorMessageStyle";var _f=function(_10,_11){if(typeof ibmCfg!="undefined"&&typeof ibmCfg.enablerConfig!="undefined"&&typeof ibmCfg.enablerConfig.isDebug!="undefined"&&typeof ibmCfg.enablerConfig.traceConfig!="undefined"){var _12=ibmCfg.enablerConfig.traceConfig;var _13=new RegExp(i$.isArray(_12)?_12.join("|"):_12);if(_13&&_13.test("com.ibm.widgets.TaggingAndRatingLight")){var msg="";var _14="";if(_11||(_11===0)||(_11===null)||(_11==="")){if(!i$.isArray(_11)){_14=_11;}else{if(_11&&_11.length>0){for(var arg in _11){if(_14===""){_14=_14+_11[arg];}else{_14=_14+", "+_11[arg];}}}}msg=msg+"Params [ "+_14+" ]";}console.log("com.ibm.widgets.TaggingAndRatingLight"+" "+_10+" "+msg);}}};var _15=function(_16,_17){var _18=i$.byId(_4+_16);var _19=i$.byId(_5+_16);var _1a=i$.byId(_6+_16);if(_1a!=null){_1a.innerHTML=_17.data.message;}if(_18!=null){_18.setAttribute("class",_c);}if(_19!=null){_19.setAttribute("class",_b);}};var _1b=function(_1c){var _1d=i$.byId(_4+_1c);var _1e=i$.byId(_5+_1c);if(_1d!=null){_1d.setAttribute("class",_e);}if(_1e!=null){_1e.setAttribute("class",_d);}};var _1f=function(_20){var _21=i$.byId(_4+_20);if(_21!=null&&_21.getElementsByTagName("img")!=null){var _22=_21.getElementsByTagName("img")[0];if(_22!=null){_22.setAttribute("alt",dojoless_resource_AddTag.title_ratingError_message);_22.setAttribute("title",dojoless_resource_AddTag.title_ratingError_message);}}var _23=i$.byId(_7+_20);if(_23!=null&&_23.getElementsByTagName("img")!=null){var _24=_23.getElementsByTagName("img")[0];if(_24!=null){_24.setAttribute("alt",dojoless_resource_AddTag.rating_menu);_24.setAttribute("title",dojoless_resource_AddTag.rating_menu);}}};var _25=function(_26){var _27=i$.byId(_1+_26);if(_27!=null&&_27.getElementsByTagName("img")!=null){var _28=_27.getElementsByTagName("img")[0];if(_28!=null){_28.setAttribute("alt",dojoless_resource_AddTag.title_title_taggingError_message);_28.setAttribute("title",dojoless_resource_AddTag.title_title_taggingError_message);}}var _29=i$.byId(_8+_26);if(_29!=null&&_29.getElementsByTagName("img")!=null){var _2a=_29.getElementsByTagName("img")[0];if(_2a!=null){_2a.setAttribute("alt",dojoless_resource_AddTag.tagging_menu);_2a.setAttribute("title",dojoless_resource_AddTag.tagging_menu);}}var _2b=i$.byId(_9+_26);if(_2b!=null&&_2b.getElementsByTagName("img")!=null){var _2c=_2b.getElementsByTagName("img")[0];if(_2c!=null){_2c.setAttribute("alt",dojoless_resource_AddTag.add_tagging);_2c.setAttribute("title",dojoless_resource_AddTag.add_tagging);}}var _2d=i$.byId(_a+_26);if(_2d!=null){_2d.setAttribute("alt",dojoless_resource_AddTag.add_tagging);_2d.setAttribute("title",dojoless_resource_AddTag.add_tagging);}};var _2e=function(_2f,_30){var _31={uri:"tm:ts:empty",rmparam:"rm:"+_2f.oid,"mime-type":"application/json"};if(_2f.query==null){_2f.query={scope:"ALL","max-results":"5","start-index":"0",orderMetric:"TAG_SPACE_COUNT_REVERSE_NAME",order:"DESC"};}_32(_31,_2f,_30);};var _33=function(_34,_35){var _36={uri:"rtm:rs:empty",rmparam:"rm:"+_34.oid,"mime-type":"application/json"};if(_34.query==null){_34.query={scope:"ALL"};}_32(_36,_34,_35);};var _32=function(_37,_38,_39){var _3a=ibmPortalConfig.contentHandlerURI;if(_3a!=null){if(_3a.indexOf("?")>0){_3a+="&";}else{_3a+="?";}}_3a+=i$.toQuery(_37)+"&"+i$.toQuery(_38.query)+"&"+Math.random();i$.xhrGet({url:_3a,headers:{"X-IBM-XHR":"true"},responseType:"text"}).then(function(_3b){if(_3b.data===""){}else{var _3c=i$.fromJson(_3b.data);var _3d=_3c["entry"];}var _3e;if(_37.uri=="tm:ts:empty"){var _3f=0;if(_3d!==undefined){_3f=_3d.length;}var _3e=new Array(_3f);for(var i=0;i<_3f;i++){_3e[i]={name:_3d[i]["title"]["$t"],count:_3d[i]["link"][0]["count"],id:_3d[i]["id"]};}}else{if(_3d===undefined){_3e=null;}else{numberOfRatings=_3d.length;var _3e=new Array(numberOfRatings);for(var i=0;i<numberOfRatings;i++){_3e[i]={name:_3d[i]["title"]["$t"],count:_3d[i]["link"][0]["count"]};}}}_39(_3e,_38);},function(_40){console.error("Error case: ",_40);if(_40!=null&&_40.xhr!=null&&_40.xhr.status!=null&&_40.xhr.status==401){window.setTimeout(function(){document.location.reload();},0);}else{if(_37.uri=="tm:ts:empty"){_41(_38.oid,_40);}if(_37.uri=="rtm:rs:empty"){_15(_38.oid,_40);}}});};var _41=function(_42,_43){var _44=i$.byId(_1+_42);var _45=i$.byId(_2+_42);var _46=i$.byId(_3+_42);if(_46!=null){_46.innerHTML=_43.data.message;}if(_44!=null){_44.setAttribute("class",_c);}if(_45!=null){_45.style.display="inline-block";}};var _47=function(_48,_49){var _4a=i$.byId(_1+_48);var _4b=i$.byId(_2+_48);var _4c=i$.byId(_3+_48);if(_4c!=null){_4c.innerHTML=_49;}if(_4a!=null){_4a.setAttribute("class",_c);}if(_4b!=null){_4b.style.display="inline-block";}};var _4d=function(_4e){var _4f=i$.byId(_1+_4e);var _50=i$.byId(_2+_4e);if(_4f!=null){_4f.setAttribute("class",_e);}if(_50!=null){_50.style.display="none";}};var _51=function(){this.template="";this.template+="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n";this.template+="<atom:feed xmlns:atom=\"http://www.w3.org/2005/Atom\" xmlns:xml=\"http://www.w3.org/XML/1998/namespace\" xmlns:ext=\"http://www.ibm.com/xmlns/prod/websphere/portal/v6.0.1/portal-model\" xmlns:creationcontext=\"http://www.ibm.com/xmlns/prod/websphere/portal/v6.1.0/portal-creation-context\">\n";this.template+="<atom:author>\n";this.template+="<atom:name>IBM WebSphere Portal/8.0</atom:name>\n";this.template+="</atom:author>\n";this.template+="<atom:title>WebSphere Portal Server TagSpace Feed</atom:title>\n";this.template+="<atom:link href=\".\" rel=\"self\" type=\"application/atom+xml\"/>\n";this.template+="<atom:entry creationcontext:private=\"${isPrivate}\">\n";this.template+="<atom:title xml:lang=\"${locale}\">${tagname}</atom:title>\n";this.template+="<atom:id>tm:cid:${id}</atom:id>\n";this.template+="<atom:link ext:uri=\"rm:${resourceURI}\" rel=\"replies\" href=\"example.org\"/>\n";this.template+="${category}";this.template+="</atom:entry>\n";this.template+="</atom:feed>\n";this.getRequest=function(tag){if(tag.isPrivate==null){var _52=false;}else{var _52=tag.isPrivate;}if(tag.locale==null){var _53="en";}else{var _53=tag.locale;}if(tag.id==null){var id="0";}else{var id=tag.id;}if(tag.category==null){var _54="";}else{var _54="<atom:category term=\""+tag.category+"\"/>\n";}var _55=this.template;_55=_55.replace("${tagname}",tag.name);_55=_55.replace("${resourceURI}",tag.oid);_55=_55.replace("${isPrivate}",_52);_55=_55.replace("${locale}",_53);_55=_55.replace("${id}",id);_55=_55.replace("${category}",_54);return _55;};};var _56=new _51();var Tag=function(_57,oid){this.name=_57;this.oid=oid;this.isPrivate=false;this.locale="en";this.id=115;this.category="books";this.display=function(){return "URL: "+this.oid+", tag: "+this.name;};};var _58=function(tag){request=_56.getRequest(tag);var _59=tag.oid;_5a(request,_59,_5b);};var _5a=function(_5c,_5d,_5e){var _5f=ibmPortalConfig.contentHandlerURI;if(_5f!=null){if(_5f.indexOf("?")>0){_5f+="&";}else{_5f+="?";}}var _60="uri=";var _61="tm:ts:all";var _62="&mime-type=application/json";var _63=_5f+_60+_61;i$.xhrPost({url:_63,postData:_5c,headers:{"content-type":"application/xml"}}).then(function(_64){var _65=com_ibm_widgets_tagging.getCurrentDisplayedCount(_5d);var _66=com_ibm_widgets_tagging.getCurrentDisplayedTagScope(_5d);com_ibm_widgets_tagging.setPlusClicked(_5d,false);_5e(_5d,_66,_65,com_ibm_widgets_tagging.displayTagsLight);},function(_67){console.error("Error case: ",_67);if(_67!=null&&_67.xhr!=null&&_67.xhr.status!=null&&_67.xhr.status==400){_67.data.message=dojoless_resource_AddTag.text_error_tags_invalid;}else{if(_67!=null&&_67.xhr!=null&&_67.xhr.status!=null&&_67.xhr.status==403){_67.data.message=dojoless_resource_AddTag.text_error_tags_too_long;}else{if(_67!=null&&_67.xhr!=null&&_67.xhr.status!=null&&_67.xhr.status==401){window.setTimeout(function(){document.location.reload();},0);}}}_41(_5d,_67);});};var _5b=function(_68,_69,_6a,_6b){var _6c=i$.byId(com_ibm_widgets_tagging.TAGGING_WIDGET_TAGS_ID_PREFIX+_68);if(_6c.getAttribute("customLabel")==null||_6c.getAttribute("customLabel")=="undefined"){if(ibmPortalCPConfig.tagging.inline.customLabel!==null&&typeof ibmPortalCPConfig.tagging.inline.customLabel!=="undefined"){customLabel=ibmPortalCPConfig.tagging.inline.customLabel;}else{customLabel=null;}}else{customLabel=_6c.getAttribute("customLabel");}var _6d=com_ibm_widgets_tagging.TAGGING_WIDGET_ID_PREFIX+_6a;var _6e=null;switch(_69){case ("PERSONAL_PRIVATE"):_6e=["personal_private"];break;case ("PERSONAL_PUBLIC"):_6e=["personal_public"];break;case ("COMMUNITY_PERSONAL_PUBLIC"):_6e=["community","personal_public"];break;default:_6e=["community","personal_public"];break;}var _6f={"oid":_68,"tagListParentId":_6d,"tagsClickable":_6c.getAttribute("tagsClickable")||ibmPortalCPConfig.tagging.inline.tagsClickable,"tagClickActionMode":_6c.getAttribute("tagClickActionMode")||ibmPortalCPConfig.tagging.inline.tagClickActionMode,"showDialogLauncher":_6c.getAttribute("showDialogLauncher")||ibmPortalCPConfig.tagging.inline.showDialogLauncher,"maxResults":_6c.getAttribute("maxResults")||ibmPortalCPConfig.tagging.inline.maxResults,"customMessageNoTags":_6c.getAttribute("customMessageNoTags")||dojoless_resource_AddTag.text_no_tags,"countsEnabled":_6c.getAttribute("countsEnabled")||ibmPortalCPConfig.tagging.inline.countsEnabled,"customLabel":_6c.getAttribute("customLabel")||ibmPortalCPConfig.tagging.inline.customLabel,"tagClickTransmitScopes":_6c.getAttribute("tagClickTransmitScopes")||ibmPortalCPConfig.tagging.inline.tagClickTransmitScopes,"privateTaggingEnabled":_6c.getAttribute("privateTaggingEnabled")||ibmPortalCPConfig.tagging.inline.privateTaggingEnabled,"resourceType":_6c.getAttribute("resourceType")||ibmPortalCPConfig.tagging.inline.resourceType,"customLabelCommunityTags":_6c.getAttribute("customLabelCommunityTags")||ibmPortalCPConfig.tagging.inline.customLabelCommunityTags,"customLabelPersonalPublicTags":_6c.getAttribute("customLabelPersonalPublicTags")||ibmPortalCPConfig.tagging.inline.customLabelPersonalPublicTags,"customLabelPersonalPrivateTags":_6c.getAttribute("customLabelPersonalPrivateTags")||ibmPortalCPConfig.tagging.inline.customLabelPersonalPrivateTags,"showAllTags":false};_6f.query={"order":_6c.getAttribute("order")||ibmPortalCPConfig.tagging.inline.order,"orderMetric":_6c.getAttribute("orderMetric")||ibmPortalCPConfig.tagging.inline.orderMetric,"scope":_6e,"resourceCategories":_6c.getAttribute("resourceCategories")||ibmPortalCPConfig.tagging.inline.resourceCategories};_2e(_6f,_6b);};var _70=function(_71,_72,_73){var _74=null;switch(_72){case ("PERSONAL_PRIVATE"):_74=["personal_private"];break;case ("PERSONAL_PUBLIC"):_74=["personal_public"];break;case ("COMMUNITY_PERSONAL_PUBLIC"):_74=["community","personal_public"];break;default:_74=["community","personal_public"];break;}var _75=i$.byId(com_ibm_widgets_rating.RATINGWIDGET_STARS_DIV_PREFIX+_71);if(_75.getAttribute("ratingDescription")==null||_75.getAttribute("ratingDescription")=="undefined"){if(ibmPortalCPConfig.rating.inline.ratingDescription!==null&&typeof ibmPortalCPConfig.rating.inline.ratingDescription!=="undefined"){ratingDescription=ibmPortalCPConfig.rating.inline.ratingDescription.toUpperCase();}else{ratingDescription="ALL";}}else{ratingDescription=_75.getAttribute("ratingDescription");}if(_75.getAttribute("numStars")==null||_75.getAttribute("numStars")=="undefined"){if(ibmPortalCPConfig.rating.inline.numStars!==null&&typeof ibmPortalCPConfig.rating.inline.numStars!=="undefined"){numStars=ibmPortalCPConfig.rating.inline.numStars;}else{numStars=5;}}else{numStars=_75.getAttribute("numStars");}if(_75.getAttribute("customLabel")==null||_75.getAttribute("customLabel")=="undefined"){if(ibmPortalCPConfig.rating.inline.customLabel!==null&&typeof ibmPortalCPConfig.rating.inline.customLabel!=="undefined"){customLabel=ibmPortalCPConfig.rating.inline.customLabel;}else{customLabel=null;}}else{customLabel=_75.getAttribute("customLabel");}var _76;var _77;var _78;if(_75.getAttribute("customLabelCommunityRatings")==null||_75.getAttribute("customLabelCommunityRatings")=="undefined"){if(ibmPortalCPConfig.rating.inline.customLabelCommunityRatings!==null&&typeof ibmPortalCPConfig.rating.inline.customLabelCommunityRatings!=="undefined"){_76=ibmPortalCPConfig.rating.inline.customLabelCommunityRatings;}else{_76=null;}}else{_76=_75.getAttribute("customLabelCommunityRatings");}if(_75.getAttribute("customLabelPersonalPublicRatings")==null||_75.getAttribute("customLabelPersonalPublicRatings")=="undefined"){if(ibmPortalCPConfig.rating.inline.customLabelPersonalPublicRatings!==null&&typeof ibmPortalCPConfig.rating.inline.customLabelPersonalPublicRatings!=="undefined"){_77=ibmPortalCPConfig.rating.inline.customLabelPersonalPublicRatings.toUpperCase();}else{_77=null;}}else{_77=_75.getAttribute("customLabelPersonalPublicRatings");}if(_75.getAttribute("customLabelPersonalPrivateRatings")==null||_75.getAttribute("customLabelPersonalPrivateRatings")=="undefined"){if(ibmPortalCPConfig.rating.inline.customLabelPersonalPrivateRatings!==null&&typeof ibmPortalCPConfig.rating.inline.customLabelPersonalPrivateRatings!=="undefined"){_78=ibmPortalCPConfig.rating.inline.customLabelPersonalPrivateRatings.toUpperCase();}else{_78=null;}}else{_78=_75.getAttribute("customLabelPersonalPrivateRatings");}var _79={"oid":_71,"customLabel":customLabel,"customLabelCommunityRatings":_76,"customLabelPersonalPublicRatings":_77,"customLabelPersonalPrivateRatings":_78,"scope":_74,"ratingDescription":ratingDescription,"numStars":numStars};_79.query={"oid":_71,"customLabel":customLabel,"customLabelCommunityRatings":_76,"customLabelPersonalPublicRatings":_77,"customLabelPersonalPrivateRatings":_78,"scope":_74,"ratingDescription":ratingDescription,"numStars":numStars};_33(_79,_73);};var _7a=function(_7b,_7c,_7d,_7e){var _7f=null;_7f=["personal_public"];var _80=i$.byId(com_ibm_widgets_rating.RATINGWIDGET_STARS_DIV_PREFIX+_7b);if(_80.getAttribute("numStars")==null||_80.getAttribute("numStars")=="undefined"){if(ibmPortalCPConfig.rating.inline.numStars!==null&&typeof ibmPortalCPConfig.rating.inline.numStars!=="undefined"){numStars=ibmPortalCPConfig.rating.inline.numStars;}else{numStars=5;}}else{numStars=_80.getAttribute("numStars");}if(_80.getAttribute("customLabel")==null||_80.getAttribute("customLabel")=="undefined"){if(ibmPortalCPConfig.rating.inline.customLabel!==null&&typeof ibmPortalCPConfig.rating.inline.customLabel!=="undefined"){customLabel=ibmPortalCPConfig.rating.inline.customLabel;}else{customLabel=null;}}else{customLabel=_80.getAttribute("customLabel");}var _81;var _82;var _83;if(_80.getAttribute("customLabelCommunityRatings")==null||_80.getAttribute("customLabelCommunityRatings")=="undefined"){if(ibmPortalCPConfig.rating.inline.customLabelCommunityRatings!==null&&typeof ibmPortalCPConfig.rating.inline.customLabelCommunityRatings!=="undefined"){_81=ibmPortalCPConfig.rating.inline.customLabelCommunityRatings;}else{_81=null;}}else{_81=_80.getAttribute("customLabelCommunityRatings");}if(_80.getAttribute("customLabelPersonalPublicRatings")==null||_80.getAttribute("customLabelPersonalPublicRatings")=="undefined"){if(ibmPortalCPConfig.rating.inline.customLabelPersonalPublicRatings!==null&&typeof ibmPortalCPConfig.rating.inline.customLabelPersonalPublicRatings!=="undefined"){_82=ibmPortalCPConfig.rating.inline.customLabelPersonalPublicRatings.toUpperCase();}else{_82=null;}}else{_82=_80.getAttribute("customLabelPersonalPublicRatings");}if(_80.getAttribute("customLabelPersonalPrivateRatings")==null||_80.getAttribute("customLabelPersonalPrivateRatings")=="undefined"){if(ibmPortalCPConfig.rating.inline.customLabelPersonalPrivateRatings!==null&&typeof ibmPortalCPConfig.rating.inline.customLabelPersonalPrivateRatings!=="undefined"){_83=ibmPortalCPConfig.rating.inline.customLabelPersonalPrivateRatings.toUpperCase();}else{_83=null;}}else{_83=_80.getAttribute("customLabelPersonalPrivateRatings");}var _84={"oid":_7b,"customLabel":customLabel,"customLabelCommunityRatings":_81,"customLabelPersonalPublicRatings":_82,"customLabelPersonalPrivateRatings":_83,"scope":_7f,"numStars":numStars,"ratingValue":_7d};_84.query={"oid":_7b,"customLabel":customLabel,"customLabelCommunityRatings":_81,"customLabelPersonalPublicRatings":_82,"customLabelPersonalPrivateRatings":_83,"scope":_7f,"numStars":numStars,"ratingValue":_7d};_33(_84,_7e);};var _85=function(_86,_87,_88,_89){var _8a=null;switch(_87){case ("PERSONAL_PRIVATE"):_8a=["personal_private"];break;case ("PERSONAL_PUBLIC"):_8a=["personal_public"];break;case ("COMMUNITY_PERSONAL_PUBLIC"):_8a=["community","personal_public"];break;default:_8a=["community","personal_public"];break;}var _8b=i$.byId(com_ibm_widgets_rating.RATINGWIDGET_STARS_DIV_PREFIX+_86);if(_8b.getAttribute("ratingDescription")==null||_8b.getAttribute("ratingDescription")=="undefined"){if(ibmPortalCPConfig.rating.inline.ratingDescription!==null&&typeof ibmPortalCPConfig.rating.inline.ratingDescription!=="undefined"){ratingDescription=ibmPortalCPConfig.rating.inline.ratingDescription.toUpperCase();}else{ratingDescription="ALL";}}else{ratingDescription=_8b.getAttribute("ratingDescription");}if(_8b.getAttribute("numStars")==null||_8b.getAttribute("numStars")=="undefined"){if(ibmPortalCPConfig.rating.inline.numStars!==null&&typeof ibmPortalCPConfig.rating.inline.numStars!=="undefined"){numStars=ibmPortalCPConfig.rating.inline.numStars;}else{numStars=5;}}else{numStars=_8b.getAttribute("numStars");}if(_8b.getAttribute("customLabel")==null||_8b.getAttribute("customLabel")=="undefined"){if(ibmPortalCPConfig.rating.inline.customLabel!==null&&typeof ibmPortalCPConfig.rating.inline.customLabel!=="undefined"){customLabel=ibmPortalCPConfig.rating.inline.customLabel;}else{customLabel=null;}}else{customLabel=_8b.getAttribute("customLabel");}var _8c;var _8d;var _8e;if(_8b.getAttribute("customLabelCommunityRatings")==null||_8b.getAttribute("customLabelCommunityRatings")=="undefined"){if(ibmPortalCPConfig.rating.inline.customLabelCommunityRatings!==null&&typeof ibmPortalCPConfig.rating.inline.customLabelCommunityRatings!=="undefined"){_8c=ibmPortalCPConfig.rating.inline.customLabelCommunityRatings;}else{_8c=null;}}else{_8c=_8b.getAttribute("customLabelCommunityRatings");}if(_8b.getAttribute("customLabelPersonalPublicRatings")==null||_8b.getAttribute("customLabelPersonalPublicRatings")=="undefined"){if(ibmPortalCPConfig.rating.inline.customLabelPersonalPublicRatings!==null&&typeof ibmPortalCPConfig.rating.inline.customLabelPersonalPublicRatings!=="undefined"){_8d=ibmPortalCPConfig.rating.inline.customLabelPersonalPublicRatings.toUpperCase();}else{_8d=null;}}else{_8d=_8b.getAttribute("customLabelPersonalPublicRatings");}if(_8b.getAttribute("customLabelPersonalPrivateRatings")==null||_8b.getAttribute("customLabelPersonalPrivateRatings")=="undefined"){if(ibmPortalCPConfig.rating.inline.customLabelPersonalPrivateRatings!==null&&typeof ibmPortalCPConfig.rating.inline.customLabelPersonalPrivateRatings!=="undefined"){_8e=ibmPortalCPConfig.rating.inline.customLabelPersonalPrivateRatings.toUpperCase();}else{_8e=null;}}else{_8e=_8b.getAttribute("customLabelPersonalPrivateRatings");}var _8f={"oid":_86,"customLabel":customLabel,"customLabelCommunityRatings":_8c,"customLabelPersonalPublicRatings":_8d,"customLabelPersonalPrivateRatings":_8e,"scope":_8a,"ratingDescription":ratingDescription,"numStars":numStars};_8f.query={"oid":_86,"customLabel":customLabel,"customLabelCommunityRatings":_8c,"customLabelPersonalPublicRatings":_8d,"customLabelPersonalPrivateRatings":_8e,"scope":_8a,"ratingDescription":ratingDescription,"numStars":numStars};var _90=new Array(1);_90[0]={name:_88,count:"1"};var _91=!ibmPortalConfig.isUserLoggedIn;if(_91&&_87=="PERSONAL_PUBLIC"){_89(_90,_8f);}else{_33(_8f,_89);}};var _92=function(_93,_94){var _95=i$.byId(com_ibm_widgets_rating.RATINGWIDGET_PREFIX+_93);var _96=_94;if(_94=="COMMUNITY_PERSONAL_PUBLIC"){_96=["community","personal_public"];}var _97={"oid":_93,"scope":_96};_97.query={"oid":_93,"scope":_96};var _98={uri:"rtm:empty",rmparam:"rm:"+_97.oid,"mime-type":"application/json"};var _99={"scope":_96};_99.query={"scope":_96};var _9a=ibmPortalConfig.contentHandlerURI;if(_9a!=null){if(_9a.indexOf("?")>0){_9a+="&";}else{_9a+="?";}}_9a+=i$.toQuery(_98)+"&"+i$.toQuery(_99.query)+"&"+Math.random();i$.xhrGet({url:_9a,headers:{"X-IBM-XHR":"true"},responseType:"text"}).then(function(_9b){if(_9b.data===""){}else{var _9c=i$.fromJson(_9b.data);var _9d=_9c["entry"];}var _9e;if(_98.uri=="tm:ts:empty"){}else{if(_9d===undefined){_9e=null;}else{numberOfRatings=_9d.length;if(numberOfRatings==1){var _9e=null;_9e={id:_9d[0].id};_a0(_9e.id,_98,_97,com_ibm_widgets_resolver.fetchSpecificScopeRatings);}else{var i=0;for(i=0;i<numberOfRatings;i++){var _9e=null;_9e={id:_9d[i].id};_a0(_9e.id,_98,_97,com_ibm_widgets_resolver.fetchSpecificScopeRatings);}}}}},function(_9f){console.error("Error case: ",_9f);if(_9f!=null&&_9f.xhr!=null&&_9f.xhr.status!=null&&_9f.xhr.status==401){window.setTimeout(function(){document.location.reload();},0);}else{_15(_97.oid,_9f);}});};var _a0=function(_a1,_a2,_a3,_a4){var _a2={uri:_a1,"mime-type":"application/json"};var _a5={"scope":_a3.scope};_a5.query={"scope":_a3.scope};var _a6=ibmPortalConfig.contentHandlerURI;if(_a6!=null){if(_a6.indexOf("?")>0){_a6+="&";}else{_a6+="?";}}_a6+=i$.toQuery(_a2)+"&"+i$.toQuery(_a5.query)+"&"+Math.random();i$.xhrDelete({url:_a6,headers:{"X-IBM-XHR":"true"},responseType:"text"}).then(function(_a7){_a4(_a3.oid,_a3.scope,com_ibm_widgets_rating.displayDojolessRatings);},function(_a8){console.error("Error case: ",_a8);if(_a8!=null&&_a8.xhr!=null&&_a8.xhr.status!=null&&_a8.xhr.status==401){window.setTimeout(function(){document.location.reload();},0);}else{_15(_a3.oid,_a8);}});};var _a9=function(_aa,_ab){var _ac=i$.byId(com_ibm_widgets_rating.RATINGWIDGET_PREFIX+_aa);var _ad=_ab;if(_ab=="COMMUNITY_PERSONAL_PUBLIC"){_ad=["community","personal_public"];}var _ae={"oid":_aa,"scope":_ad};_ae.query={"oid":_aa,"scope":_ad};var _af={uri:"rtm:rs:empty",rmparam:"rm:"+_ae.oid,"mime-type":"application/json"};var _b0=ibmPortalConfig.contentHandlerURI;if(_b0!=null){if(_b0.indexOf("?")>0){_b0+="&";}else{_b0+="?";}}_b0+=i$.toQuery(_af)+"&"+Math.random();i$.xhrGet({url:_b0,headers:{"X-IBM-XHR":"true"},responseType:"text"}).then(function(_b1){if(_b1.data!=null&&_b1.data!=""){var _b2=i$.fromJson(_b1.data);var _b3=_b2["entry"];}var _b4;if(_af.uri=="rtm:rs:empty"){if(_b3===undefined){_b4=null;}else{numberOfRatings=_b3.length;var _b4=null;var _b5=_b3[0];if(_b5!=null){var _b6=_b5.link;}if(_b6!=null){var _b7=_b6[2].href;}if(_b7!=null){_b4={id:_b7};_b9(_b4.id,_af,_ae,com_ibm_widgets_resolver.fetchSpecificScopeRatings);}}}},function(_b8){console.error("Error case: ",_b8);if(_b8!=null&&_b8.xhr!=null&&_b8.xhr.status!=null&&_b8.xhr.status==401){window.setTimeout(function(){document.location.reload();},0);}else{_15(_ae.oid,_b8);}});};var _b9=function(_ba,_bb,_bc,_bd){var _bb={uri:_ba,"mime-type":"application/json"};var _be;if(_bc.scope=="COMMUNITY_PERSONAL_PUBLIC"){_be=["community","personal_public"];}var _bf={"scope":_be};_bf.query={"scope":_be};var _c0=ibmPortalConfig.contentHandlerURI;if(_c0!=null){if(_c0.indexOf("?")>0){_c0+="&";}else{_c0+="?";}}_c0+=i$.toQuery(_bb)+"&"+i$.toQuery(_bf.query)+"&"+Math.random();_c0=_ba;i$.xhrDelete({url:_c0,headers:{"X-IBM-XHR":"true"},responseType:"text"}).then(function(_c1){_bd(_bc.oid,_bc.scope,com_ibm_widgets_rating.displayDojolessRatings);},function(_c2){console.error("Error case: ",_c2);if(_c2!=null&&_c2.xhr!=null&&_c2.xhr.status!=null&&_c2.xhr.status==401){window.setTimeout(function(){document.location.reload();},0);}else{_15(_bc.oid,_c2);}});};var _c3=function(){this.template="";this.template+="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n";this.template+="<atom:feed xmlns:atom=\"http://www.w3.org/2005/Atom\" xmlns:xml=\"http://www.w3.org/XML/1998/namespace\" xmlns:ext=\"http://www.ibm.com/xmlns/prod/websphere/portal/v6.0.1/portal-model\" xmlns:creationcontext=\"http://www.ibm.com/xmlns/prod/websphere/portal/v6.1.0/portal-creation-context\">\n";this.template+="<atom:author>\n";this.template+="<atom:name>IBM WebSphere Portal/8.0</atom:name>\n";this.template+="</atom:author>\n";this.template+="<atom:title>WebSphere Portal Server RatingSpace Feed</atom:title>\n";this.template+="<atom:link href=\".\" rel=\"self\" type=\"application/atom+xml\"/>\n";this.template+="<atom:entry creationcontext:private=\"${isPrivate}\">\n";this.template+="<atom:title >${tagname}</atom:title>\n";this.template+="<atom:id>rm:cid:${id}</atom:id>\n";this.template+="<atom:link ext:uri=\"rm:${resourceURI}\" rel=\"replies\" href=\"example.org\"/>\n";this.template+="${category}";this.template+="</atom:entry>\n";this.template+="</atom:feed>\n";this.getRequest=function(_c4){var _c5=this.template;_c5=_c5.replace("${tagname}",_c4.name);_c5=_c5.replace("${resourceURI}",_c4.oid);_c5=_c5.replace("${isPrivate}",_c4.isPrivate);_c5=_c5.replace("${id}",_c4.id);return _c5;};};var _c6=new _c3();var _c7=function(_c8,_c9,_ca,_cb){var _cc;if(_c9=="PERSONAL_PUBLIC"){scopeIsPrivate="false";}else{scopeIsPrivate="true";}var _cd={name:_ca,oid:_c8,isPrivate:scopeIsPrivate};request=_c6.getRequest(_cd);var _ce=!ibmPortalConfig.isUserLoggedIn;if(!_ce){_cf(request,_c8,_cb);}else{_d0(request,_c8,_ca,_cb);}};var _cf=function(_d1,oid,_d2){var _d3=ibmPortalConfig.contentHandlerURI;if(_d3!=null){if(_d3.indexOf("?")>0){_d3+="&";}else{_d3+="?";}}var _d4="uri=";var _d5="rtm:rs:"+"all";var _d6="&mime-type=application/json";var _d7=_d3+_d4+_d5+"&"+Math.random();i$.xhrPost({url:_d7,postData:_d1,headers:{"content-type":"application/xml","X-IBM-XHR":"true"}}).then(function(_d8){_d2(oid,com_ibm_widgets_rating.getCurrentDisplayedScope(oid),com_ibm_widgets_rating.displayDojolessRatings);},function(_d9){console.error("Error case: ",_d9);if(_d9!=null&&_d9.xhr!=null&&_d9.xhr.status!=null&&_d9.xhr.status==401){window.setTimeout(function(){document.location.reload();},0);}else{_15(oid,_d9);}});};var _d0=function(_da,oid,_db,_dc){var _dd=ibmPortalConfig.contentHandlerURI;if(_dd!=null){if(_dd.indexOf("?")>0){_dd+="&";}else{_dd+="?";}}var _de="uri=";var _df="rtm:rs:"+"all";var _e0="&mime-type=application/json";var _e1=_dd+_de+_df+"&"+Math.random();i$.xhrPost({url:_e1,postData:_da,headers:{"content-type":"application/xml","X-IBM-XHR":"true"}}).then(function(_e2){var _e3=new Array(1);_e3[0]={name:"0",count:"0"};var _e4=!ibmPortalConfig.isUserLoggedIn;_dc(oid,com_ibm_widgets_rating.getCurrentDisplayedScope(oid),_db,com_ibm_widgets_rating.displayDojolessRatings);},function(_e5){console.error("Error case: ",_e5);if(_e5!=null&&_e5.xhr!=null&&_e5.xhr.status!=null&&_e5.xhr.status==401){window.setTimeout(function(){document.location.reload();},0);}else{_15(oid,_e5);}});};var _e6=function(){this.editRatingtemplate="";this.editRatingtemplate+="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n";this.editRatingtemplate+="<atom:feed xmlns:atom=\"http://www.w3.org/2005/Atom\" xmlns:xml=\"http://www.w3.org/XML/1998/namespace\" xmlns:ext=\"http://www.ibm.com/xmlns/prod/websphere/portal/v6.0.1/portal-model\" xmlns:creationcontext=\"http://www.ibm.com/xmlns/prod/websphere/portal/v6.1.0/portal-creation-context\">\n";this.editRatingtemplate+="<atom:author>\n";this.editRatingtemplate+="<atom:name>IBM WebSphere Portal/8.0</atom:name>\n";this.editRatingtemplate+="</atom:author>\n";this.editRatingtemplate+="<atom:title>WebSphere Portal Server RatingSpace Feed</atom:title>\n";this.editRatingtemplate+="<atom:id>rtm:rs:empty</atom:id>\n";this.editRatingtemplate+="<atom:link href=\".\" rel=\"self\" type=\"application/atom+xml\"/>\n";this.editRatingtemplate+="<atom:entry xmlns:atom=\"http://www.w3.org/2005/Atom\">\n";this.editRatingtemplate+="<atom:title >${tagname}</atom:title>\n";this.editRatingtemplate+="<atom:author>\n";this.editRatingtemplate+="<atom:name>wpsadmin</atom:name>\n";this.editRatingtemplate+="<atom:uri>um:oid:Z9eAeI9D8MQCCNHC8JM472JPCMMG613DEJM4CH9PGJM06O1D03Q47I1EA3H9CN1</atom:uri>\n";this.editRatingtemplate+="</atom:author>\n";this.editRatingtemplate+="<atom:id>rtm:oid:${id}</atom:id>\n";this.editRatingtemplate+="</atom:entry>\n";this.editRatingtemplate+="</atom:feed>\n";this.getEditRatingRequest=function(_e7){var _e8=this.editRatingtemplate;_e8=_e8.replace("${tagname}",_e7.name);_e8=_e8.replace("${resourceURI}",_e7.resourceID);_e8=_e8.replace("${isPrivate}",false);_e8=_e8.replace("${id}",_e7.id);return _e8;};};var _e9=new _e6();var _ea=function(_eb,_ec,_ed,_ee){var _ef={uri:"rtm:empty",rmparam:"rm:"+_eb,"mime-type":"application/json"};var _f0={"oid":_eb,"scope":_ec};_f0.query={"oid":_eb,"scope":_ec};var _f1=ibmPortalConfig.contentHandlerURI;if(_f1!=null){if(_f1.indexOf("?")>0){_f1+="&";}else{_f1+="?";}}_f1+=i$.toQuery(_ef)+"&"+i$.toQuery(_f0.query)+"&"+Math.random();i$.xhrGet({url:_f1,headers:{"X-IBM-XHR":"true"},responseType:"text"}).then(function(_f2){if(_f2.data===""){}else{var _f3=i$.fromJson(_f2.data);var _f4=_f3["entry"];}var _f5;if(_ef.uri=="tm:ts:empty"){}else{if(_f4===undefined){_f5=null;}else{numberOfRatings=_f4.length;var _f5=null;_f5={id:_f4[0]["id"],name:_f4[0]["title"]["$t"],count:_f4[0]["link"][0]["count"]};var _f6={name:_ed,oid:_f5.id,resourceID:_f0.oid};editRatingrequest=_e9.getEditRatingRequest(_f6);_f8(editRatingrequest,_eb,_f5.id,_ee);}}},function(_f7){console.error("Error case: ",_f7);if(_f7!=null&&_f7.xhr!=null&&_f7.xhr.status!=null&&_f7.xhr.status==401){window.setTimeout(function(){document.location.reload();},0);}else{_15(_f0.oid,_f7);}});};var _f8=function(_f9,oid,id,_fa){var _fb=ibmPortalConfig.contentHandlerURI;var _fc={uri:id,rep:"empty",mode:"merge",};if(_fb!=null){if(_fb.indexOf("?")>0){_fb+="&";}else{_fb+="?";}}var _fd=_fb+i$.toQuery(_fc);i$.xhrPut({url:_fd,postData:_f9,headers:{"content-type":"application/xml","X-IBM-XHR":"true"}}).then(function(_fe){_fa(oid,com_ibm_widgets_rating.getCurrentDisplayedScope(oid),com_ibm_widgets_rating.displayDojolessRatings);},function(_ff){console.error("Error case: ",_ff);if(_ff!=null&&_ff.xhr!=null&&_ff.xhr.status!=null&&_ff.xhr.status==401){window.setTimeout(function(){document.location.reload();},0);}else{_15(oid,_ff);}});};var _100=function(_101,_102,_103){var _104={uri:"tm:name:"+_103,rmparam:"rm:"+_101.oid,"mime-type":"application/json"};var _105=com_ibm_widgets_tagging.getCurrentDisplayedTagScope(_101.oid);var _106={"scope":_105};_106.query={"scope":_105};var _107=ibmPortalConfig.contentHandlerURI;if(_107!=null){if(_107.indexOf("?")>0){_107+="&";}else{_107+="?";}}_107+=i$.toQuery(_104)+"&"+i$.toQuery(_106.query)+"&"+Math.random();i$.xhrGet({url:_107,scope:_105,responseType:"text",}).then(function(_108){if(_108.data===""){}else{var _109=i$.fromJson(_108.data);var _10a=_109["entry"];}var torR;var _10b=0;if(_10a!==undefined){_10b=_10a.length;}var torR=new Array(_10b);for(var i=0;i<_10b;i++){torR[i]={name:_10a[i]["title"]["$t"],id:_10a[i].id};_10d(torR[i].id,_104,_101,_102);}},function(_10c){console.error("Error case: ",_10c);if(_10c!=null&&_10c.xhr!=null&&_10c.xhr.status!=null&&_10c.xhr.status==401){window.setTimeout(function(){document.location.reload();},0);}else{_41(_101.oid,_10c);}});};var _10d=function(_10e,_10f,_110,_111){var _10f={uri:_10e,"mime-type":"application/json"};var _112=ibmPortalConfig.contentHandlerURI;if(_112!=null){if(_112.indexOf("?")>0){_112+="&";}else{_112+="?";}}_112+=i$.toQuery(_10f)+"&"+i$.toQuery(_110.query)+"&"+Math.random();i$.xhrDelete({url:_112,responseType:"text"}).then(function(_113){var _114=com_ibm_widgets_tagging.getCurrentDisplayedCount(_110.oid);var _115=com_ibm_widgets_tagging.getCurrentDisplayedTagScope(_110.oid);_111(_110.oid,_115,_114,com_ibm_widgets_tagging.displayTagsLight);},function(_116){console.error("Error case: ",_116);if(_116!=null&&_116.xhr!=null&&_116.xhr.status!=null&&_116.xhr.status==401){window.setTimeout(function(){document.location.reload();},0);}else{_41(_110.oid,_116);}});};var _117=function(_118,_119,_11a){var _11b={uri:"tm:name:"+_11a,rmparam:"rm:"+_118,"mime-type":"application/json"};var _11c=com_ibm_widgets_tagging.getCurrentDisplayedTagScope(_118);var _11d={"scope":_11c};_11d.query={"scope":_11c};var _11e=ibmPortalConfig.contentHandlerURI;if(_11e.indexOf("?")>0){_11e+="&";}else{_11e+="?";}_11e+=i$.toQuery(_11b)+"&"+i$.toQuery(_11d.query)+"&"+Math.random();i$.xhrGet({url:_11e,scope:_11c,responseType:"text",}).then(function(_11f){if(_11f.data===""){console.log("Data is empty string.");}else{var _120=i$.fromJson(_11f.data);var _121=_120["entry"];}var torR;var _122=0;if(_121!==undefined){_122=_121.length;}var torR=new Array(_122);for(var i=0;i<_122;i++){torR[i]={name:_121[i]["title"]["$t"],id:_121[i].id};_124(torR[i].id,_11b,_118,_119);}},function(_123){console.error("Error case: ",_123);if(_123!=null&&_123.xhr!=null&&_123.xhr.status!=null&&_123.xhr.status==401){window.setTimeout(function(){document.location.reload();},0);}else{_41(_118,_123);}});};var _124=function(_125,_126,_127,_128){var _126={uri:_125,"mime-type":"application/json"};var _129=ibmPortalConfig.contentHandlerURI;if(_129!=null){if(_129.indexOf("?")>0){_129+="&";}else{_129+="?";}}_129+=i$.toQuery(_126)+"&"+i$.toQuery(_127)+"&"+Math.random();i$.xhrDelete({url:_129,responseType:"text"}).then(function(_12a){var _12b=com_ibm_widgets_tagging.getCurrentDisplayedCount(_127);var _12c=com_ibm_widgets_tagging.getCurrentDisplayedTagScope(_127);_5b(_127,_12c,_12b,com_ibm_widgets_tagging.displayMoreTags);},function(_12d){console.error("Error case: ",_12d);if(_12d!=null&&_12d.xhr!=null&&_12d.xhr.status!=null&&_12d.xhr.status==401){window.setTimeout(function(){document.location.reload();},0);}else{_41(_127,_12d);}});};return {fetchTagsLight:_2e,fetchSpecificScopeTags:_5b,showTaggingErrorMessage:_41,showTaggingValidationError:_47,deleteTag:_100,deleteMoreTag:_117,insertTag:_58,clearTaggingErrorMessage:_4d,setALTtextforAllElementsInTagging:_25,trace:_f,setALTtextforAllElementsInRating:_1f,deleteRating:_92,deleteAllRating:_a9,insertRating:_c7,editRating:_ea,clearRatingErrorMessage:_1b,fetchDojolessRatings:_33,fetchSpecificScopeRatings:_70,fetchSpecificScopeRatings_defaultView:_7a,fetchSpecificScopeRatings_anonymousUser:_85};})();var com_ibm_widgets_tagging=(function(){var _12e=".tags";var _12f="Twisty_";var _130="TagWidget_";var _131="tagginglighttagslist_";var _132="_Content";var _133="lotusHidden lotusTagCloud lotusui";var _134="lotusTagCloud lotusui";var _135="tagginglight_privateTaggingEnabled";var _136="tagginglight_deleteTaggingEnabled";var _137="tagginglight_plusClicked";var _138="_Image";var _139="_MoreTags";var _13a="TaggingMenu_";var _13b="tagginglight_";TAGGING_INLINE_EDITING_TYPEAHEAD_SUFFIX="_SuggestionList";var _13c="taggingMenuOptionDiv";var _13d="TaggingMenuDiv_";var _13e="tagginglight_CurrentScope";var _13f="tagginglight_CurrentCount";var _140="tagginglightmenulink_";var _141="tagginglightAddTaglink_";var _142="taggingDropDownMenuDialog_";var _143,_144,_145,_146;var _147="tagginglightinput_";var _148="tagginglightinputField_";var _149=new Array();var _14a="deleteIcon";var _14b="wpTaggingLight";var _14c="ltr";var _14d=i$.addOnLoad;if(typeof wp_wcm_async!="undefined"){_14d=i$.scope(wp_wcm_async,wp_wcm_async.addOnPageLoad);}_14d(function(){var _14e=ibmPortalConfig.projectUUID;if(_14e==null||_14e==""){i$.forEach(i$.query(_12e),function(_14f,_150,_151){var _152=_130+_150;var _153=ibmPortalCPConfig?ibmPortalCPConfig.operations.canViewTags&&ibmPortalCPConfig.isTaggingEnabled:null;if(_153==null||(!_153)){return;}var _154={"count":_150,"oid":_14f.getAttribute("resourceId"),"tagListParentId":_152,"tagsClickable":_14f.getAttribute("tagsClickable")||ibmPortalCPConfig.tagging.inline.tagsClickable,"tagClickActionMode":_14f.getAttribute("tagClickActionMode")||ibmPortalCPConfig.tagging.inline.tagClickActionMode,"showDialogLauncher":_14f.getAttribute("showDialogLauncher")||ibmPortalCPConfig.tagging.inline.showDialogLauncher,"maxResults":_14f.getAttribute("maxResults")||ibmPortalCPConfig.tagging.inline.maxResults,"customLabel":_14f.getAttribute("customLabel")||ibmPortalCPConfig.tagging.inline.customLabel,"customMessageNoTags":_14f.getAttribute("customMessageNoTags")||dojoless_resource_AddTag.text_no_tags,"countsEnabled":_14f.getAttribute("countsEnabled")||ibmPortalCPConfig.tagging.inline.countsEnabled,"deletingEnabled":_14f.getAttribute("deletingEnabled")||ibmPortalCPConfig.tagging.inline.deletingEnabled,"tagClickTransmitScopes":_14f.getAttribute("tagClickTransmitScopes")||ibmPortalCPConfig.tagging.inline.tagClickTransmitScopes,"resourceType":_14f.getAttribute("resourceType")||ibmPortalCPConfig.tagging.inline.resourceType,"privateTaggingEnabled":_14f.getAttribute("privateTaggingEnabled")||ibmPortalCPConfig.tagging.inline.privateTaggingEnabled,"customLabelCommunityTags":_14f.getAttribute("customLabelCommunityTags")||ibmPortalCPConfig.tagging.inline.customLabelCommunityTags,"customLabelPersonalPublicTags":_14f.getAttribute("customLabelPersonalPublicTags")||ibmPortalCPConfig.tagging.inline.customLabelPersonalPublicTags,"customLabelPersonalPrivateTags":_14f.getAttribute("customLabelPersonalPrivateTags")||ibmPortalCPConfig.tagging.inline.customLabelPersonalPrivateTags,"showAllTags":false};_154.query={"order":_14f.getAttribute("order")||ibmPortalCPConfig.tagging.inline.order,"orderMetric":_14f.getAttribute("orderMetric")||ibmPortalCPConfig.tagging.inline.orderMetric,"scope":_14f.getAttribute("tagScope")||ibmPortalCPConfig.tagging.inline.tagScope,"resourceCategories":_14f.getAttribute("resourceCategories")||ibmPortalCPConfig.tagging.inline.resourceCategories};var _155="true";if(_14f.getAttribute("deletingEnabled")==null||_14f.getAttribute("deletingEnabled")=="undefined"){if(ibmPortalCPConfig.tagging.inline.deletingEnabled!==null&&typeof ibmPortalCPConfig.tagging.inline.deletingEnabled!=="undefined"){_155=ibmPortalCPConfig.tagging.inline.deletingEnabled;}else{_155="true";}}else{_155=_14f.getAttribute("deletingEnabled");}_156(_14f.getAttribute("resourceId"),_155);_149[_150]=_14f.getAttribute("resourceId");var _157=_134;var _158=null;if(_14f.getAttribute("tagScope")!=null){_158=_14f.getAttribute("tagScope");}else{_158=ibmPortalCPConfig.tagging.inline.tagScope;}if(_158){_158=_158.toUpperCase();}var _159=_15a(_158);var _15b=null;if(_14f.getAttribute("customLabel")!=null){_15b=_14f.getAttribute("customLabel");}else{_15b=ibmPortalCPConfig.tagging.inline.customLabel;}if(!_15b){switch(_159[0]){case ("COMMUNITY"):if(_154.customLabelCommunityTags==null){_15b=dojoless_resource_AddTag.title_community_tags;}else{_15b=_154.customLabelCommunityTags;}break;case ("PERSONAL_PRIVATE"):if(_154.customLabelPersonalPrivateTags==null){_15b=dojoless_resource_AddTag.title_priv_tags;}else{_15b=_154.customLabelPersonalPrivateTags;}break;case ("PERSONAL_PUBLIC"):if(_154.customLabelPersonalPublicTags==null){_15b=dojoless_resource_AddTag.title_pub_tags;}else{_15b=_154.customLabelPersonalPublicTags;}break;default:_15b=dojoless_resource_AddTag.title_community_tags;break;}}else{_15b=dojoless_resource_AddTag.title_community_tags;}var loc=ibmCfg.portalConfig.locale;if(loc!=null){var _15c=i$.isRTL(loc);if(_15c!=null){if(_15c){_14c="rtl";}else{_14c="ltr";}}}var _15d=i$.byId("tagginglightlabeltext_"+_14f.getAttribute("resourceId"));if(_15d!=null){_15d.innerHTML=_15b;}_154.query.scope=_159;var _15e=i$.createDom("span",{"class":"trcText","title":_15b,"dir":_14c},_14f);var _15f=i$.createDom("span",{"id":_152,"class":_157,"dir":_14c},_14f);if(_14f.getAttribute("privateTaggingEnabled")==null||_14f.getAttribute("privateTaggingEnabled")=="undefined"){if(ibmPortalCPConfig.tagging.inline.privateTaggingEnabled!==null&&typeof ibmPortalCPConfig.tagging.inline.privateTaggingEnabled!=="undefined"){_145=ibmPortalCPConfig.tagging.inline.privateTaggingEnabled;}else{_145="false";}}else{_145=_14f.getAttribute("privateTaggingEnabled");}var _160=!ibmPortalConfig.isUserLoggedIn;if(_160){_159=["community","personal_public"];_145="false";}_161(_14f.getAttribute("resourceId"),_145);com_ibm_widgets_resolver.setALTtextforAllElementsInTagging(_14f.getAttribute("resourceId"));com_ibm_widgets_resolver.fetchTagsLight(_154,_162);});}},i$.global);var _163=",";var _164=", ";var _165=" , ";var _166=" ; ";var _167="...";var _168=" ";var _162=function(tags,_169){var _16a=tags.length;var _16b=(_169.maxResults<_16a&&_169.showAllTags==false)?_169.maxResults:_16a;var _16c=_169.tagListParentId;var _16d=_16c+_132;var _16e=i$.byId(_16c);_16e.innerHTML="";com_ibm_widgets_resolver.clearTaggingErrorMessage(_169.oid);var _16f=i$.byId("tagginglightmenuDIV_"+_169.oid);var _170=i$.byId("tagginglightAddTagDIV_"+_169.oid);if(ibmPortalCPConfig.operations.canCreatePublicTags||ibmPortalCPConfig.operations.canCreatePrivateTags){if(_16f!=null){_16f.setAttribute("class","menuShow");}if(_170!=null){_170.setAttribute("class","addtagShow");}}var _171=i$.byId("tagginglightinput_"+_169.oid);if(_171!=null){_171.setAttribute("class","addtagShow");}var _172=i$.byId("tagginglightdivider1_"+_169.oid);if(_172!=null){_172.setAttribute("class","divider1Show");}var _173=i$.createDom("span",{"id":_16d,"dir":_14c},_16e);var _174=i$.byId("tagginglightmoretagslink_"+_169.oid);if(_174!=null){_174.innerHTML=dojoless_resource_AddTag.title_more_tags;_174.setAttribute("onclick","com_ibm_widgets_tagging.getMoreTags('"+_169.oid+"')");i$.bindDomEvt(_174,"onkeypress",function(evt){var _175=evt.keyCode;if(_175==0&&evt.charCode==32){_175=32;}if(_175==13||_175==32){com_ibm_widgets_tagging.getMoreTags(_169.oid);}});_174.setAttribute("style","display:inline");}var _176=i$.byId(_142+_169.oid);var _177=null;var _178=_169.query.scope;var _179=_178[0];_179=_179.toUpperCase();switch(_179){case ("COMMUNITY"):if(_169.customLabelCommunityTags==null){_177=dojoless_resource_AddTag.title_community_tags;}else{_177=_169.customLabelCommunityTags;}break;case ("PERSONAL_PRIVATE"):if(_169.customLabelPersonalPrivateTags==null){_177=dojoless_resource_AddTag.title_priv_tags;}else{_177=_169.customLabelPersonalPrivateTags;}break;case ("PERSONAL_PUBLIC"):if(_169.customLabelPersonalPublicTags==null){_177=dojoless_resource_AddTag.title_pub_tags;}else{_177=_169.customLabelPersonalPublicTags;}break;default:_177=dojoless_resource_AddTag.title_community_tags;break;}if(_169.customLabel!=null){_177=_169.customLabel;}var _17a=i$.byId("tagginglightlabeltext_"+_169.oid);if(_17a!=null){_17a.innerHTML=_177;}_227(_169.oid,_178[0].toUpperCase());if(_169.count!=null){_22d(_169.oid,_169.count);}var _17b=i$.byId("tagginglightdivider3_"+_169.oid);var _17c=i$.byId("tagginglightdivider2_"+_169.oid);if(tags.length<1){var _17d=i$.createDom("span",{"title":_169.customMessageNoTags,"dir":_14c},_173);var _17e=document.createTextNode(_169.customMessageNoTags);_17d.appendChild(_17e);_174.setAttribute("style","display:none");if(_17b!=null){_17b.setAttribute("class","none");_17b.setAttribute("style","display:inline-block");}if(_17c!=null){_17c.setAttribute("class","divider1Show");}}else{if(_174!=null){_174.innerHTML=dojoless_resource_AddTag.title_more_tags;_174.setAttribute("style","display:inline");}if(_17b!=null){_17b.setAttribute("class","divider1Show");}if(_17c!=null){_17c.setAttribute("class","divider1Show");}}i$.forEach(tags,function(_17f,_180,_181){if(_180<_16b){var _182=_17f.name;var _183=_17f.id;_183=_183.substring(8);var _184;var _185=i$.createDom("a",{"lang":ibmPortalConfig.locale,"href":"javascript:;","alt":_182,"dir":_14c},_173);if(_169.tagsClickable==="false"){_184=i$.createDom("span",{"title":_182,"dir":_14c},_185);}else{_184=i$.createDom("span",{"title":_182,"href":"javascript:;","dir":_14c},_185);}var _186=_24e(_169.oid);_185.setAttribute("onclick","com_ibm_widgets_tagging.selectTagRedirectFunction('"+_182+"' , '"+_186+"','"+_169.tagClickActionMode+"')");var _187=i$.bindDomEvt(_185,"onkeypress",function(evt){var _188=evt.keyCode;if(_188==0&&evt.charCode==32){_188=32;}if(_188==13||_188==32){_1c9(_182,_186,_169.tagClickActionMode);}});var _189=document.createTextNode(_182);_184.appendChild(_189);if(_169.countsEnabled&&_17f.count){_189=document.createTextNode(" ("+_17f.count+") ");_184.appendChild(_189);}var _18a=_169.query.scope[0];_18a=_18a.toUpperCase();var _18b=!ibmPortalConfig.isUserLoggedIn;var _18c=_23b(_169.oid);if(_18a=="PERSONAL_PUBLIC"||_18a=="PERSONAL_PRIVATE"||ibmPortalCPConfig.operations.canDeleteOtherUsersTags){if(!_18b&&_18c=="true"){var _18d=i$.createDom("span",{"dir":_14c},_173);var _18e=i$.createDom("a",{"title":dojoless_resource_AddTag.link_delete,"role":"button","href":"javascript:;"},_18d);var _18f=i$.createDom("div",{"style":"width: 10px; height: 10px;"},_18e);_18f.setAttribute("class",_14a);_18f.setAttribute("alt",dojoless_resource_AddTag.link_delete);var _190;try{_190=document.defaultView.getComputedStyle(_18f);}catch(e){_190=_18f.currentStyle;}if(_190.backgroundImage=="none"){var _191=i$.createDom("div",{"style":"width: 10px; height: 10px;display:inline-block;"},_18e);var _192=document.createTextNode("x");_191.appendChild(_192);}i$.bindDomEvt(_18e,"onclick",function(evt){com_ibm_widgets_resolver.deleteTag(_169,com_ibm_widgets_resolver.fetchSpecificScopeTags,_183);});i$.bindDomEvt(_18e,"onkeypress",function(evt){var _193=evt.keyCode;if(_193==0&&evt.charCode==32){_193=32;}if(_193==13||_193==32){com_ibm_widgets_resolver.deleteTag(_169,com_ibm_widgets_resolver.fetchSpecificScopeTags,_183);}});}}if(_180<(_16b-1)){_189=document.createTextNode(_164);_173.appendChild(_189);}}});var _194=i$.byId(_140+_169.oid);if(_194!=null){_194.setAttribute("onclick","com_ibm_widgets_tagging.tagMenu('"+_169.oid+"')");var _195=i$.bindDomEvt(_194,"onkeypress",i$.scope(this,function(_196){var _197=_196.keyCode;if(_196.keyCode==0&&_196.charCode==32){_197=32;}switch(_197){case 40:case 32:case 38:case 13:var _198=i$.byId(_142+_169.oid);if(_198==null){com_ibm_widgets_tagging.tagMenu(_169.oid);var _199=_13d+_169.oid;var _19a=i$.byId(_199);var _19b=_19a.firstChild;window.setTimeout(function(){_19b.focus();},200);if(_196.preventDefault){_196.preventDefault();}if(_196.returnValue){_196.returnValue=false;}}return false;break;case 39:case 40:var _198=i$.byId(_142+_169.oid);if(_198!=null&&this.taggingDropDownMenu!=null){this.taggingDropDownMenu.close();}break;}}));}if(_16b==_16a){_174.setAttribute("style","display:none");var _17b=i$.byId("tagginglightdivider3_"+_169.oid);if(_17b!=null){_17b.setAttribute("class","none");_17b.setAttribute("style","display:inline-block");}if(_17c!=null){_17c.setAttribute("class","divider1Show");}}var _19c=i$.byId(_141+_169.oid);_19c.style.backgroundColor="white";var _19d;try{_19d=document.defaultView.getComputedStyle(_19c);}catch(e){_19d=_19c.currentStyle;}var _194=i$.byId(_140+_169.oid);var _17b=i$.byId("tagginglightdivider2_"+_169.oid);if(_19d.backgroundColor=="rgb(0, 0, 0)"){var _19e=i$.byId("InputImageDiv");if(_19e==null){var _19f=i$.createDom("div",{"id":"InputImageDiv","dir":_14c},_19c);var _1a0=document.createTextNode("+");_19f.appendChild(_1a0);}}_19c.style.visibility="visible";if(_169.showDialogLauncher!="false"){var _1a1=_17d||_16e;var _19c=i$.byId(_141+_169.oid);var item=i$.byId(_148+_169.oid);var _171=i$.byId("tagginglightinput_"+_169.oid);if(_171){var _1a2=_243(_169.oid);if(_1a2!=null&&_1a2=="true"){_171.setAttribute("class","addtagShow");}else{_171.setAttribute("class","addtag");}}var _1a3=i$.bindDomEvt(_19c,"onclick",function(evt){var item=i$.byId(_148+_169.oid);var _1a4=i$.byId("tagginglightinput_"+_169.oid);var _1a5=_1b2(_169.oid);_1a5=_15a(_1a5);var _1a6=_1a5[0].toUpperCase();if(_1a4){var _1a7=_243(_169.oid);if(_1a7=="true"||_1a6!=="COMMUNITY"){_1a4.setAttribute("class","addtagShow");item.value="";}if(_1a6=="COMMUNITY"){if(_169.count!=null){com_ibm_widgets_resolver.fetchSpecificScopeTags(_169.oid,"PERSONAL_PUBLIC",_169.count,com_ibm_widgets_tagging.displayTagsLight);}_246(_169.oid,true);}else{_246(_169.oid,false);}if(_1a4.getAttribute("class").indexOf("addtag"<0)){item=i$.byId(_148+_169.oid);item.focus();}}});var _1a3=i$.bindDomEvt(_19c,"onkeypress",function(evt){var _1a8=evt.keyCode;if(_1a8==0&&evt.charCode==32){_1a8=32;}if(_1a8!=9&&(_1a8==13||_1a8==32)){var item=i$.byId(_148+_169.oid);var _1a9=i$.byId("tagginglightinput_"+_169.oid);var _1aa=_1b2(_169.oid);_1aa=_15a(_1aa);var _1ab=_1aa[0].toUpperCase();if(_1a9){var _1ac=_243(_169.oid);if(_1ac=="true"||_1ab!=="COMMUNITY"){_1a9.setAttribute("class","addtagShow");item.value="";}if(_1ab=="COMMUNITY"){if(_169.count!=null){com_ibm_widgets_resolver.fetchSpecificScopeTags(_169.oid,"PERSONAL_PUBLIC",_169.count,com_ibm_widgets_tagging.displayTagsLight);}_246(_169.oid,true);}else{_246(_169.oid,false);}if(_1a9.getAttribute("class").indexOf("addtag"<0)){item=i$.byId(_148+_169.oid);item.focus();}}}});var _1ad=i$.byId(_148+_169.oid);var _1ae=i$.byId(_147+_169.oid);var _1af=i$.bindDomEvt(_1ad,"onkeydown",function(e){var _1b0=false;var _1b1=_1b2(_169.oid);var _1b3=_1b1.toUpperCase();if(_1b3=="PERSONAL_PRIVATE"){_1b0=true;}_169.query.scope=_1b1;keyDownHandler(e,_1ad,_169,_1b0);});}var _1b4=i$.createDom("form",{"method":"GET","action":".","name":"hiddenFormLight"},_1ae);var _1b5=i$.createDom("input",{"type":"hidden","name":"hiddenFormQNameSelectedTag"},_1b4);var _1b6=i$.createDom("input",{"type":"hidden","name":"hiddenFormQNameTagCloudRedirectView"},_1b4);var _1b7=i$.createDom("input",{"type":"hidden","name":"hiddenFormQNameSelectedTagMode"},_1b4);var _1b8=i$.createDom("input",{"type":"hidden","name":"hiddenFormUri"},_1b4);if(_169.tagClickTransmitScopes=="true"){var _1b9=_169.query.resourceCategories;if(_1b9&&_1b9!==""){var _1ba="{http://www.ibm.com/xmlns/prod/websphere/portal/v7.0/portal-contextual-portal}sc";var _1bb=_1b9.split(_163);for(var i=0;i<_1bb.length;i++){var _1bc=i$.createDom("input",{type:"hidden",name:_1ba,value:_1bb[i]},_1b4);}}}var _176=i$.byId(_142+_169.oid);if(_176!=null&&this.taggingDropDownMenu!=null){this.taggingDropDownMenu.close();}};var _1bd=function(item){var _1be=item.parentNode;var _1bf=_1be.childNodes;var _1c0=_1bf.length;var i=0;var _1c1=0;for(i=0;i<_1c0;i++){if(_1bf.item(i)==item){_1c1=i;break;}}if(_1c1==_1c0-1){_1c1=0;}else{_1c1=_1c1+1;var j=_1c1;for(j;j<_1c0;j++){if(!(_1bf.item(j).innerHTML==null||_1bf.item(j).innerHTML=="")){break;}}if(j==_1c0){_1c1=0;}else{_1c1=j;}}var _1c2=_1bf.item(_1c1).id;var temp=_1bf.item(_1c1);temp.focus();return i$.byId(_1bf.item(_1c1).id);};var _1c3=function(item){var _1c4=item.parentNode;var _1c5=_1c4.childNodes;var _1c6=_1c5.length;var i=0;var _1c7=0;for(i=0;i<_1c6;i++){if(_1c5.item(i)==item){_1c7=i;break;}}if(_1c7==0){_1c7=_1c6-1;if(_1c5.item(_1c7).innerHTML==""==null||_1c5.item(_1c7).innerHTML==""){_1c7=_1c7-1;}}else{_1c7=_1c7-1;var j=_1c7;for(j;j>0;j--){if(!(_1c5.item(j).innerHTML==""==null||_1c5.item(j).innerHTML=="")){break;}}_1c7=j;}var _1c8=_1c5.item(_1c7).id;var temp=_1c5.item(_1c7);temp.focus();return i$.byId(_1c5.item(_1c7).id);};var _1c9=function(_1ca,_1cb,_1cc){var _1cd="{http://www.ibm.com/xmlns/prod/websphere/portal/v7.0/portal-contextual-portal}stv_all";var _1ce="{http://www.ibm.com/xmlns/prod/websphere/portal/v7.0/portal-contextual-portal}stv_suggestedlinks";var _1cf="{http://www.ibm.com/xmlns/prod/websphere/portal/v7.0/portal-contextual-portal}stv_analytics";var _1d0="{http://www.ibm.com/xmlns/prod/websphere/portal/v7.0/portal-contextual-portal}tcrv";var _1d1="{http://www.ibm.com/xmlns/prod/websphere/portal/v7.0/portal-contextual-portal}stm";var _1d2="tm:tc";var _1d3="tm:prp";var _1d4="all";var _1d5="community";var _1d6=["personal_public","community"];var _1d7="COMMUNITY_PERSONAL_PUBLIC";var _1d8="personal";var _1d9="personal_public";var _1da="personal_private";var _1db=true;var _1dc="PRIVATE";var _1dd="PUBLIC";var _1de="all";var _1df="suggested_links";var _1e0="analytics";var _1e1="TAG_CENTER";var _1e2="PUBLIC_RENDER_PARAMETER";var _1e3=false;if(!this.prefix||this.prefix===""){if(document.hiddenFormLight[_1cb].hiddenFormQNameSelectedTag!=null){_1e3=true;document.hiddenFormLight[_1cb].hiddenFormQNameSelectedTag.value=_1ca;document.hiddenFormLight[_1cb].hiddenFormQNameSelectedTag.name=_1cd;}else{document.hiddenFormLight.hiddenFormQNameSelectedTag.value=_1ca;document.hiddenFormLight.hiddenFormQNameSelectedTag.name=_1cd;}if(document.hiddenFormLight[_1cb].hiddenFormQNameTagCloudRedirectView!=null){_1e3=true;document.hiddenFormLight[_1cb].hiddenFormQNameTagCloudRedirectView.value=_1de;document.hiddenFormLight[_1cb].hiddenFormQNameTagCloudRedirectView.name=_1d0;}if(document.hiddenFormLight[_1cb].hiddenFormQNameSelectedTagMode!=null){_1e3=true;document.hiddenFormLight[_1cb].hiddenFormQNameSelectedTagMode.value=_1de;document.hiddenFormLight[_1cb].hiddenFormQNameSelectedTagMode.name=_1d1;}else{document.hiddenFormLight.hiddenFormQNameTagCloudRedirectView.value=_1de;document.hiddenFormLight.hiddenFormQNameTagCloudRedirectView.name=_1d0;document.hiddenFormLight.hiddenFormQNameSelectedTagMode.value=_1de;document.hiddenFormLight.hiddenFormQNameSelectedTagMode.name=_1d1;}}else{if(this.prefix===_prefixSuggestedLinks){if(document.hiddenFormLight[_1cb].hiddenFormQNameSelectedTag!=null){_1e3=true;document.hiddenFormLight[_1cb].hiddenFormQNameSelectedTag.value=_1ca;document.hiddenFormLight[_1cb].hiddenFormQNameSelectedTag.name=_1ce;document.hiddenFormLight[_1cb].hiddenFormQNameTagCloudRedirectView.value=_1df;document.hiddenFormLight[_1cb].hiddenFormQNameTagCloudRedirectView.name=_1d0;document.hiddenFormLight[_1cb].hiddenFormQNameSelectedTagMode.value=_1df;document.hiddenFormLight[_1cb].hiddenFormQNameSelectedTagMode.name=_1d1;}else{document.hiddenFormLight.hiddenFormQNameSelectedTag.value=_1ca;document.hiddenFormLight.hiddenFormQNameSelectedTag.name=_1ce;document.hiddenFormLight.hiddenFormQNameTagCloudRedirectView.value=_1df;document.hiddenFormLight.hiddenFormQNameTagCloudRedirectView.name=_1d0;document.hiddenFormLight.hiddenFormQNameSelectedTagMode.value=_1df;document.hiddenFormLight.hiddenFormQNameSelectedTagMode.name=_1d1;}}else{if(this.prefix===_prefixAnalytics){if(document.hiddenFormLight[_1cb].hiddenFormQNameSelectedTag!=null){_1e3=true;document.hiddenFormLight[_1cb].hiddenFormQNameSelectedTag.value=_1ca;document.hiddenFormLight[_1cb].hiddenFormQNameSelectedTag.name=_1cf;document.hiddenFormLight[_1cb].hiddenFormQNameTagCloudRedirectView.value=_1e0;document.hiddenFormLight[_1cb].hiddenFormQNameTagCloudRedirectView.name=_1d0;document.hiddenFormLight[_1cb].hiddenFormQNameSelectedTagMode.value=_1e0;document.hiddenFormLight[_1cb].hiddenFormQNameSelectedTagMode.name=_1d1;}else{document.hiddenFormLight.hiddenFormQNameSelectedTag.value=_1ca;document.hiddenFormLight.hiddenFormQNameSelectedTag.name=_1cf;document.hiddenFormLight.hiddenFormQNameTagCloudRedirectView.value=_1e0;document.hiddenFormLight.hiddenFormQNameTagCloudRedirectView.name=_1d0;document.hiddenFormLight.hiddenFormQNameSelectedTagMode.value=_1e0;document.hiddenFormLight.hiddenFormQNameSelectedTagMode.name=_1d1;}}}}if(ibmPortalCPConfig.isTagCenterAvailable){var _1e4=ibmPortalCPConfig.tagging.inline.tagClickActionMode;if(_1e4==_1e1){if(document.hiddenFormLight[_1cb].hiddenFormUri!=null){_1e3=true;document.hiddenFormLight[_1cb].hiddenFormUri.value=_1d2;document.hiddenFormLight[_1cb].hiddenFormUri.name="uri";}else{document.hiddenFormLight.hiddenFormUri.value=_1d2;document.hiddenFormLight.hiddenFormUri.name="uri";}}else{if(document.hiddenFormLight[_1cb].hiddenFormUri!=null){_1e3=true;document.hiddenFormLight[_1cb].hiddenFormUri.value=_1d3;}else{document.hiddenFormLight.hiddenFormUri.value=_1d3;}}}if(_1e3){document.hiddenFormLight[_1cb].submit();}else{document.hiddenFormLight.submit();}};function _1e5(aID,rsID,max){var _1e6=i$.byId("handleMoreTagsDialog"+rsID);if(_1e6==null){if(i$.isIE<9){_146=new wpModules.dialog.Dialog({id:"handleMoreTagsDialog"+rsID,markup:aID,autoPosition:_1e7(rsID),posHandler:"horizontallyCenteredBelow",autoResize:true,metrics:{width:max},autoClose:true});}else{_146=new wpModules.dialog.Dialog({id:"handleMoreTagsDialog"+rsID,markup:aID,autoPosition:_1e7(rsID),posHandler:"horizontallyCenteredBelow",autoResize:true,autoClose:true});}_146.open();}};function _1e8(id,lang,dir,_1e9,_1ea,_1eb,_1ec){return i$.createDom("a",{"id":id,"lang":lang,"dir":dir,"tabIndex":"0","href":"javascript:;","role":"menuitem","class":_13c,"onclick":"com_ibm_widgets_resolver.fetchSpecificScopeTags('"+_1e9+"','"+_1ec+"','"+_1ea+"', com_ibm_widgets_tagging.displayTagsLight);",},_1eb);};function _1e7(rsID){return i$.byId("moretagslink_"+rsID);};function _15a(_1ed){_1ed=_1ed.toUpperCase();switch(_1ed){case ("PERSONAL_PRIVATE"):_1ed=["personal_private"];break;case ("PERSONAL_PUBLIC"):_1ed=["personal_public"];break;case ("COMMUNITY_PERSONAL_PUBLIC"):_1ed=["community","personal_public"];break;default:_1ed=["community","personal_public"];break;}return _1ed;};function _1ee(_1ef){i$.forEach(i$.query(_12e),function(_1f0,_1f1,_1f2){var _1f3="TaggingExtraWidget_"+_1f1;var _1f4=_1b2(_1ef);_1f4=_15a(_1f4);var _1f5={"count":_1f1,"oid":_1f0.getAttribute("resourceId"),"tagListParentId":_1f3,"tagsClickable":_1f0.getAttribute("tagsClickable")||ibmPortalCPConfig.tagging.inline.tagsClickable,"showDialogLauncher":_1f0.getAttribute("showDialogLauncher")||ibmPortalCPConfig.tagging.inline.showDialogLauncher,"maxResults":_1f0.getAttribute("maxResults")||ibmPortalCPConfig.tagging.inline.maxResults,"customMessageNoTags":_1f0.getAttribute("customMessageNoTags")||dojoless_resource_AddTag.text_no_tags,"countsEnabled":_1f0.getAttribute("countsEnabled")||ibmPortalCPConfig.tagging.inline.countsEnabled,"deletingEnabled":_1f0.getAttribute("deletingEnabled")||ibmPortalCPConfig.tagging.inline.deletingEnabled,"tagClickTransmitScopes":_1f0.getAttribute("tagClickTransmitScopes")||ibmPortalCPConfig.tagging.inline.tagClickTransmitScopes,"privateTaggingEnabled":_1f0.getAttribute("privateTaggingEnabled")||ibmPortalCPConfig.tagging.inline.privateTaggingEnabled,"showAllTags":false};_1f5.query={"order":_1f0.getAttribute("order")||ibmPortalCPConfig.tagging.inline.order,"orderMetric":_1f0.getAttribute("orderMetric")||ibmPortalCPConfig.tagging.inline.orderMetric,"resourceType":_1f0.getAttribute("resourceType")||ibmPortalCPConfig.tagging.inline.resourceType,"scope":_1f4,"resourceCategories":_1f0.getAttribute("resourceCategories")||ibmPortalCPConfig.tagging.inline.resourceCategories};if(_1f0.getAttribute("deletingEnabled")==null||_1f0.getAttribute("deletingEnabled")=="undefined"){if(ibmPortalCPConfig.tagging.inline.deletingEnabled!==null&&typeof ibmPortalCPConfig.tagging.inline.deletingEnabled!=="undefined"){_1f5.deletingEnabled=ibmPortalCPConfig.tagging.inline.deletingEnabled;}else{_1f5.deletingEnabled="true";}}else{_1f5.deletingEnabled=_1f0.getAttribute("deletingEnabled");}_149[_1f1]=_1f0.getAttribute("resourceId");if(_1ef==_149[_1f1]){var _1f6=_134;if(i$.byId(_1f3)!=null){var _1f7=i$.createDom("span",{"id":_1f3,"class":_1f6,"dir":_14c},_1f0);}com_ibm_widgets_resolver.fetchTagsLight(_1f5,_1f8);}});};var _1f8=function(tags,_1f9){var _1fa=tags.length;var _1fb=(_1f9.maxResults<_1fa&&_1f9.showAllTags==false)?_1f9.maxResults:_1fa;var _1fc="TagsExtra_"+_1f9.oid;var _1fd=_1fc+_132+_1f9.oid;var _1fe=i$.createDom("div",{"id":"TagsExtraDiv","dir":_14c});var _1ff=null;_1ff=i$.byId(_1fc);if(_1ff==null){_1ff=i$.createDom("span",{"id":_1fc,"class":_14b,"dir":_14c},_1fe);}var _200=null;_200=i$.byId(_1fd);if(_200==null){_200=i$.createDom("span",{"id":_1fd,"dir":_14c},_1ff);}else{while(_200.hasChildNodes()){_200.removeChild(_200.lastChild);}}if(tags.length<1){var _201=i$.createDom("div",{"title":_1f9.customMessageNoTags,"class":"lotusTagCloud lotusui","dir":_14c},_200);var _202=document.createTextNode(_1f9.customMessageNoTags);_201.appendChild(_202);}var max=0;i$.forEach(tags,function(_203,_204,_205){if(_204<_1fa&&_204>=_1fb){var _206=_203.name;var _207=_203.id;_207=_207.substring(8);var _208;var _209=i$.createDom("a",{"lang":ibmPortalConfig.locale,"href":"javascript:;","dir":_14c},_200);if(_1f9.tagsClickable==="false"){_208=i$.createDom("span",{"title":_206,"dir":_14c},_209);}else{_208=i$.createDom("span",{"title":_206,"href":"javascript:;","dir":_14c},_209);}var _20a=document.createTextNode(_206);_208.appendChild(_20a);var _20b=_1f9.count;var _20c=_1f9.tagClickActionMode;_209.setAttribute("onclick","com_ibm_widgets_tagging.selectTagRedirectFunction('"+_206+"' , '"+_20b+"','"+_20c+"')");var _20d=i$.bindDomEvt(_209,"onkeypress",function(evt){var _20e=evt.keyCode;if(_20e==0&&evt.charCode==32){_20e=32;}if(_20e==13||_20e==32){_1c9(_206,_20b,_20c);}});var _20f=_206;if(_1f9.countsEnabled&&_203.count){_20a=document.createTextNode(" ("+_203.count+") ");_208.appendChild(_20a);_20f=_20f+"("+_203.count+")";}var _210=_1f9.query.scope;_210=_210[0];_210=_210.toUpperCase();var _211=_23b(_1f9.oid);if(_210=="PERSONAL_PUBLIC"||_210=="PERSONAL_PRIVATE"||ibmPortalCPConfig.operations.canDeleteOtherUsersTags){if(_211=="true"){var _212=i$.createDom("span",{"id":"Delete_"+_1f9.oid+"_"+_206,"dir":_14c},_200);var _213=i$.createDom("a",{"title":dojoless_resource_AddTag.link_delete,"role":"button","href":"javascript:;","dir":_14c},_212);var _214=i$.createDom("img",{"style":"width: 10px; height: 10px;","dir":_14c,"src":"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},_213);_214.setAttribute("class",_14a);_214.setAttribute("alt",dojoless_resource_AddTag.link_delete);_213.setAttribute("onclick","com_ibm_widgets_resolver.deleteMoreTag('"+_1f9.oid+"' , '"+"displayMoreTags"+"','"+_207+"')");i$.bindDomEvt(_213,"onkeypress",function(evt){var _215=evt.keyCode;if(_215==0&&evt.charCode==32){_215=32;}if(_215==13||_215==32){com_ibm_widgets_resolver.deleteMoreTag(_1f9.oid,_1f8,_207);}});}}if(_204<(_1fa-1)){_20a=document.createTextNode(", ");_200.appendChild(_20a);if(i$.isIE<9){var _216=i$.createDom("br",{});}else{var _217=i$.createDom("br",{});_200.appendChild(_217);}_20f=_20f+",";}var lDiv=document.createElement("lDiv");document.body.appendChild(lDiv);lDiv.style.position="absolute";lDiv.style.left=-1000;lDiv.style.top=-1000;lDiv.innerHTML=_20f;var _218={width:lDiv.clientWidth,height:lDiv.clientHeight};document.body.removeChild(lDiv);lDiv=null;var _219=_218.width+45;max=_219>max?_219:max;}});var _21a=i$.createDom("form",{"method":"GET","action":".","name":"hiddenFormLight"},_1ff);var _21b=i$.createDom("input",{"type":"hidden","name":"hiddenFormQNameSelectedTag"},_21a);var _21c=i$.createDom("input",{"type":"hidden","name":"hiddenFormQNameTagCloudRedirectView"},_21a);var _21d=i$.createDom("input",{"type":"hidden","name":"hiddenFormQNameSelectedTagMode"},_21a);var _21e=i$.createDom("input",{"type":"hidden","name":"hiddenFormUri"},_21a);if(_1f9.tagClickTransmitScopes=="true"){var _21f=_1f9.query.resourceCategories;if(_21f&&_21f!==""){var _220="{http://www.ibm.com/xmlns/prod/websphere/portal/v7.0/portal-contextual-portal}sc";var _221=_21f.split(_163);for(var i=0;i<_221.length;i++){var _222=i$.createDom("input",{type:"hidden",name:_220,value:_221[i]},_21a);}}}var _223=_1f9.query.scope;_223=_223[0];_223=_223.toUpperCase();if(_223=="PERSONAL_PUBLIC"||_223=="PERSONAL_PRIVATE"){max=max+10;}if(_1fa==_1fb){var _224=i$.byId("handleMoreTagsDialog"+_1f9.oid);if(_224!=null&&_146!=null){_146.close();}var _225=i$.byId("tagginglightmoretagslink_"+_1f9.oid);_225.setAttribute("style","display:none");var _226=i$.byId("tagginglightdivider3_"+_1f9.oid);if(_226!=null){_226.setAttribute("class","none");_226.setAttribute("style","display:inline-block");}if(divider2!=null){divider2.setAttribute("class","divider1Show");}}else{_1e5(_1fe.innerHTML,_1f9.oid,max);}};var _227=function(_228,_229){var _22a=i$.byId(_13e+_228);if(_229=="COMMUNITY"){_229="COMMUNITY_PERSONAL_PUBLIC";}if(_22a==null){var _22b=document.createElement("input");_22b.setAttribute("id",_13e+_228);_22b.setAttribute("type","hidden");_22b.setAttribute("name","currentScope");_22b.setAttribute("value",_229);var _22c=i$.byId(_13b+_228);_22c.appendChild(_22b);}else{_22a.setAttribute("value",_229);}};var _22d=function(_22e,_22f){var _230=i$.byId(_13f+_22e);if(_230==null){var _231=document.createElement("input");_231.setAttribute("id",_13f+_22e);_231.setAttribute("type","hidden");_231.setAttribute("name","currentCount");_231.setAttribute("value",_22f);var _232=i$.byId(_13b+_22e);_232.appendChild(_231);}else{_230.setAttribute("value",_22f);}};var _233=function(_234){var _235=i$.byId(_135+_234);if(_235!=null){return _235.value;}};var _161=function(_236,_237){var _238=i$.byId(_135+_236);if(_238==null){var _239=i$.createDom("input",{},_23a);_239.setAttribute("id",_135+_236);_239.setAttribute("type","hidden");_239.setAttribute("name","privateTaggingEnabled");_239.setAttribute("value",_237);var _23a=i$.byId(_13b+_236);_23a.appendChild(_239);}else{_238.setAttribute("value",_237);}};var _23b=function(_23c){var _23d=i$.byId(_136+_23c);if(_23d!=null){return _23d.value;}};var _156=function(_23e,_23f){var _240=i$.byId(_136+_23e);if(_240==null){var _241=i$.byId(_13b+_23e);var _242=document.createElement("input");_242.setAttribute("id",_136+_23e);_242.setAttribute("type","hidden");_242.setAttribute("name","deleteTaggingEnabled");_242.setAttribute("value",_23f);_241.appendChild(_242);}else{_240.setAttribute("value",_23f);}};var _243=function(_244){var _245=i$.byId(_137+_244);if(_245!=null){return _245.value;}};var _246=function(_247,_248){var _249=i$.byId(_137+_247);if(_249==null){var _24a=i$.createDom("input",{},_24b);_24a.setAttribute("id",_137+_247);_24a.setAttribute("type","hidden");_24a.setAttribute("name","plusClicked");_24a.setAttribute("value",_248);var _24b=i$.byId(_13b+_247);_24b.appendChild(_24a);}else{_249.setAttribute("value",_248);}};var _1b2=function(_24c){var _24d=i$.byId(_13e+_24c);if(_24d!=null){return _24d.value;}};var _24e=function(_24f){var _250=i$.byId(_13f+_24f);if(_250!=null){return _250.value;}};var _251=function(_252){var _253={"oid":_252};var _254=_13a+_252;var _255=i$.byId(_13b+_252);var item=i$.byId(_148+_253.oid);var _256=i$.byId("tagginglightinput_"+_253.oid);if(_256){_256.setAttribute("class","addtag");_246(_252,false);}var _257=i$.createDom("div",{"id":_254,"tabIndex":"0","class":_13c,"dir":_14c});var _258=_13d+_252;var _259=i$.createDom("div",{"id":_258,"aria-label":dojoless_resource_AddTag.tagging_menu,"role":"menu","dir":_14c},_257);var _258=_13d+_252;var _25a=null;var _25b=null;var _25c=null;var _25d=_1b2(_252);var _25e=_24e(_252);var _25f=_233(_252);com_ibm_widgets_resolver.clearTaggingErrorMessage(_252);switch(_25d){case ("PERSONAL_PRIVATE"):var _260=dojoless_resource_AddTag.Menu_tagging;var _25e=_24e(_252);var _261=_260+"_"+"Link"+"_"+_252;_25b=_1e8(_261,ibmPortalConfig.locale,_14c,_252,_25e,_259,"COMMUNITY_PERSONAL_PUBLIC");var _262=document.createTextNode(_260);_25b.appendChild(_262);var _263=dojoless_resource_AddTag.Menu_public_tagging;var _264=_263+"_"+"Link"+"_"+_252;_25a=_1e8(_264,ibmPortalConfig.locale,_14c,_252,_25e,_259,"PERSONAL_PUBLIC");var _265=document.createTextNode(_263);_25a.appendChild(_265);break;case ("PERSONAL_PUBLIC"):var _260=dojoless_resource_AddTag.Menu_tagging;var _261=_260+"_"+"Link"+"_"+_252;_25b=_1e8(_261,ibmPortalConfig.locale,_14c,_252,_25e,_259,"COMMUNITY_PERSONAL_PUBLIC");var _262=document.createTextNode(_260);_25b.appendChild(_262);if(_25f=="true"){var _266=dojoless_resource_AddTag.Menu_private_tagging;var _267=_266+"_"+"Link"+"_"+_252;_25c=_1e8(_267,ibmPortalConfig.locale,_14c,_252,_25e,_259,"PERSONAL_PRIVATE");var _265=document.createTextNode(_266);_25c.appendChild(_265);}break;case ("COMMUNITY_PERSONAL_PUBLIC"):var _263=dojoless_resource_AddTag.Menu_public_tagging;var _264=_263+"_"+"Link"+"_"+_252;_25a=_1e8(_264,ibmPortalConfig.locale,_14c,_252,_25e,_259,"PERSONAL_PUBLIC");var _265=document.createTextNode(_263);_25a.appendChild(_265);if(_25f=="true"){var _266=dojoless_resource_AddTag.Menu_private_tagging;var _267=_266+"_"+"Link"+"_"+_252;_25c=_1e8(_267,ibmPortalConfig.locale,_14c,_252,_25e,_259,"PERSONAL_PRIVATE");var _265=document.createTextNode(_266);_25c.appendChild(_265);}break;default:allTagsLabel=dojoless_resource_AddTag.title_community_tags;}if(_25d!="COMMUNITY_PERSONAL_PUBLIC"){_259.appendChild(_25b);_259.appendChild(i$.createDom("br",{},_25b));}if(_25d!="PERSONAL_PUBLIC"){_259.appendChild(_25a);_259.appendChild(i$.createDom("br",{},_25a));}if(_25d!="PERSONAL_PRIVATE"&&_25c!=null){_259.appendChild(_25c);_259.appendChild(i$.createDom("br",{},_25c));}_268(_257.innerHTML,_253.oid);};var _269=function(_26a,item,_26b){var _26c=item.parentNode;var _26d=_26c.childNodes;var _26e=item;var _26f=String.fromCharCode(_26a),_270=_26f.toLowerCase(),_271=_272(_26b),_273=_26b.innerHTML.charAt(_271),_274=_26d,_275;if(_270==_273.toLowerCase()){var _276=0;var i=0;_274=_26e.childNodes;var len=_274.length;for(i;i<len;i++){if(_274.item(i)==_26b){break;}}_276=i;var _277=_278(_274,_276,_273,_26f);if((_277!=item)){_279(_277);}}else{_274=_26e.childNodes;for(var k=0,nal=_274.length;k<nal;k++){_271=_272(_274[k]);_275=_274[k].innerHTML;if((_270==_275.charAt(_271).toLowerCase())){_279(_274[k]);break;}}}};function _279(item){item.focus();};function _278(_27a,_27b,_27c,_27d){var _27e,_27f=false,_280,_281=_27a.length,_282=(_27b==_281-1)?-1:_27b;for(var i=_282+1;i<_281;i++){_27e=_272(_27a[i]);_280=_27a[i].innerHTML.charAt(_27e).toLowerCase();if(_280==_27d.toLowerCase()){_27b=i;break;}if(i==_27a.length-1){if(_27f){break;}i=-1;_281=_27b;_27f=true;}}return _27a[_27b];};function _272(item){var ltr=null;var loc=ibmCfg.portalConfig.locale;if(loc!=null){var _283=i$.isRTL(loc);if(_283!=null){if(_283){ltr=false;}else{ltr=true;}}}if((item.text)&&(!ltr)){return item.text.length-1;}return 0;};function _284(rsID){return i$.byId(_140+rsID);};var _268=function(aID,rsID){this.taggingDropDownMenu=null;this.taggingDropDownMenu=new wpModules.dialog.Dialog({id:_142+rsID,markup:aID,posHandler:"horizontallyCenteredBelow",autoPosition:_284(rsID),autoResize:true,displayCloseOverlay:true,autoClose:true,callbackFn:function(arg){var _285=i$.byId(_140+rsID);if(_285!=null){window.setTimeout(function(){_285.focus();},200);}}});this.taggingDropDownMenu.open();var _286=dojoless_resource_AddTag.Menu_private_tagging;var _287=_286+"_"+"Link"+"_"+rsID;var _288=dojoless_resource_AddTag.Menu_public_tagging;var _289=_288+"_"+"Link"+"_"+rsID;var _28a=dojoless_resource_AddTag.Menu_tagging;var _28b=_28a+"_"+"Link"+"_"+rsID;var _28c=i$.byId(_13d+rsID);if(_28c!=null){var _28d=i$.bindDomEvt(_28c,"onkeydown",i$.scope(this,function(_28e){switch(_28e.keyCode){case 32:var _28f=document.activeElement;if(_28f.id==_289){com_ibm_widgets_resolver.fetchSpecificScopeTags(rsID,"PERSONAL_PUBLIC",0,com_ibm_widgets_tagging.displayTagsLight);}else{if(_28f.id==_28b){com_ibm_widgets_resolver.fetchSpecificScopeTags(rsID,"COMMUNITY_PERSONAL_PUBLIC",0,com_ibm_widgets_tagging.displayTagsLight);}else{com_ibm_widgets_resolver.fetchSpecificScopeTags(rsID,"PERSONAL_PRIVATE",0,com_ibm_widgets_tagging.displayTagsLight);}}break;case 9:if(this.taggingDropDownMenu!=null){this.taggingDropDownMenu.close();}break;case 27:if(this.taggingDropDownMenu!=null){this.taggingDropDownMenu.close();}break;case 38:var _28f=document.activeElement;var _290=_1c3(_28f);if(_290!=null){_290.focus();}if(_28e.preventDefault){_28e.preventDefault();}return false;break;case 39:break;case 40:var _28f=document.activeElement;var _290=_1bd(_28f);if(_290!=null){_290.focus();}if(_28e.preventDefault){_28e.preventDefault();}return false;break;default:var item=document.activeElement;_269(_28e.keyCode,_28c,item);break;}}));}};return {TAGGING_WIDGET_TAGS_ID_PREFIX:"tagginglighttagslist_",TAGGING_WIDGET_ID_PREFIX:"TagWidget_",tagMenu:_251,displayTagsLight:_162,displayMoreTags:_1f8,selectTagRedirectFunction:_1c9,getMoreTags:_1ee,tagIdsArray:_149,getCurrentDisplayedCount:_24e,getCurrentDisplayedTagScope:_1b2,setPlusClicked:_246,};})();"use strict";var com_ibm_widgets_rating=(function(){var _291=".stars";var _292="RatingWidget_";var _293;var _294;var _295;var _296;var _297;var _298=ibmPortalCPConfig.rating.dialog.numStars;var _299="ratinglight_";var _29a="ratinglightstars_";var _29b="ratinglight_CurrentScope";var _29c="ratinglight_privateRatingEnabled";var _29d="ratinglight_deleteRatingEnabled";var _29e="ratinglightlabeltext_";var _29f="ratinglightstarsfull_";var _2a0="ratinglightstarsempty_";var _2a1="ratinglightdescriptionlabel_";var _2a2="ratinglightmenulink_";var _2a3="ratinglightdivider1_";var _2a4="ratinglightdivider2_";var _2a5=14;var _2a6="px";var _2a7="(";var _2a8=")";var _2a9="/";var _2aa="RatingMenuDiv_";var _2ab="RatingMenu_";var _2ac="RatingDistribution_";var _2ad="RatingDistributionDiv_";var _2ae="ratingDistributionEmptyBar";var _2af="ratingDistributionFullBar";var _2b0="ratingDistributionEmptyBarIE8";var _2b1="ratingDistributionFullBarIE8";var _2b2="ratingDistributionText";var _2b3="totalRatingText";var _2b4="horizontalDivider";var _2b5="horizontalDivider2";var _2b6="horizontalDivider3";var _2b7=14;var _2b8="ratingDistributionDiv";var _2b9="ratingDistributionDiv";var _2ba="textDiv";var _2bb="textDivID";var _2bc;var _2bd="ratingsDropDownMenuDialog_";var _2be="wpRatingLightMenuDialogCSS ";var _2bf="ltr";var _2c0="ratingDistributionFullBar_RTL";var _2c1="ratingDistributionFullBarIE8_RTL";var _2c2="PERSONAL_PRIVATE";var _2c3="PERSONAL_PUBLIC";var _2c4="COMMUNITY_PERSONAL_PUBLIC";var _2c5="COMMUNITY";var _2c6="DojolessRating.addOnLoad";var _2c7=" DojolessRating.displayDojolessRatings ";var _2c8=" DojolessRating.getRatings";var _2c9="DojolessRating.getRatingMenu";var _2ca="ratinglightmenuDIV_";var _2cb="ratinglightdivider1_";var _2cc="menuShow";var _2cd="divider1Show";var _2ce="divider1";var _2cf="divider2Show";var _2d0="divider2";var _2d1="o";var _2d2="*";var _2d3="starElements";var _2d4="starElement";var _2d5="_span";var _2d6=i$.addOnLoad;if(typeof wp_wcm_async!="undefined"){_2d6=i$.scope(wp_wcm_async,wp_wcm_async.addOnPageLoad);}_2d6(function(){if(ibmPortalCPConfig!=null&&ibmPortalCPConfig.operations!=null&&ibmPortalCPConfig.operations.canViewRatings!=null&&ibmPortalCPConfig.isRatingEnabled!=null){var _2d7=ibmPortalCPConfig?ibmPortalCPConfig.operations.canViewRatings&&ibmPortalCPConfig.isRatingEnabled:null;var _2d8=i$.query(_291);var _2d9=ibmPortalConfig.projectUUID;if(_2d9==null||_2d9==""){i$.forEach(_2d8,function(_2da,_2db,_2dc){if(_2d7==null||(!_2d7)){return;}var _2dd=_292+_2db;var _2de;var _2df;var _2e0,_2e1;var _2e2="true";var _2e3;var _2e4;var _2e5;if(_2da.getAttribute("ratingDescription")==null||_2da.getAttribute("ratingDescription")=="undefined"){if(ibmPortalCPConfig.rating.inline.ratingDescription!==null&&typeof ibmPortalCPConfig.rating.inline.ratingDescription!=="undefined"){_2de=ibmPortalCPConfig.rating.inline.ratingDescription.toUpperCase();}else{_2de="ALL";}}else{_2de=_2da.getAttribute("ratingDescription");}if(_2da.getAttribute("ratingScope")==null||_2da.getAttribute("ratingScope")=="undefined"){if(ibmPortalCPConfig.rating.inline.ratingScope!==null&&typeof ibmPortalCPConfig.rating.inline.ratingScope!=="undefined"){_2df=ibmPortalCPConfig.rating.inline.ratingScope.toUpperCase();}else{_2df=_2c4;}}else{_2df=_2da.getAttribute("ratingScope");}switch(_2df){case (_2c2):_2df=["personal_private"];break;case (_2c3):_2df=["personal_public"];break;case (_2c4):_2df=["community","personal_public"];break;default:_2df=["community","personal_public"];break;}if(_2da.getAttribute("numStars")==null||_2da.getAttribute("numStars")=="undefined"){if(ibmPortalCPConfig.rating.inline.numStars!==null&&typeof ibmPortalCPConfig.rating.inline.numStars!=="undefined"){_2e0=ibmPortalCPConfig.rating.inline.numStars;}else{_2e0=5;}}else{_2e0=_2da.getAttribute("numStars");}if(_2da.getAttribute("customLabel")==null||_2da.getAttribute("customLabel")=="undefined"){if(ibmPortalCPConfig.rating.inline.customLabel!==null&&typeof ibmPortalCPConfig.rating.inline.customLabel!=="undefined"){customLabel=ibmPortalCPConfig.rating.inline.customLabel;}else{customLabel=null;}}else{customLabel=_2da.getAttribute("customLabel");}var _2e6="false";if(_2da.getAttribute("nonCSSuiEnabled")==null||_2da.getAttribute("nonCSSuiEnabled")=="undefined"){_2e6="false";}else{_2e6=_2da.getAttribute("nonCSSuiEnabled");}if(_2da.getAttribute("privateRatingEnabled")==null||_2da.getAttribute("privateRatingEnabled")=="undefined"){if(ibmPortalCPConfig.rating.inline.privateRatingEnabled!==null&&typeof ibmPortalCPConfig.rating.inline.privateRatingEnabled!=="undefined"){_2e1=ibmPortalCPConfig.rating.inline.privateRatingEnabled;}else{_2e1="false";}}else{_2e1=_2da.getAttribute("privateRatingEnabled");}var _2e7=_2da.getAttribute("resourceId");_39e(_2e7,_2e1);var _2e8=!ibmPortalConfig.isUserLoggedIn;if(_2e8){_2df=["community","personal_public"];_2e1="false";}if(_2da.getAttribute("deletingEnabled")==null||_2da.getAttribute("deletingEnabled")=="undefined"){if(ibmPortalCPConfig.rating.inline.deletingEnabled!==null&&typeof ibmPortalCPConfig.rating.inline.deletingEnabled!=="undefined"){_2e2=ibmPortalCPConfig.rating.inline.deletingEnabled;}else{_2e2="true";}}else{_2e2=_2da.getAttribute("deletingEnabled");}var _2e7=_2da.getAttribute("resourceId");_3a6(_2e7,_2e2);if(_2da.getAttribute("customLabelCommunityRatings")==null||_2da.getAttribute("customLabelCommunityRatings")=="undefined"){if(ibmPortalCPConfig.rating.inline.customLabelCommunityRatings!==null&&typeof ibmPortalCPConfig.rating.inline.customLabelCommunityRatings!=="undefined"){_2e3=ibmPortalCPConfig.rating.inline.customLabelCommunityRatings;}else{_2e3=null;}}else{_2e3=_2da.getAttribute("customLabelCommunityRatings");}if(_2da.getAttribute("customLabelPersonalPublicRatings")==null||_2da.getAttribute("customLabelPersonalPublicRatings")=="undefined"){if(ibmPortalCPConfig.rating.inline.customLabelPersonalPublicRatings!==null&&typeof ibmPortalCPConfig.rating.inline.customLabelPersonalPublicRatings!=="undefined"){_2e4=ibmPortalCPConfig.rating.inline.customLabelPersonalPublicRatings.toUpperCase();}else{_2e4=null;}}else{_2e4=_2da.getAttribute("customLabelPersonalPublicRatings");}if(_2da.getAttribute("customLabelPersonalPrivateRatings")==null||_2da.getAttribute("customLabelPersonalPrivateRatings")=="undefined"){if(ibmPortalCPConfig.rating.inline.customLabelPersonalPrivateRatings!==null&&typeof ibmPortalCPConfig.rating.inline.customLabelPersonalPrivateRatings!=="undefined"){_2e5=ibmPortalCPConfig.rating.inline.customLabelPersonalPrivateRatings.toUpperCase();}else{_2e5=null;}}else{_2e5=_2da.getAttribute("customLabelPersonalPrivateRatings");}var _2e9={"count":_2db,"oid":_2da.getAttribute("resourceId"),"ratingListParentId":_2dd,"customLabel":customLabel,"customLabelCommunityRatings":_2e3,"customLabelPersonalPublicRatings":_2e4,"customLabelPersonalPrivateRatings":_2e5,"scope":_2df,"ratingDescription":_2de,"numStars":_2e0};_2e9.query={"count":_2db,"oid":_2da.getAttribute("resourceId"),"ratingListParentId":_2dd,"customLabel":customLabel,"customLabelCommunityRatings":_2e3,"customLabelPersonalPublicRatings":_2e4,"customLabelPersonalPrivateRatings":_2e5,"scope":_2df,"ratingDescription":_2de,"numStars":_2e0};var _2ea=i$.byId(_2a0+_2e9.oid);var loc=ibmCfg.portalConfig.locale;if(loc!=null){var _2eb=i$.isRTL(loc);if(_2eb!=null){if(_2eb){_2bf="rtl";}else{_2bf="ltr";}}}var _2ec=i$.bindDomEvt(_2ea,"onclick",function(evt){var _2ed=_30d(_2e9.oid);var _2ee=evt.target||evt.srcElement;var _2ef=_2ea;var _2f0=_2ef.offsetLeft;var t=_2ef.offsetTop;while(_2ef=_2ef.offsetParent){_2f0+=_2ef.offsetLeft;}_2ef=i$.byId(_2ee.id);while(_2ef=_2ef.offsetParent){t+=_2ef.offsetTop;}var x;if(i$.isIE<9){x=evt.clientX-_2f0;}else{x=evt.pageX-_2f0;}var _2f1=Math.ceil(x/_2a5);if(_2bf!=null&&_2bf=="rtl"){_2f1=(_2e9.numStars+1)-_2f1;}var _2f2=i$.byId(_29f+_2e9.oid);var _2f3=!ibmPortalConfig.isUserLoggedIn;if(_2ed==_2c4){_314(_2e9.oid,_2c3);if(!_2f3){com_ibm_widgets_resolver.fetchSpecificScopeRatings_defaultView(_2e9.oid,_2c3,_2f1,com_ibm_widgets_rating.updateRatingInDefaultView);}else{com_ibm_widgets_resolver.insertRating(_2e9.oid,_30d(_2e9.oid),_2f1,com_ibm_widgets_resolver.fetchSpecificScopeRatings_anonymousUser);}}else{var _2f3=!ibmPortalConfig.isUserLoggedIn;if(!_2f3){if(_2f2.style.width=="0px"&&_2f1>0){com_ibm_widgets_resolver.insertRating(_2e9.oid,_30d(_2e9.oid),_2f1,com_ibm_widgets_resolver.fetchSpecificScopeRatings);}else{com_ibm_widgets_resolver.editRating(_2e9.oid,_30d(_2e9.oid),_2f1,com_ibm_widgets_resolver.fetchSpecificScopeRatings);}}else{com_ibm_widgets_resolver.insertRating(_2e9.oid,_30d(_2e9.oid),_2f1,com_ibm_widgets_resolver.fetchSpecificScopeRatings_anonymousUser);}}});var _2f4=i$.bindDomEvt(_2ea,"onkeypress",function(_2f5){var _2f6=_30d(_2e9.oid);var _2f7=i$.byId(_29f+_2e9.oid);var _2f8=0;if(_2f7!=null){var _2f9=_2f7.style.width;_2f9=_2f9.replace("px","");if(_2f7.style.width!=null&&_2f9!=null){_2f8=Math.ceil(_2f9/_2a5);}if(_2f5.keyCode!=9){switch(_2f5.keyCode){case 38:case 39:_2f8+=1;_2f8=Math.min(_2f8,_2e0);break;case 40:case 37:_2f8-=1;_2f8=Math.max(_2f8,1);break;case 36:_2f8=1;break;case 35:_2f8=_2e0;break;default:break;}var _2fa=_2f8;var _2fb=!ibmPortalConfig.isUserLoggedIn;if(_2f6==_2c4){_314(_2e9.oid,_2c3);if(!_2fb){com_ibm_widgets_resolver.fetchSpecificScopeRatings_defaultView(_2e9.oid,_2c3,_2fa,com_ibm_widgets_rating.updateRatingInDefaultView);}else{com_ibm_widgets_resolver.insertRating(_2e9.oid,_30d(_2e9.oid),_2fa,com_ibm_widgets_resolver.fetchSpecificScopeRatings_anonymousUser);}}else{if(!_2fb){if(_2f7.style.width=="0px"&&_2fa>0){com_ibm_widgets_resolver.insertRating(_2e9.oid,_30d(_2e9.oid),_2fa,com_ibm_widgets_resolver.fetchSpecificScopeRatings);}else{if(_2fa>0){com_ibm_widgets_resolver.editRating(_2e9.oid,_30d(_2e9.oid),_2fa,com_ibm_widgets_resolver.fetchSpecificScopeRatings);}}}else{if(_2fa>0){com_ibm_widgets_resolver.insertRating(_2e9.oid,_30d(_2e9.oid),_2fa,com_ibm_widgets_resolver.fetchSpecificScopeRatings_anonymousUser);}}}}}});var _2fc;try{_2fc=document.defaultView.getComputedStyle(_2ea,"");}catch(e){_2fc=_2ea.currentStyle;}if(_2fc!=null&&((_2fc.backgroundImage=="none")||(_2e6=="true"))){var _2fd=i$.byId(_29a+_2e9.oid);var _2fe=i$.byId(_2d3+_2e9.oid);if(_2fd!=null&&_2fe==null){var _2ff=i$.createDom("ul",{"id":_2d3+_2e9.oid,"style":"list-style: none;","tabindex":"0","role":"navigation"},_2fd);var k;for(k=1;k<=_2e9.numStars;k++){var _300=null;var _301=null;_300=i$.createDom("li",{"id":_2d4+k+_2e9.oid,"style":"list-style: none;display: inline-block;padding:5px; ","tabindex":"0","role":"link","aria-label":k+dojoless_resource_AddTag.title_pub_rating,"value":k},_2ff);_301=i$.createDom("span",{"id":_2d4+k+_2d5+_2e9.oid,"value":k,"tabindex":"0","aria-label":k+dojoless_resource_AddTag.title_pub_rating},_300);}var _302=i$.bindDomEvt(i$.byId(_2d3+_2e9.oid),"onclick",function(evt){var _303=_30d(_2e9.oid);var _304=evt.target;var _305=_304.getAttribute("value");var _306=_305;var _307=0;if(_2fd!=null){var i;for(i=1;i<=_2e9.numStars;i++){var _308=i$.byId(_2d4+i+_2d5+_2e9.oid).innerHTML;if(_308==_2d2){_307=_307+1;}}}if(_303==_2c4){_314(_2e9.oid,_2c3);var _309=!ibmPortalConfig.isUserLoggedIn;if(!_309){com_ibm_widgets_resolver.fetchSpecificScopeRatings_defaultView(_2e9.oid,_2c3,_306,com_ibm_widgets_rating.updateRatingInDefaultView);}else{com_ibm_widgets_resolver.insertRating(_2e9.oid,_30d(_2e9.oid),_306,com_ibm_widgets_resolver.fetchSpecificScopeRatings_anonymousUser);}}else{if(!_309){if(_307==0&&_306>0){com_ibm_widgets_resolver.insertRating(_2e9.oid,_30d(_2e9.oid),_306,com_ibm_widgets_resolver.fetchSpecificScopeRatings);}else{com_ibm_widgets_resolver.editRating(_2e9.oid,_30d(_2e9.oid),_306,com_ibm_widgets_resolver.fetchSpecificScopeRatings);}}else{com_ibm_widgets_resolver.insertRating(_2e9.oid,_30d(_2e9.oid),_306,com_ibm_widgets_resolver.fetchSpecificScopeRatings_anonymousUser);}}});var _30a=i$.bindDomEvt(i$.byId(_2d3+_2e9.oid),"onkeypress",function(_30b){if(_30b.keyCode==13){var _30c=_30d(_2e9.oid);var _30e=i$.byId(_2d3+_2e9.oid);var _30f=0;if(_30e!=null){var i;for(i=1;i<=_2e9.numStars;i++){var _310=i$.byId(_2d4+i+_2d5+_2e9.oid).innerHTML;if(_310==_2d2){_30f=_30f+1;}}var _311=_30b.target||_30b.srcElement;var _312=_311.getAttribute("value");var _313=_312;if(_30c==_2c4&&!_315&&(ibmPortalCPConfig!=null&&ibmPortalCPConfig.operations!=null&&ibmPortalCPConfig.operations.canCreatePublicRatings)){_314(_2e9.oid,_2c3);}var _315=!ibmPortalConfig.isUserLoggedIn;if(_313!=null){if(!_315){if(_30f==0&&_313>0){com_ibm_widgets_resolver.insertRating(_2e9.oid,_30d(_2e9.oid),_313,com_ibm_widgets_resolver.fetchSpecificScopeRatings);}else{com_ibm_widgets_resolver.editRating(_2e9.oid,_30d(_2e9.oid),_313,com_ibm_widgets_resolver.fetchSpecificScopeRatings);}}else{com_ibm_widgets_resolver.insertRating(_2e9.oid,_30d(_2e9.oid),_313,com_ibm_widgets_resolver.fetchSpecificScopeRatings_anonymousUser);}}}}});}}com_ibm_widgets_resolver.setALTtextforAllElementsInRating(_2e9.oid);com_ibm_widgets_resolver.fetchDojolessRatings(_2e9,com_ibm_widgets_rating.displayDojolessRatings);});}}},i$.global);var _316=function(_317,_318){var _319="true";if(_317!=null){_31a(_317);}else{_317=new Array();_31b();_319="false";}_314(_318.oid,_318.scope[0].toUpperCase());if(_318.customLabel==null&&_318.scope[0]!=null){switch(_318.scope[0].toUpperCase()){case (_2c2):if(_318.customLabelPersonalPrivateRatings==null){allRatingLabel=dojoless_resource_AddTag.title_priv_rating;}else{allRatingLabel=_318.customLabelPersonalPrivateRatings;}break;case (_2c3):if(_318.customLabelPersonalPublicRatings==null){allRatingLabel=dojoless_resource_AddTag.title_your_rating;}else{allRatingLabel=_318.customLabelPersonalPublicRatings;}break;case (_2c5):if(_318.customLabelCommunityRatings==null){allRatingLabel=dojoless_resource_AddTag.title_pub_rating;}else{allRatingLabel=_318.customLabelCommunityRatings;}break;default:allRatingLabel=dojoless_resource_AddTag.title_pub_rating;break;}}else{allRatingLabel=_318.customLabel;}var _31c=i$.byId(_29e+_318.oid);if(_31c!=null){_31c.innerHTML="";if(_318.scope[0].toUpperCase()!=_2c5){_31c.innerHTML=allRatingLabel;_31c.setAttribute("alt",allRatingLabel);_31c.setAttribute("title",allRatingLabel);}if(_318.scope[0].toUpperCase()==_2c5&&_318.customLabelCommunityRatings!=null){_31c.innerHTML=_318.customLabelCommunityRatings;_31c.setAttribute("alt",allRatingLabel);_31c.setAttribute("title",allRatingLabel);}}var _31d=i$.byId(_29f+_318.oid);var _31e=i$.byId(_2a0+_318.oid);var _31f=i$.byId(_2a1+_318.oid);var _320=0;if(_297){_320=_296+0.5;}else{_320=_296;}var _321=0;_321=(_318.numStars*_2a5)+_2a6;_31e.style.width=_321;if(_319=="true"){var _322=0;_322=(_320*_2a5)+_2a6;_31d.style.width=_322;_31e.setAttribute("alt",dojoless_resource_AddTag.title_pub_rating+_320);_31e.setAttribute("title",dojoless_resource_AddTag.title_pub_rating+_320);_31d.setAttribute("alt",dojoless_resource_AddTag.title_pub_rating+_320);_31d.setAttribute("title",dojoless_resource_AddTag.title_pub_rating+_320);}else{_31d.style.width=0+_2a6;_31d.setAttribute("alt",dojoless_resource_AddTag.title_pub_rating+"0");_31d.setAttribute("title",dojoless_resource_AddTag.title_pub_rating+"0");_31e.setAttribute("alt",dojoless_resource_AddTag.title_pub_rating+"0");_31e.setAttribute("title",dojoless_resource_AddTag.title_pub_rating+"0");}var _323=i$.byId(_2d3+_318.oid);if(_323!=null){_31e.setAttribute("style","display:none");_31d.setAttribute("style","display:none");var _324;if(_297){_324=_296+1;}else{_324=_296;}var i;var j;for(i=1;i<=_324;i++){i$.byId(_2d4+i+_2d5+_318.oid).innerHTML=_2d2;}for(j=_324+1;j<=_318.numStars;j++){i$.byId(_2d4+j+_2d5+_318.oid).innerHTML=_2d1;}_323.setAttribute("aria-label",_324+dojoless_resource_AddTag.title_pub_rating);}var _325;_325=i$.byId(_2a4+_318.oid);if(_325!=null){_325.setAttribute("class",_2cf);}if(_31f!=null){_31f.innerHTML=" ";_298=_318.numStars;if(_318.scope[0].toUpperCase()==_2c5){switch(_318.ratingDescription.toUpperCase()){case ("NONE"):_325=i$.byId(_2a4+_318.oid);if(_325!=null){_325.setAttribute("class",_2d0);}break;case ("RATING_VALUE"):if(_320>0){if(_294==1){_31f.innerHTML=_2a7+_320+_2a9+_298+_2a8;}else{_31f.innerHTML=_2a7+_320+_2a9+_298+_2a8;}}break;case ("TOTAL_NO_RATING"):if(_320>0){if(_294==1){_31f.innerHTML=_2a7+_294+" "+dojoless_resource_AddTag.ratingDescription_rating+_2a8;}else{_31f.innerHTML=_2a7+_294+" "+dojoless_resource_AddTag.ratingDescription_ratings+_2a8;}}break;default:if(_294>0&&_320>0){if(_294==1){_31f.innerHTML=_2a7+_320+_2a9+_298+" "+dojoless_resource_AddTag.ratingDescription_from+" "+_294+" "+dojoless_resource_AddTag.ratingDescription_rating+_2a8;}else{_31f.innerHTML=_2a7+_320+_2a9+_298+" "+dojoless_resource_AddTag.ratingDescription_from+" "+_294+" "+dojoless_resource_AddTag.ratingDescription_ratings+_2a8;}}}}if(_325!=null){_325.setAttribute("class",_2cf);}}else{if(_325!=null){_325.setAttribute("class",_2d0);}}var _326=i$.byId(_2a2+_318.oid);if(_326!=null){_326.setAttribute("onclick","com_ibm_widgets_rating.getRatingMenu('"+_318.oid+"')");var _327=i$.bindDomEvt(_326,"onkeypress",i$.scope(this,function(_328){var _329=_328.keyCode;if(_328.keyCode==0&&_328.charCode==32){_329=32;}switch(_329){case 38:case 32:case 40:case 13:var _32a=i$.byId(_2bd+_318.oid);if(_32a==null){com_ibm_widgets_rating.getRatingMenu(_318.oid);var _32b=_2aa+_318.oid;var _32c=i$.byId(_32b);if(_32c!=null){var _32d=_32c.firstChild;window.setTimeout(function(){_32d.focus();},200);}if(_328.preventDefault){_328.preventDefault();}if(_328.returnValue){_328.returnValue=false;}}break;case 39:case 40:if(this.ratingsDropDownMenu!=null){this.ratingsDropDownMenu.close();}break;}}));}var _32e=i$.byId(_2bd+_318.oid);if(_32e!=null&&this.ratingsDropDownMenu!=null){this.ratingsDropDownMenu.close();}com_ibm_widgets_resolver.clearRatingErrorMessage(_318.oid);var _32f=i$.byId(_2ca+_318.oid);if(_32f!=null){_32f.setAttribute("class",_2cc);}var _330=i$.byId(_2cb+_318.oid);if(_330!=null){_330.setAttribute("class",_2cd);}};var _331=function(avg){avg*=10;avg=Math.round(avg);return avg/10;};var _332=function(_333){var _334=0;var _335=0;var _336=[];i$.each(_333,function(obj,key){_335+=parseInt(obj.count);_336[parseInt(obj.name)-1]=parseInt(obj.count);_334+=parseInt(obj.name)*parseInt(obj.count);});_334/=_335;return [_334,_335,_336];};var _337=function(avg){var dec=avg-Math.floor(avg);return dec>=0.25&&dec<=0.75;};var _338=function(avg){var _339=Math.floor(avg);return (avg-_339)>0.75?_339+1:_339;};var _31a=function(_33a){var _33b=_332(_33a);_293=_33b[0];_294=_33b[1];_295=_33b[2];_296=_338(_293);_297=_337(_293);};var _31b=function(){_293=0;_294=0;_295=0;_296=0;_297=false;};var _314=function(_33c,_33d){var _33e=i$.byId(_29b+_33c);if(_33d==_2c5){_33d=_2c4;}if(_33e==null){var _33f=document.createElement("input");_33f.setAttribute("id",_29b+_33c);_33f.setAttribute("type","hidden");_33f.setAttribute("name","currentScope");_33f.setAttribute("value",_33d);var _340=i$.byId(_299+_33c);_340.appendChild(_33f);}else{_33e.setAttribute("value",_33d);}};var _30d=function(_341){var _342=i$.byId(_29b+_341);if(_342!=null){return _342.value;}};var _343=function(_344){var _345={"oid":_344};var _346=_2ab+_344;var _347=i$.byId(_299+_344);var _348=i$.createDom("div",{"id":_346,"tabindex":"0","class":_2be+_2b8,"dir":_2bf});var _349=_2aa+_344;var _34a=i$.createDom("div",{"id":_349,"tabindex":"0","role":"menu","class":_2be+_2b8,"aria-label":dojoless_resource_AddTag.rating_menu,"dir":_2bf},_348);var _34b=null;var _34c=null;var _34d=null;var _34e=null;var _34f=null;var _350=null;var _351=i$.byId(_29f+_344);if(_351.style.width=="0px"){deleteEnabled="false";}else{deleteEnabled="true";}var _352=_353(_344);var _354=_355(_344);var _356=_30d(_344);com_ibm_widgets_resolver.clearRatingErrorMessage(_344);var _357=!ibmPortalConfig.isUserLoggedIn;if(_357){_352="false";deleteEnabled="false";}if(_354=="false"){deleteEnabled="false";}switch(_356){case (_2c2):var _358=dojoless_resource_AddTag.Menu_rating;var _359=_358+"_"+"Link"+"_"+_344;_34c=_35a(_359,ibmPortalConfig.locale,_2bf,_344,_34a,_2c5);var _35b=document.createTextNode(_358);_34c.appendChild(_35b);var _35c=dojoless_resource_AddTag.Menu_myRating;var _35d=_35c+"_"+"Link"+"_"+_344;_34b=_35a(_35d,ibmPortalConfig.locale,_2bf,_344,_34a,_2c3);var _35e=document.createTextNode(_35c);_34b.appendChild(_35e);_34b.setAttribute("alt",_35c);_34b.setAttribute("title",_35c);if(deleteEnabled=="true"){var _35f=dojoless_resource_AddTag.deleteRating;var _360=_35f+"_"+"Link"+"_"+_344;_34e=_361(_360,ibmPortalConfig.locale,_2bf,_344,_34a,_2c2);var _362=document.createTextNode(_35f);_34e.appendChild(_362);_34e.setAttribute("alt",_35f);_34e.setAttribute("title",_35f);}break;case (_2c3):var _358=dojoless_resource_AddTag.Menu_rating;var _359=_358+"_"+"Link"+"_"+_344;_34c=_35a(_359,ibmPortalConfig.locale,_2bf,_344,_34a,"COMMUNITY_RATING");var _35b=document.createTextNode(_358);_34c.appendChild(_35b);if(_352=="true"){var _363=dojoless_resource_AddTag.Menu_privateRating;var _364=_363+"_"+"Link"+"_"+_344;_34d=_35a(_364,ibmPortalConfig.locale,_2bf,_344,_34a,_2c2);var _35e=document.createTextNode(_363);_34d.appendChild(_35e);_34d.setAttribute("alt",_363);_34d.setAttribute("title",_363);}if(deleteEnabled=="true"){var _35f=dojoless_resource_AddTag.deleteRating;var _360=_35f+"_"+"Link"+"_"+_344;_34f=_361(_360,ibmPortalConfig.locale,_2bf,_344,_34a,_2c3);var _362=document.createTextNode(_35f);_34f.appendChild(_362);_34f.setAttribute("alt",_35f);_34f.setAttribute("title",_35f);}break;case (_2c4):if(ibmPortalCPConfig!=null&&ibmPortalCPConfig.operations!=null&&ibmPortalCPConfig.operations.canCreatePublicRatings){var _35c=dojoless_resource_AddTag.Menu_myRating;var _35d=_35c+"_"+"Link"+"_"+_344;_34b=_35a(_35d,ibmPortalConfig.locale,_2bf,_344,_34a,_2c3);var _35e=document.createTextNode(_35c);_34b.appendChild(_35e);_34b.setAttribute("alt",_35c);_34b.setAttribute("title",_35c);}if(_352=="true"){var _363=dojoless_resource_AddTag.Menu_privateRating;var _364=_363+"_"+"Link"+"_"+_344;_34d=_35a(_364,ibmPortalConfig.locale,_2bf,_344,_34a,_2c2);var _35e=document.createTextNode(_363);_34d.appendChild(_35e);_34d.setAttribute("alt",_363);_34d.setAttribute("title",_363);}if(ibmPortalCPConfig.operations.canResetRatingPerResource&&deleteEnabled=="true"){var _35f=dojoless_resource_AddTag.deleteRating+" "+dojoless_resource_AddTag.ratingDescription_ratings;var _360=_35f+"_"+"Link"+"_"+_344;_350=_365(_360,ibmPortalConfig.locale,_2bf,_344,_34a,_2c4);var _362=document.createTextNode(_35f);_350.appendChild(_362);_350.setAttribute("alt",_35f);_350.setAttribute("title",_35f);}break;default:allRatingLabel=dojoless_resource_AddTag.title_pub_rating;}if(_356==_2c4){var _366=dojoless_resource_AddTag.Rating_Distribution;var _367=i$.createDom("div",{"id":_2b9+_344,"dir":_2bf},_34a);var _368=i$.createDom("a",{"id":_2ac+_344,"lang":ibmPortalConfig.locale,"dir":_2bf,"href":"javascript:;","tabindex":"0","onclick":"com_ibm_widgets_resolver.fetchSpecificScopeRatings('"+_344+"',\""+_2c4+"\",com_ibm_widgets_rating.displayRatingDistribution);","class":_2be+_2b8},_367);var _369=document.createTextNode(_366);if(_369!=null){_368.appendChild(_369);}}if(_356!=_2c4){_34a.appendChild(_34c);_34a.appendChild(i$.createDom("br",{},_34c));}if(_356!=_2c3){if(_34b!=null){_34a.appendChild(_34b);_34a.appendChild(i$.createDom("br",{},_34b));}}if(_356!=_2c2&&_34d!=null){if(_34d){_34a.appendChild(_34d);_34a.appendChild(i$.createDom("br",{},_34d));}}if(_356==_2c3&&deleteEnabled=="true"){if(_34d!=null){_34a.appendChild(i$.createDom("hr",{"class":_2be+_2b5,"dir":_2bf},_34d));}else{_34a.appendChild(i$.createDom("hr",{"class":_2be+_2b6,"dir":_2bf},_34c));}_34a.appendChild(_34f);}if(_356==_2c2&&deleteEnabled=="true"){_34a.appendChild(i$.createDom("hr",{"class":_2be+_2b5,"dir":_2bf},_34b));_34a.appendChild(_34e);}var _36a=null;if(_356==_2c4){if(_350!=null){if(_34d!=null){var _36b=i$.createDom("hr",{"class":_2be+_2b4,"dir":_2bf},_34d);}else{var _36b=i$.createDom("hr",{"class":_2be+_2b4,"dir":_2bf},_34b);}_34a.appendChild(_36b);_34a.appendChild(_350);}if(_34c!=null){_36a=i$.createDom("hr",{"class":_2be+_2b4,"dir":_2bf},_34c);}else{if(_34b!=null){_36a=i$.createDom("hr",{"class":_2be+_2b4,"dir":_2bf},_34b);}}if(_36a!=null){_34a.appendChild(_36a);}if(_356==_2c4){_34a.appendChild(_367);}}_36c(_348.innerHTML,_345.oid);};function _36d(rsID){return i$.byId(_2a2+rsID);};var _36c=function(aID,rsID){var _36e=dojoless_resource_AddTag.Menu_rating;var _36f=_36e+"_"+"Link"+"_"+rsID;var _370=dojoless_resource_AddTag.Menu_privateRating;var _371=_370+"_"+"Link"+"_"+rsID;var _372=dojoless_resource_AddTag.deleteRating;var _373=_372+"_"+"Link"+"_"+rsID;var _374=dojoless_resource_AddTag.Menu_myRating;var _375=_374+"_"+"Link"+"_"+rsID;var _376=dojoless_resource_AddTag.Rating_Distribution;this.ratingsDropDownMenu=null;this.ratingsDropDownMenu=new wpModules.dialog.Dialog({id:_2bd+rsID,markup:aID,autoPosition:_36d(rsID),autoResize:true,displayCloseOverlay:true,autoClose:true,posHandler:"horizontallyCenteredBelow",callbackFn:function(arg){var _377=i$.byId(_2a2+rsID);if(_377!=null){window.setTimeout(function(){_377.focus();},200);}}});this.ratingsDropDownMenu.open();var _378=i$.byId(_2aa+rsID);if(_378!=null){var _379=i$.bindDomEvt(_378,"onkeydown",i$.scope(this,function(_37a){var _37b=_37a.keyCode;if(_37a.keyCode==0&&_37a.charCode==32){_37b=32;}switch(_37b){case 9:if(this.ratingsDropDownMenu!=null){this.ratingsDropDownMenu.close();}break;case 27:if(this.ratingsDropDownMenu!=null){this.ratingsDropDownMenu.close();}break;case 82:if(i$.byId(_2ac+rsID)!=null){i$.byId(_2ac+rsID).focus();}if(i$.byId(_36f)!=null){i$.byId(_36f).focus();}if(i$.byId(_2ad+rsID)!=null){i$.byId(_2ad+rsID).focus();}break;case 32:var _37c=document.activeElement;var text=_37c.innerHTML;if(this.ratingsDropDownMenu!=null&&!(text.match(_376))){this.ratingsDropDownMenu.close();}if(text==_374){com_ibm_widgets_resolver.fetchSpecificScopeRatings(rsID,_2c3,com_ibm_widgets_rating.displayDojolessRatings);}else{if(text==_370){com_ibm_widgets_resolver.fetchSpecificScopeRatings(rsID,_2c2,com_ibm_widgets_rating.displayDojolessRatings);}else{if(text==_36e){com_ibm_widgets_resolver.fetchSpecificScopeRatings(rsID,_2c5,com_ibm_widgets_rating.displayDojolessRatings);}else{if(text==_372){com_ibm_widgets_resolver.deleteRating(rsID,_30d(rsID));}else{if(text==_376){com_ibm_widgets_resolver.fetchSpecificScopeRatings(rsID,_2c4,com_ibm_widgets_rating.displayRatingDistribution);if(i$.byId(_2ad+rsID)!=null){i$.byId(_2ad+rsID).focus();}}}}}}break;case 37:break;case 38:var _37c=document.activeElement;var _37d=_37e(_37c);if(_37d!=null){_37d.focus();}if(_37a.preventDefault){_37a.preventDefault();}return false;break;case 18:case 40:var _37c=document.activeElement;var _37d=_37f(_37c);if(_37d!=null){_37d.focus();}if(_37a.preventDefault){_37a.preventDefault();}return false;break;default:var _380=document.activeElement;_381(_37a.keyCode,_378,_380);break;}}));}};var _382=function(_383,_384){if(_383!=null){_294=_383.length;_31a(_383);}else{_31b();}var i=_384.numStars-1;var _385=_2aa+_384.oid;var _386=_2ab+_384.oid;var _387=i$.byId(_2b9+_384.oid);var _388=_2ac+_384.oid;var _389=i$.byId(_388);var _38a=_2ad+_384.oid;while(_387.hasChildNodes()){_387.removeChild(_387.lastChild);}var _38b=i$.createDom("div",{"id":"ratingDistributionText"+_384.oid,"tabindex":"0","class":_2be+_2b8,"dir":_2bf},_387);var _38c=document.createTextNode(dojoless_resource_AddTag.Rating_Distribution);if(_38b!=null){_38b.appendChild(_38c);}if(i$.byId(_38a)==null){var _38d=dojoless_resource_AddTag.Rating_Distribution;var _38e=i$.createDom("div",{"id":_38a,"tabindex":"0","class":_2be+_2b8,"dir":_2bf},_387);for(i;i>=0;i--){var _38f=_295[i]||0;var part=0;if(_38f>0){part=Math.round(_38f/_294*100);part=part/100*(_2b7*_384.numStars);}var _390=_384.numStars*_2b7;var _391=i$.createDom("div",{"id":"mainDiv_"+i+"_"+_384.oid,"tabindex":"0","padding":"10px","class":_2be+_2b2,"dir":_2bf},_38e);var _392=i$.createDom("span",{"id":_2bb+i+"_"+_384.oid,"padding":"10px","class":_2be+_2ba,"dir":_2bf},_391);var _393=document.createTextNode(i+1+"  "+dojoless_resource_AddTag.star);_392.appendChild(_393);var j=i+1;_392.setAttribute("alt",j+"  "+dojoless_resource_AddTag.star);_392.setAttribute("title",j+"  "+dojoless_resource_AddTag.star);_38d=_38d+j+"  "+dojoless_resource_AddTag.star;var _394=i$.createDom("div",{"id":"innerDiv_"+i+"_"+_384.oid,"class":"wpRatingLight menu","dir":_2bf},_391);var _395,_396;if(i$.isIE<9){if(_2bf=="ltr"){_395=i$.createDom("div",{"id":"distributionDiv"+i+"_"+_384.oid,"class":_2be+_2b0,"dir":_2bf},_394);_396=i$.createDom("div",{"id":"distributionStyleDiv"+i+"_"+_384.oid,"class":_2be+_2b1,"dir":_2bf,},_395);}else{_395=i$.createDom("div",{"id":"distributionDiv"+i+"_"+_384.oid,"class":_2be+_2b0,"dir":_2bf},_394);_396=i$.createDom("div",{"id":"distributionStyleDiv"+i+"_"+_384.oid,"class":_2be+_2c1,"dir":_2bf,},_395);}}else{if(_2bf=="ltr"){_395=i$.createDom("div",{"id":"distributionDiv"+i+"_"+_384.oid,"class":_2be+_2ae,"dir":_2bf},_394);_396=i$.createDom("div",{"id":"distributionStyleDiv"+i+"_"+_384.oid,"class":_2be+_2af,"dir":_2bf,},_395);}else{_395=i$.createDom("div",{"id":"distributionDiv"+i+"_"+_384.oid,"class":_2be+_2ae,"dir":_2bf},_394);_396=i$.createDom("div",{"id":"distributionStyleDiv"+i+"_"+_384.oid,"class":_2be+_2c0,"dir":_2bf},_395);}}_395.style.width=_390+_2a6;_396.style.width=part+_2a6;var _397=i$.createDom("span",{"id":"countDiv"+i+"_"+_384.oid,"class":_2be+_2ba,"dir":_2bf},_391);var _398=document.createTextNode(_38f);if(_398!=null){_397.appendChild(_398);_397.setAttribute("alt",_38f);_397.setAttribute("title",_38f);_38d=_38d+_38f;}var _399=i$.createDom("div",{"id":"countExtraDiv"+i+"_"+_384.oid,"class":_2be+_2ba,"dir":_2bf},_391);}var _39a=i$.createDom("div",{"id":"totalRatingDiv"+_384.oid,"class":_2be+_2b3,"dir":_2bf},_38e);var _39b;if(_294<=1){_39b=document.createTextNode(_294+" "+dojoless_resource_AddTag.Rating);_39a.setAttribute("alt",_294+" "+dojoless_resource_AddTag.Rating);_39a.setAttribute("title",_294+" "+dojoless_resource_AddTag.Rating);_38d=_38d+_294+" "+dojoless_resource_AddTag.Rating;}else{_39b=document.createTextNode(_294+" "+dojoless_resource_AddTag.Ratings);_39a.setAttribute("alt",_294+" "+dojoless_resource_AddTag.Ratings);_39a.setAttribute("title",_294+" "+dojoless_resource_AddTag.Ratings);_38d=_38d+_294+" "+dojoless_resource_AddTag.Ratings;}_39a.appendChild(_39b);var _387=i$.byId(_2ad+_384.oid);if(_387!=null){_387.setAttribute("alt",_38d);_387.setAttribute("title",_38d);}}};var _353=function(_39c){var _39d=i$.byId(_29c+_39c);if(_39d!=null){return _39d.value;}};var _39e=function(_39f,_3a0){var _3a1=i$.byId(_29c+_39f);if(_3a1==null){var _3a2=i$.byId(_299+_39f);var _3a3=document.createElement("input");_3a3.setAttribute("id",_29c+_39f);_3a3.setAttribute("type","hidden");_3a3.setAttribute("name","privateRatingEnabled");_3a3.setAttribute("value",_3a0);_3a2.appendChild(_3a3);}else{_3a1.setAttribute("value",_3a0);}};var _355=function(_3a4){var _3a5=i$.byId(_29d+_3a4);if(_3a5!=null){return _3a5.value;}};var _3a6=function(_3a7,_3a8){var _3a9=i$.byId(_29d+_3a7);if(_3a9==null){var _3aa=i$.byId(_299+_3a7);var _3ab=document.createElement("input");_3ab.setAttribute("id",_29d+_3a7);_3ab.setAttribute("type","hidden");_3ab.setAttribute("name","deleteRatingEnabled");_3ab.setAttribute("value",_3a8);_3aa.appendChild(_3ab);}else{_3a9.setAttribute("value",_3a8);}};var _35a=function(id,lang,dir,_3ac,_3ad,_3ae){var _3af=!ibmPortalConfig.isUserLoggedIn;if(!_3af){return i$.createDom("a",{"id":id,"lang":lang,"dir":dir,"href":"javascript:;","class":_2be+_2b8,"tabindex":"0","role":"menuitem","aria-label":_3ae,"onclick":"com_ibm_widgets_resolver.fetchSpecificScopeRatings('"+_3ac+"',\""+_3ae+"\",com_ibm_widgets_rating.displayDojolessRatings);"},_3ad);}else{return i$.createDom("a",{"id":id,"lang":lang,"dir":dir,"href":"javascript:;","class":_2be+_2b8,"tabindex":"0","role":"menuitem","aria-label":_3ae,"onclick":"com_ibm_widgets_resolver.fetchSpecificScopeRatings_anonymousUser('"+_3ac+"',\""+_3ae+"\",\"0\",com_ibm_widgets_rating.displayDojolessRatings);"},_3ad);}};var _361=function(id,lang,dir,_3b0,_3b1,_3b2){return i$.createDom("a",{"id":id,"lang":lang,"dir":dir,"href":"javascript:;","tabindex":"0","class":_2be+_2b8,"onclick":"com_ibm_widgets_resolver.deleteRating('"+_3b0+"',\""+_3b2+"\");"},_3b1);};var _365=function(id,lang,dir,_3b3,_3b4,_3b5){return i$.createDom("a",{"id":id,"lang":lang,"dir":dir,"href":"javascript:;","tabindex":"0","class":_2be+_2b8,"onclick":"com_ibm_widgets_resolver.deleteAllRating('"+_3b3+"',\""+_3b5+"\");"},_3b4);};var _3b6=function(_3b7,_3b8){if(_3b7!=null){_294=_3b7.length;_31a(_3b7);}else{_31b();}if(_297){numericalRatingValue=_296+0.5;}else{numericalRatingValue=_296;}var _3b9=!ibmPortalConfig.isUserLoggedIn;if(numericalRatingValue==0||(_3b9&&numericalRatingValue>0)){com_ibm_widgets_resolver.insertRating(_3b8.oid,_30d(_3b8.oid),_3b8.ratingValue,com_ibm_widgets_resolver.fetchSpecificScopeRatings);}else{com_ibm_widgets_resolver.editRating(_3b8.oid,_30d(_3b8.oid),_3b8.ratingValue,com_ibm_widgets_resolver.fetchSpecificScopeRatings);}};var _37f=function(item){if(item!=null&&item.id!=null&&(item.id.match("ratingDistr")||item.id.match("RatingDistr"))){item=item.parentNode;}var _3ba=item.parentNode;var _3bb=_3ba.childNodes;var _3bc=_3bb.length;var i=0;var _3bd=0;for(i=0;i<_3bc;i++){if(_3bb.item(i)==item){_3bd=i;break;}}if(_3bd==_3bc-1){_3bd=0;}else{_3bd=_3bd+1;var j=_3bd;for(j;j<_3bc;j++){if(!(_3bb.item(j).innerHTML==null||_3bb.item(j).innerHTML=="")){break;}}if(j==_3bc){_3bd=0;}else{_3bd=j;}}var _3be=_3bb.item(_3bd).id;var temp=_3bb.item(_3bd);if(_3be.match("ratingDistr")){temp=temp.firstChild;}temp.focus();return i$.byId(_3bb.item(_3bd).id);};var _37e=function(item){if(item!=null&&item.id!=null&&(item.id.match("ratingDistr")||item.id.match("RatingDistr"))){item=item.parentNode;}var _3bf=item.parentNode;var _3c0=_3bf.childNodes;var _3c1=_3c0.length;var i=0;var _3c2=0;for(i=0;i<_3c1;i++){if(_3c0.item(i)==item){_3c2=i;break;}}if(_3c2==0){_3c2=_3c1-1;if(_3c0.item(_3c2).innerHTML==""==null||_3c0.item(_3c2).innerHTML==""){_3c2=_3c2-1;}}else{_3c2=_3c2-1;var j=_3c2;for(j;j>0;j--){if(!(_3c0.item(j).innerHTML==""==null||_3c0.item(j).innerHTML=="")){break;}}_3c2=j;}var _3c3=_3c0.item(_3c2).id;var temp=_3c0.item(_3c2);if(_3c3.match("ratingDistr")){temp=temp.firstChild;}temp.focus();return i$.byId(_3c0.item(_3c2).id);};var _381=function(_3c4,item,_3c5){var _3c6=item.parentNode;var _3c7=_3c6.childNodes;var _3c8=item;var _3c9=String.fromCharCode(_3c4),_3ca=_3c9.toLowerCase(),_3cb=_3cc(_3c5),_3cd=_3c5.innerHTML.charAt(_3cb),_3ce=_3c7,_3cf;if(_3ca==_3cd.toLowerCase()){var _3d0=0;var i=0;_3ce=_3c8.childNodes;var len=_3ce.length;for(i;i<len;i++){if(_3ce.item(i)==_3c5){break;}}_3d0=i;var _3d1=_3d2(_3ce,_3d0,_3cd,_3c9);if((_3d1!=item)){_3d3(_3d1);}}else{_3ce=_3c8.childNodes;for(var k=0,nal=_3ce.length;k<nal;k++){_3cb=_3cc(_3ce[k]);_3cf=_3ce[k].innerHTML;if((_3ca==_3cf.charAt(_3cb).toLowerCase())){_3d3(_3ce[k]);break;}}}};function _3d3(item){item.focus();};function _3d2(_3d4,_3d5,_3d6,_3d7){var _3d8,_3d9=false,_3da,_3db=_3d4.length,_3dc=(_3d5==_3db-1)?-1:_3d5;for(var i=_3dc+1;i<_3db;i++){_3d8=_3cc(_3d4[i]);_3da=_3d4[i].innerHTML.charAt(_3d8).toLowerCase();if(_3da==_3d7.toLowerCase()){_3d5=i;break;}if(i==_3d4.length-1){if(_3d9){break;}i=-1;_3db=_3d5;_3d9=true;}}return _3d4[_3d5];};function _3cc(item){var ltr=null;var loc=ibmCfg.portalConfig.locale;if(loc!=null){var _3dd=i$.isRTL(loc);if(_3dd!=null){if(_3dd){ltr=false;}else{ltr=true;}}}if((item.text)&&(!ltr)){return item.text.length-1;}return 0;};return {getRatingMenu:_343,displayDojolessRatings:_316,displayRatingDistribution:_382,getCurrentDisplayedScope:_30d,openRatingsActionDropDownMenu:_36c,displayDojolessRatings:_316,updateRatingInDefaultView:_3b6,RATINGWIDGET_STARS_DIV_PREFIX:"ratinglightstars_",RATINGWIDGET_PREFIX:"ratinglight_"};})();if(typeof (UTILS)==="undefined"){var UTILS={};UTILS.trim=function(str){if(str.trim){return str.trim();}else{var _3de=/^\s+|\s+$/g;return str.replace(_3de,"");}};UTILS.getCaretPosition=function(el){if(typeof (el.selectionStart)!=="undefined"){return el.selectionStart;}else{if(document.selection){var _3df=document.selection.createRange();_3df.moveStart("character",-el.value.length);return _3df.text.length;}}};UTILS.setCaretPosition=function(el,pos){if(typeof (el.selectionStart)!=="undefined"){el.selectionStart=el.selectionEnd=pos;}else{if(document.selection){var _3e0=el.createTextRange();_3e0.moveStart("character",pos);_3e0.collapse(true);_3e0.select();}}};UTILS.filter=function(arr,func){if(arr.filter){return arr.filter(func);}else{var ret=[];for(var i=0;i<arr.length;i++){if(func(arr[i])){ret.push(arr[i]);}}return ret;}};UTILS.removeClass=function(el,cls){var s=el.className;var _3e1=new RegExp("(^|\\s+)"+cls+"(\\s+|$)","g");s=s.replace(_3e1," ").replace(/\s+/g," ").replace(/^\s|\s$/g,"");el.className=s;};}var suggestionTags=[];var suggestionItems=[];var currentSuggestion=-1;var oldSuggestText="";var DEMO_SUGGESTIONS=["Hans","Horst","Hubert","Hannelore","Herbert","Peter","Petra","Peer","Paula","Paul"];var checkInput=function(_3e2){var text=_3e2.value;var _3e3=UTILS.getCaretPosition(_3e2);var b=getSourroundingTextBoundaries(text,_3e3);var text=UTILS.trim(text.slice(b.from,b.to));if(text===oldSuggestText){return;}oldSuggestText=text;if(text.length===0){hideSuggestionList(_3e2);}else{updateSuggestions(_3e2,text);}};var keyDownHandler=function(e,_3e4,_3e5,_3e6){var _3e7=_3e5.count;var c=e.keyCode;var _3e8=true;if(c===27){if(currentSuggestion>-1){removeSuggestionSelection();}else{}}else{if(c===13){if(currentSuggestion>-1){updateInputWithSuggestion(_3e4,currentSuggestion);}else{addTags(_3e4.value,com_ibm_widgets_tagging.tagIdsArray[_3e7],_3e6);}}else{if(c===40){changeSuggestionSelection(currentSuggestion+1);}else{if(c===38){changeSuggestionSelection(currentSuggestion-1);}else{_3e8=false;}}}}if(_3e8){if(e.preventDefault){e.preventDefault();}if(e.returnValue){e.returnValue=false;}}};var blurTimerId;var updateTimerId;var blurHandler=function(){if(updateTimerId){window.clearInterval(updateTimerId);updateTimerId=null;}};var getSourroundingTextBoundaries=function(text,pos){var from=text.lastIndexOf(TAG_INPUT_SEPARATOR,pos);var to=text.indexOf(TAG_INPUT_SEPARATOR,pos);if(text[pos]===TAG_INPUT_SEPARATOR){from=text.lastIndexOf(TAG_INPUT_SEPARATOR,pos-1);}if(from<0){from=-1;}if(to<0){to=text.length;}return {from:from+1,to:to};};var addTags=function(_3e9,oid,_3ea,_3eb){var _3ec=_3e9;if(typeof (_3ec)!=="string"||_3ec.length===0){return;}if(_3ec.length>50){com_ibm_widgets_resolver.showTaggingValidationError(oid,dojoless_resource_AddTag.text_error_tags_too_long);return;}var str=_3ec.split(/[ ,]+/);var tags=[];for(var i=0;i<str.length;i++){if(tags.indexOf(str[i])==-1){tags.push(str[i]);}}for(var i=0;i<tags.length;i++){var _3ed=UTILS.trim(tags[i]);if(_3ed.length===0){continue;}var tag={name:_3ed,oid:oid,isPrivate:_3ea};if(oid!=null){com_ibm_widgets_resolver.insertTag(tag);}}};var hideSuggestionList=function(_3ee){_3ee.innerHTML="";suggestionTags=[];currentSuggestion=-1;};var updateSuggestions=function(_3ef,text){var _3f0=text.toLowerCase();var len=text.length;var _3f1=UTILS.filter(suggestionTags,function(tag){return (tag.slice(0,len).toLowerCase()===_3f0&&tag.length!==len);});_3f1=_3f1.slice(0,3);updateSuggestionList(_3ef,text,_3f1);window.setTimeout(function(){getSuggestionsFromServer(_3ef,text);},500);};var getSuggestionsFromServer=function(_3f2,text){if(text!==oldSuggestText){return;}var _3f3=text.toLowerCase();var len=text.length;var _3f4=UTILS.filter(DEMO_SUGGESTIONS,function(tag){return (tag.slice(0,len).toLowerCase()===_3f3&&tag.length!==len);});_3f4.sort();_3f4=_3f4.slice(0,3);updateSuggestionList(_3f2,text,_3f4);};var updateSuggestionList=function(_3f5,_3f6,_3f7){if(!_3f7||_3f7.length===0){hideSuggestionList(_3f5);return;}suggestionTags=_3f7;suggestionItems=[];currentSuggestion=-1;inputLen=_3f6.length;var _3f8=i$.byId("TagWidget_0_SuggestionList");_3f8.innerHTML="";for(var i=0;i<_3f7.length;i++){var tag=_3f7[i];var _3f9=tag.slice(0,inputLen);var _3fa=tag.slice(inputLen);var _3fb=i$.createDom("li",{},_3f8);var _3fc=document.createTextNode(_3f9+"<strong>"+_3fa+"</strong>");_3fb.appendChild(_3fc);suggestionItems.push(_3fb);}};var suggestionItemMouseOver=function(e){var _3fd=UTILS.getTarget(e);var i=UTILS.indexOf(suggestionItems,_3fd);if(i===-1){i=UTILS.indexOf(suggestionItems,_3fd.parentNode);}changeSuggestionSelection(i);};var suggestionItemMouseOut=function(e){removeSuggestionSelection();};var suggestionItemClick=function(_3fe,e){var _3ff=UTILS.getTarget(e);var i=UTILS.indexOf(suggestionItems,_3ff);if(i===-1){i=UTILS.indexOf(suggestionItems,_3ff.parentNode);}updateInputWithSuggestion(_3fe,i);};var changeSuggestionSelection=function(_400){if(currentSuggestion>-1){UTILS.removeClass(suggestionItems[currentSuggestion],"highlight");}if(_400>=suggestionItems.length){_400=-1;}if(_400<-1){_400=suggestionItems.length-1;}if(_400<0){currentSuggestion=-1;}else{suggestionItems[_400].className+=" highlight";currentSuggestion=_400;}};var removeSuggestionSelection=function(){changeSuggestionSelection(-1);};var updateInputWithSuggestion=function(_401,_402){var pos=UTILS.getCaretPosition(_401);var _403=_401.value;var b=getSourroundingTextBoundaries(_403,pos);var _404=suggestionTags[_402];if(b.from>0&&_403[b.from-1]===TAG_INPUT_SEPARATOR){_404=" "+_404;}var _405=_403.slice(0,b.from)+_404+_403.slice(b.to);if(b.to===_403.length){_405+=TAG_INPUT_SEPARATOR+" ";}_401.value=_405;_401.focus();if(b.to===_403.length){UTILS.setCaretPosition(_401,_405.length);}else{UTILS.setCaretPosition(_401,b.from+_404.length);}};

}catch(e){console.log("Module 'wp_tagging_rating_light': ",e);}